var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i,a;function c(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function l(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function f(){return p(" ")}function m(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t,n,s){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function v(e){a=e}function y(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const x=[],$=[];let S=[];const k=[],w=Promise.resolve();let I=!1;function _(e){S.push(e)}const T=new Set;let E=0;function M(){if(0!==E)return;const e=a;do{try{for(;E<x.length;){const e=x[E];E++,v(e),U(e.$$)}}catch(e){throw x.length=0,E=0,e}for(v(null),x.length=0,E=0;$.length;)$.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];T.has(t)||(T.add(t),t())}S.length=0}while(x.length);for(;k.length;)k.pop()();I=!1,T.clear(),v(e)}function U(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_)}}const F=new Set;function L(e,t){e&&e.i&&(F.delete(e),e.i(t))}function O(e,t){e.d(1),t.delete(e.key)}function C(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];S.forEach((s=>-1===e.indexOf(s)?t.push(s):n.push(s))),n.forEach((e=>e())),S=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function P(e,t){-1===e.$$.dirty[0]&&(x.push(e),I||(I=!0,w.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function N(o,i,c,l,h,u,p,f=[-1]){const m=a;v(o);const g=o.$$={fragment:null,ctx:[],props:u,update:e,not_equal:h,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:i.target||m.$$.root};p&&p(g.root);let b=!1;if(g.ctx=c?c(o,i.props||{},((e,t,...n)=>{const s=n.length?n[0]:t;return g.ctx&&h(g.ctx[e],g.ctx[e]=s)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](s),b&&P(o,e)),t})):[],g.update(),b=!0,s(g.before_update),g.fragment=!!l&&l(g.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);g.fragment&&g.fragment.l(e),e.forEach(d)}else g.fragment&&g.fragment.c();i.intro&&L(o.$$.fragment),function(e,n,o,i){const{fragment:a,after_update:c}=e.$$;a&&a.m(n,o),i||_((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):s(n),e.$$.on_mount=[]})),c.forEach(_)}(o,i.target,i.anchor,i.customElement),M()}v(m)}class j{$destroy(){C(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const e=s.indexOf(n);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class A{constructor(e,t){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!1},{id:2,name:"apple",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:3,name:"banana",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:4,name:"peach",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:5,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0},{id:6,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=t,this.filterShapes(this.currentType)}createShape(){const e={id:Math.max(...this.shapes.map((e=>e.id)))+1,name:"new default",image:"shapes/down-arrow.png",type:this.currentType,hover:!1,deletable:!0};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){console.log("import shape")}duplicateShape(e){const t=this.shapes.find((t=>t.id===e));if(t){const{name:n}=t,s=n.match(/^(.*?)(\s(\d+))?$/);if(s){const n=s[1],r=[];for(const e of this.shapes)if(0===e.name.indexOf(n)){const t=e.name.match(/^.*\s(\d+)$/);t&&r.push(Number(t[1]))}let o=-1;for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].id===e){o=t;break}let i=o;if(r.length>=1){let e=Math.max(...r);for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].name===`${n} ${e}`){i=t;break}}const a=`${n} ${r.length?Math.max(...r)+1:1}`,c=Object.assign(Object.assign({},t),{name:a,hover:!1,deletable:!0}),l=Math.max(...this.shapes.map((e=>e.id)))+1;c.id=l,this.shapes.splice(i+1,0,c),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}deleteShape(e){let t=-1;for(let n=0;n<this.shapes.length;n++)if(this.shapes[n].id===e){t=n;break}-1!==t&&(this.shapes.splice(t,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let e=0;e<this.shapes.length;e++){const t=this.shapes[e];t.type===this.currentType&&-1!==t.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())&&this.filteredShapes.push(t)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,this.config.onUpdateSelectedItemId(this.selectedItemId)}}const z=[];function H(t,n=e){let s;const r=new Set;function i(e){if(o(t,e)&&(t=e,s)){const e=!z.length;for(const e of r)e[1](),z.push(e,t);if(e){for(let e=0;e<z.length;e+=2)z[e][0](z[e+1]);z.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,a=e){const c=[o,a];return r.add(c),1===r.size&&(s=n(i)||e),o(t),()=>{r.delete(c),0===r.size&&s&&(s(),s=null)}}}}function B(e,t,n){const s=e.slice();return s[21]=t[n],s[22]=t,s[23]=n,s}function D(e,t){let n,r,o,i,a,v,y,x,$,S,k,w,I,_,T,E,M,U,F,L,O=t[21].name+"";function C(...e){return t[8](t[21],...e)}function P(...e){return t[9](t[21],...e)}function N(...e){return t[10](t[21],...e)}function j(...e){return t[11](t[21],...e)}function A(){return t[12](t[21],t[22],t[23])}function z(){return t[13](t[21],t[22],t[23])}function H(){return t[14](t[21],t[22],t[23])}function B(){return t[15](t[21],t[22],t[23])}function D(){return t[16](t[21])}return{key:e,first:null,c(){n=u("button"),r=u("div"),o=u("button"),i=f(),a=u("button"),x=f(),$=u("div"),S=u("div"),k=u("img"),I=f(),_=u("div"),T=p(O),M=f(),g(o,"aria-label","Duplicate shape"),g(o,"class","duplicate-icon svelte-1x29cnr"),b(o,"display",t[21].hover?"block":"none"),b(o,"background-image","url('icons/duplicate-icon.png')"),g(a,"aria-label","Delete shape"),g(a,"class",v="delete-icon "+(t[21].deletable?"":"button-disabled")+" svelte-1x29cnr"),b(a,"display",t[21].hover?"block":"none"),b(a,"background-image","url('icons/delete-icon.png')"),a.disabled=y=!t[21].deletable,g(r,"class","shape-selector-item-buttons svelte-1x29cnr"),g(k,"class","shape-selector-item-image svelte-1x29cnr"),c(k.src,w=t[21].image)||g(k,"src",w),g(k,"alt",""),g(S,"class","shape-selector-item-image-div svelte-1x29cnr"),g(_,"class",E="shape-selector-item-name "+(t[21].id===t[4]?"font-selected":"")+" svelte-1x29cnr"),g($,"class","shape-selector-details svelte-1x29cnr"),g(n,"class",U="shape-selector-item "+(t[21].id===t[4]?"selected":"")+" svelte-1x29cnr"),this.first=n},m(e,t){h(e,n,t),l(n,r),l(r,o),l(r,i),l(r,a),l(n,x),l(n,$),l($,S),l(S,k),l($,I),l($,_),l(_,T),l(n,M),F||(L=[m(o,"click",C),m(o,"keydown",P),m(a,"click",N),m(a,"keydown",j),m(n,"mouseenter",A),m(n,"mouseleave",z),m(n,"focus",H),m(n,"blur",B),m(n,"click",D)],F=!0)},p(e,s){t=e,8&s&&b(o,"display",t[21].hover?"block":"none"),8&s&&v!==(v="delete-icon "+(t[21].deletable?"":"button-disabled")+" svelte-1x29cnr")&&g(a,"class",v),8&s&&b(a,"display",t[21].hover?"block":"none"),8&s&&y!==(y=!t[21].deletable)&&(a.disabled=y),8&s&&!c(k.src,w=t[21].image)&&g(k,"src",w),8&s&&O!==(O=t[21].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(T,O),24&s&&E!==(E="shape-selector-item-name "+(t[21].id===t[4]?"font-selected":"")+" svelte-1x29cnr")&&g(_,"class",E),24&s&&U!==(U="shape-selector-item "+(t[21].id===t[4]?"selected":"")+" svelte-1x29cnr")&&g(n,"class",U)},d(e){e&&d(n),F=!1,s(L)}}}function q(t){let n,o,i,a,v,y,x,$,S,k,w,I,_,T,E,M,U,F,C,P,N,j,A,z,H,q,G,J,K,Q,R,V,W,X,Y=[],Z=new Map,ee=t[3];const te=e=>e[21].id;for(let e=0;e<ee.length;e+=1){let n=B(t,ee,e),s=te(n);Z.set(s,Y[e]=D(s,n))}return{c(){n=u("div"),o=u("div"),i=u("div"),i.innerHTML='<img src="icons/header-logo.png" alt="header logo" class="svelte-1x29cnr"/> \n      <h2 class="svelte-1x29cnr">Shape Editor</h2>',a=f(),v=u("div"),y=u("div"),x=u("h3"),x.textContent="Selection Mode",$=f(),S=u("div"),k=u("div"),w=u("button"),I=u("img"),T=p("Turtle"),M=f(),U=u("button"),F=u("img"),P=p("Link"),j=f(),A=u("div"),z=u("button"),z.innerHTML='<img class="button-image-right svelte-1x29cnr" src="icons/create-new-icon.png" alt="create new"/>Create New',H=f(),q=u("button"),q.innerHTML='<img class="button-image-right svelte-1x29cnr" src="icons/import-icon.png" alt="import"/>Import From...',G=f(),J=u("div"),K=u("input"),Q=f(),R=u("div"),V=u("div");for(let e=0;e<Y.length;e+=1)Y[e].c();g(i,"class","shape-selector-header svelte-1x29cnr"),g(x,"class","svelte-1x29cnr"),g(I,"class","button-image-left svelte-1x29cnr"),c(I.src,_="icons/turtle-icon.png")||g(I,"src","icons/turtle-icon.png"),g(I,"alt","turtle button"),g(w,"class",E="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-1x29cnr"),g(F,"class","button-image-left svelte-1x29cnr"),c(F.src,C="icons/link-icon.png")||g(F,"src","icons/link-icon.png"),g(F,"alt","link button"),g(U,"class",N="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-1x29cnr"),g(k,"class","mode-selector-buttons svelte-1x29cnr"),g(z,"class","create-new-button svelte-1x29cnr"),g(q,"class","import-shapes-button svelte-1x29cnr"),g(A,"class","shape-selector-buttons svelte-1x29cnr"),g(S,"class","selector-buttons svelte-1x29cnr"),g(y,"class","mode-selector svelte-1x29cnr"),K.value=t[1],g(K,"placeholder","Search"),b(K,"background-image","url('icons/search-icon.png')"),g(K,"class","svelte-1x29cnr"),g(J,"class","shape-selector-search svelte-1x29cnr"),g(V,"class","shape-selector-grid-inner svelte-1x29cnr"),g(R,"class","shape-selector-grid svelte-1x29cnr"),g(v,"class","inner-container svelte-1x29cnr"),g(o,"class","shape-selector svelte-1x29cnr"),g(n,"class","shape-selector-dialog svelte-1x29cnr")},m(e,s){h(e,n,s),l(n,o),l(o,i),l(o,a),l(o,v),l(v,y),l(y,x),l(y,$),l(y,S),l(S,k),l(k,w),l(w,I),l(w,T),l(k,M),l(k,U),l(U,F),l(U,P),l(S,j),l(S,A),l(A,z),l(A,H),l(A,q),l(v,G),l(v,J),l(J,K),l(v,Q),l(v,R),l(R,V);for(let e=0;e<Y.length;e+=1)Y[e]&&Y[e].m(V,null);W||(X=[m(w,"click",t[5]),m(U,"click",t[6]),m(z,"click",(function(){r(t[0].createShape())&&t[0].createShape().apply(this,arguments)})),m(q,"click",(function(){r(t[0].importShapes)&&t[0].importShapes.apply(this,arguments)})),m(K,"input",t[7])],W=!0)},p(e,[n]){t=e,4&n&&E!==(E="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-1x29cnr")&&g(w,"class",E),4&n&&N!==(N="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-1x29cnr")&&g(U,"class",N),2&n&&K.value!==t[1]&&(K.value=t[1]),25&n&&(ee=t[3],Y=function(e,t,n,r,o,i,a,c,l,h,d,u){let p=e.length,f=i.length,m=p;const g={};for(;m--;)g[e[m].key]=m;const b=[],v=new Map,y=new Map,x=[];for(m=f;m--;){const e=u(o,i,m),s=n(e);let c=a.get(s);c?r&&x.push((()=>c.p(e,t))):(c=h(s,e),c.c()),v.set(s,b[m]=c),s in g&&y.set(s,Math.abs(m-g[s]))}const $=new Set,S=new Set;function k(e){L(e,1),e.m(c,d),a.set(e.key,e),d=e.first,f--}for(;p&&f;){const t=b[f-1],n=e[p-1],s=t.key,r=n.key;t===n?(d=t.first,p--,f--):v.has(r)?!a.has(s)||$.has(s)?k(t):S.has(r)?p--:y.get(s)>y.get(r)?(S.add(s),k(t)):($.add(r),p--):(l(n,a),p--)}for(;p--;){const t=e[p];v.has(t.key)||l(t,a)}for(;f;)k(b[f-1]);return s(x),b}(Y,n,te,1,t,ee,Z,V,O,D,null,B))},i:e,o:e,d(e){e&&d(n);for(let e=0;e<Y.length;e+=1)Y[e].d();W=!1,s(X)}}}function G(e,t,n){let s,r,o,i=[],a=null;const c=H([]),l=H([]),h=H(null);y((()=>{const e={onUpdateShapes:e=>{c.set(e)},onUpdateFilteredShapes:e=>{l.set(e)},onUpdateSelectedItemId:e=>{h.set(e)}};n(0,s=new A(document.getElementById("Container"),e))})),c.subscribe((e=>{})),l.subscribe((e=>{n(3,i=e)})),h.subscribe((e=>{n(4,a=e)}));return e.$$.update=()=>{1&e.$$.dirty&&s&&(n(1,r=s.searchTerm),n(2,o=s.currentType),n(3,i=s.filteredShapes),s.shapes,n(4,a=s.selectedItemId))},[s,r,o,i,a,()=>{n(2,o="turtle"),s.filterShapes("turtle")},()=>{n(2,o="link"),s.filterShapes("link")},e=>s.handleSearch(e.target.value),(e,t)=>{t.stopPropagation(),s.duplicateShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),s.duplicateShape(e.id))},(e,t)=>{t.stopPropagation(),s.deleteShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),s.deleteShape(e.id))},(e,t,s)=>n(3,t[s].hover=!0,i),(e,t,s)=>n(3,t[s].hover=!1,i),(e,t,s)=>n(3,t[s].hover=!0,i),(e,t,s)=>n(3,t[s].hover=!1,i),e=>s.setSelectedItemId(e.id)]}return new class extends j{constructor(e){super(),N(this,e,G,q,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
