var app=function(){"use strict";function e(){}function t(e){return e()}function s(){return Object.create(null)}function n(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l,a;function r(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function c(e,t){e.appendChild(t)}function d(e,t,s){e.insertBefore(t,s||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function y(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function m(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function g(e,t,s,n){null===s?e.style.removeProperty(t):e.style.setProperty(t,s,n?"important":"")}function b(e){a=e}function v(e){(function(){if(!a)throw new Error("Function called outside component initialization");return a})().$$.on_mount.push(e)}const w=[],S=[];let $=[];const k=[],j=Promise.resolve();let I=!1;function x(e){$.push(e)}const _=new Set;let T=0;function M(){if(0!==T)return;const e=a;do{try{for(;T<w.length;){const e=w[T];T++,b(e),E(e.$$)}}catch(e){throw w.length=0,T=0,e}for(b(null),w.length=0,T=0;S.length;)S.pop()();for(let e=0;e<$.length;e+=1){const t=$[e];_.has(t)||(_.add(t),t())}$.length=0}while(w.length);for(;k.length;)k.pop()();I=!1,_.clear(),b(e)}function E(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}const U=new Set;function O(e,t){e&&e.i&&(U.delete(e),e.i(t))}function L(e,t){e.d(1),t.delete(e.key)}function B(e,t){const s=e.$$;null!==s.fragment&&(!function(e){const t=[],s=[];$.forEach((n=>-1===e.indexOf(n)?t.push(n):s.push(n))),s.forEach((e=>e())),$=t}(s.after_update),n(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function D(e,t){-1===e.$$.dirty[0]&&(w.push(e),I||(I=!0,j.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(i,l,r,c,d,p,u,f=[-1]){const y=a;b(i);const m=i.$$={fragment:null,ctx:[],props:p,update:e,not_equal:d,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(y?y.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:l.target||y.$$.root};u&&u(m.root);let g=!1;if(m.ctx=r?r(i,l.props||{},((e,t,...s)=>{const n=s.length?s[0]:t;return m.ctx&&d(m.ctx[e],m.ctx[e]=n)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](n),g&&D(i,e)),t})):[],m.update(),g=!0,n(m.before_update),m.fragment=!!c&&c(m.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);m.fragment&&m.fragment.l(e),e.forEach(h)}else m.fragment&&m.fragment.c();l.intro&&O(i.$$.fragment),function(e,s,i,l){const{fragment:a,after_update:r}=e.$$;a&&a.m(s,i),l||x((()=>{const s=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...s):n(s),e.$$.on_mount=[]})),r.forEach(x)}(i,l.target,l.anchor,l.customElement),M()}b(y)}class C{$destroy(){B(this,1),this.$destroy=e}$on(t,s){if(!o(s))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(s),()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class P{constructor(e,t){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!1},{id:2,name:"apple",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:3,name:"banana",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:4,name:"peach",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:5,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0},{id:6,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=t,this.filterShapes(this.currentType),this.dialogOpen=!0,this.importButtonSelected=!1}toggleDialog(){this.dialogOpen=!this.dialogOpen,this.config.onUpdateDialogOpen(this.dialogOpen)}createShape(){const e={id:Math.max(...this.shapes.map((e=>e.id)))+1,name:"new default",image:"shapes/down-arrow.png",type:this.currentType,hover:!1,deletable:!0};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){this.importButtonSelected=!this.importButtonSelected,this.config.onUpdateImportButtonSelected(this.importButtonSelected)}duplicateShape(e){const t=this.shapes.find((t=>t.id===e));if(t){const{name:s}=t,n=s.match(/^(.*?)(\s(\d+))?$/);if(n){const s=n[1],o=[];for(const e of this.shapes)if(0===e.name.indexOf(s)){const t=e.name.match(/^.*\s(\d+)$/);t&&o.push(Number(t[1]))}let i=-1;for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].id===e){i=t;break}let l=i;if(o.length>=1){let e=Math.max(...o);for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].name===`${s} ${e}`){l=t;break}}const a=`${s} ${o.length?Math.max(...o)+1:1}`,r=Object.assign(Object.assign({},t),{name:a,hover:!1,deletable:!0}),c=Math.max(...this.shapes.map((e=>e.id)))+1;r.id=c,this.shapes.splice(l+1,0,r),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}deleteShape(e){let t=-1;for(let s=0;s<this.shapes.length;s++)if(this.shapes[s].id===e){t=s;break}-1!==t&&(this.shapes.splice(t,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let e=0;e<this.shapes.length;e++){const t=this.shapes[e];t.type===this.currentType&&-1!==t.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())&&this.filteredShapes.push(t)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,console.log(this.shapes.find((e=>e.id===this.selectedItemId))),this.config.onUpdateSelectedItemId(this.selectedItemId)}}const N=[];function H(t,s=e){let n;const o=new Set;function l(e){if(i(t,e)&&(t=e,n)){const e=!N.length;for(const e of o)e[1](),N.push(e,t);if(e){for(let e=0;e<N.length;e+=2)N[e][0](N[e+1]);N.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(i,a=e){const r=[i,a];return o.add(r),1===o.size&&(n=s(l)||e),i(t),()=>{o.delete(r),0===o.size&&n&&(n(),n=null)}}}}function A(e,t,s){const n=e.slice();return n[26]=t[s],n[27]=t,n[28]=s,n}function z(e){let t,s,i,l,a,r;return{c(){t=p("div"),s=p("button"),s.innerHTML='<img class="button-image-left svelte-1yyfdjw" src="icons/library-icon.png" alt="library"/>Library',i=f(),l=p("button"),l.innerHTML='<img class="button-image-left svelte-1yyfdjw" src="icons/model-icon.png" alt="model"/>Model',m(s,"class","dropdown-button library-button svelte-1yyfdjw"),m(l,"class","dropdown-button model-button svelte-1yyfdjw"),m(t,"class","dropdown-content svelte-1yyfdjw")},m(n,h){d(n,t,h),c(t,s),c(t,i),c(t,l),a||(r=[y(s,"click",console.log("todo")),y(l,"click",(function(){o(e[0].openModelDialog())&&e[0].openModelDialog().apply(this,arguments)}))],a=!0)},p(t,s){e=t},d(e){e&&h(t),a=!1,n(r)}}}function q(e,t){let s,o,i,l,a,b,v,w,S,$,k,j,I,x,_,T,M,E,U,O,L=t[26].name+"";function B(...e){return t[11](t[26],...e)}function D(...e){return t[12](t[26],...e)}function F(...e){return t[13](t[26],...e)}function C(...e){return t[14](t[26],...e)}function P(){return t[15](t[26],t[27],t[28])}function N(){return t[16](t[26],t[27],t[28])}function H(){return t[17](t[26],t[27],t[28])}function A(){return t[18](t[26],t[27],t[28])}function z(){return t[19](t[26])}return{key:e,first:null,c(){s=p("button"),o=p("div"),i=p("button"),l=f(),a=p("button"),w=f(),S=p("div"),$=p("div"),k=p("img"),I=f(),x=p("div"),_=u(L),M=f(),m(i,"aria-label","Duplicate shape"),m(i,"class","duplicate-icon svelte-1yyfdjw"),g(i,"display",t[26].hover?"block":"none"),g(i,"background-image","url('icons/duplicate-icon.png')"),m(a,"aria-label","Delete shape"),m(a,"class",b="delete-icon "+(t[26].deletable?"":"button-disabled")+" svelte-1yyfdjw"),g(a,"display",t[26].hover?"block":"none"),g(a,"background-image","url('icons/delete-icon.png')"),a.disabled=v=!t[26].deletable,m(o,"class","shape-selector-item-buttons svelte-1yyfdjw"),m(k,"class","shape-selector-item-image svelte-1yyfdjw"),r(k.src,j=t[26].image)||m(k,"src",j),m(k,"alt",""),m($,"class","shape-selector-item-image-div svelte-1yyfdjw"),m(x,"class",T="shape-selector-item-name "+(t[26].id===t[4]?"font-selected":"")+" svelte-1yyfdjw"),m(S,"class","shape-selector-details svelte-1yyfdjw"),m(s,"class",E="shape-selector-item "+(t[26].id===t[4]?"selected":"")+" svelte-1yyfdjw"),this.first=s},m(e,t){d(e,s,t),c(s,o),c(o,i),c(o,l),c(o,a),c(s,w),c(s,S),c(S,$),c($,k),c(S,I),c(S,x),c(x,_),c(s,M),U||(O=[y(i,"click",B),y(i,"keydown",D),y(a,"click",F),y(a,"keydown",C),y(s,"mouseenter",P),y(s,"mouseleave",N),y(s,"focus",H),y(s,"blur",A),y(s,"click",z)],U=!0)},p(e,n){t=e,8&n&&g(i,"display",t[26].hover?"block":"none"),8&n&&b!==(b="delete-icon "+(t[26].deletable?"":"button-disabled")+" svelte-1yyfdjw")&&m(a,"class",b),8&n&&g(a,"display",t[26].hover?"block":"none"),8&n&&v!==(v=!t[26].deletable)&&(a.disabled=v),8&n&&!r(k.src,j=t[26].image)&&m(k,"src",j),8&n&&L!==(L=t[26].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(_,L),24&n&&T!==(T="shape-selector-item-name "+(t[26].id===t[4]?"font-selected":"")+" svelte-1yyfdjw")&&m(x,"class",T),24&n&&E!==(E="shape-selector-item "+(t[26].id===t[4]?"selected":"")+" svelte-1yyfdjw")&&m(s,"class",E)},d(e){e&&h(s),U=!1,n(O)}}}function X(t){let s,i,l,a,b,v,w,S,$,k,j,I,x,_,T,M,E,U,B,D,F,C,P,N,H,X,G,J,K,Q,R,V,W,Y,Z,ee,te,se,ne,oe,ie,le,ae,re=[],ce=new Map,de=t[6]&&z(t),he=t[3];const pe=e=>e[26].id;for(let e=0;e<he.length;e+=1){let s=A(t,he,e),n=pe(s);ce.set(n,re[e]=q(n,s))}return{c(){s=p("div"),i=p("div"),l=p("div"),a=p("div"),a.innerHTML='<img src="icons/header-logo.png" alt="header logo" class="svelte-1yyfdjw"/> \n        <h2 class="svelte-1yyfdjw">Shape Editor</h2>',b=f(),v=p("button"),v.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-1yyfdjw"/>',w=f(),S=p("div"),$=p("div"),k=p("h3"),k.textContent="Selection Mode",j=f(),I=p("div"),x=p("div"),_=p("button"),T=p("img"),E=u("Turtle"),B=f(),D=p("button"),F=p("img"),P=u("Link"),H=f(),X=p("div"),G=p("button"),G.innerHTML='<img class="button-image-right svelte-1yyfdjw" src="icons/create-new-icon.png" alt="create new"/>Create New',J=f(),K=p("div"),Q=p("button"),R=p("img"),W=u("Import From..."),Z=f(),de&&de.c(),ee=f(),te=p("div"),se=p("input"),ne=f(),oe=p("div"),ie=p("div");for(let e=0;e<re.length;e+=1)re[e].c();m(a,"class","shape-selector-header-logo svelte-1yyfdjw"),m(v,"class","close-button svelte-1yyfdjw"),m(l,"class","shape-selector-header svelte-1yyfdjw"),m(k,"class","svelte-1yyfdjw"),m(T,"class","button-image-left svelte-1yyfdjw"),r(T.src,M="icons/turtle-icon.png")||m(T,"src","icons/turtle-icon.png"),m(T,"alt","turtle button"),m(_,"class",U="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-1yyfdjw"),m(F,"class","button-image-left svelte-1yyfdjw"),r(F.src,C="icons/link-icon.png")||m(F,"src","icons/link-icon.png"),m(F,"alt","link button"),m(D,"class",N="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-1yyfdjw"),m(x,"class","mode-selector-buttons svelte-1yyfdjw"),m(G,"class","create-new-button svelte-1yyfdjw"),m(R,"class","button-image-right svelte-1yyfdjw"),r(R.src,V="icons/import-icon.png")||m(R,"src","icons/import-icon.png"),m(R,"alt","import"),m(Q,"class",Y="import-shapes-button "+(t[6]?"clicked":"")+" svelte-1yyfdjw"),m(K,"class","dropdown svelte-1yyfdjw"),m(X,"class","shape-selector-buttons svelte-1yyfdjw"),m(I,"class","selector-buttons svelte-1yyfdjw"),m($,"class","mode-selector svelte-1yyfdjw"),se.value=t[1],m(se,"placeholder","Search"),g(se,"background-image","url('icons/search-icon.png')"),m(se,"class","svelte-1yyfdjw"),m(te,"class","shape-selector-search svelte-1yyfdjw"),m(ie,"class","shape-selector-grid-inner svelte-1yyfdjw"),m(oe,"class","shape-selector-grid svelte-1yyfdjw"),m(S,"class","inner-container svelte-1yyfdjw"),m(i,"class","shape-selector svelte-1yyfdjw"),m(s,"class","shape-selector-dialog svelte-1yyfdjw"),g(s,"display",t[5]?"block":"none")},m(e,n){d(e,s,n),c(s,i),c(i,l),c(l,a),c(l,b),c(l,v),c(i,w),c(i,S),c(S,$),c($,k),c($,j),c($,I),c(I,x),c(x,_),c(_,T),c(_,E),c(x,B),c(x,D),c(D,F),c(D,P),c(I,H),c(I,X),c(X,G),c(X,J),c(X,K),c(K,Q),c(Q,R),c(Q,W),c(K,Z),de&&de.m(K,null),c(S,ee),c(S,te),c(te,se),c(S,ne),c(S,oe),c(oe,ie);for(let e=0;e<re.length;e+=1)re[e]&&re[e].m(ie,null);le||(ae=[y(v,"click",t[7]),y(_,"click",t[8]),y(D,"click",t[9]),y(G,"click",(function(){o(t[0].createShape())&&t[0].createShape().apply(this,arguments)})),y(Q,"click",(function(){o(t[0].importShapes())&&t[0].importShapes().apply(this,arguments)})),y(se,"input",t[10])],le=!0)},p(e,[o]){t=e,4&o&&U!==(U="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-1yyfdjw")&&m(_,"class",U),4&o&&N!==(N="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-1yyfdjw")&&m(D,"class",N),64&o&&Y!==(Y="import-shapes-button "+(t[6]?"clicked":"")+" svelte-1yyfdjw")&&m(Q,"class",Y),t[6]?de?de.p(t,o):(de=z(t),de.c(),de.m(K,null)):de&&(de.d(1),de=null),2&o&&se.value!==t[1]&&(se.value=t[1]),25&o&&(he=t[3],re=function(e,t,s,o,i,l,a,r,c,d,h,p){let u=e.length,f=l.length,y=u;const m={};for(;y--;)m[e[y].key]=y;const g=[],b=new Map,v=new Map,w=[];for(y=f;y--;){const e=p(i,l,y),n=s(e);let r=a.get(n);r?o&&w.push((()=>r.p(e,t))):(r=d(n,e),r.c()),b.set(n,g[y]=r),n in m&&v.set(n,Math.abs(y-m[n]))}const S=new Set,$=new Set;function k(e){O(e,1),e.m(r,h),a.set(e.key,e),h=e.first,f--}for(;u&&f;){const t=g[f-1],s=e[u-1],n=t.key,o=s.key;t===s?(h=t.first,u--,f--):b.has(o)?!a.has(n)||S.has(n)?k(t):$.has(o)?u--:v.get(n)>v.get(o)?($.add(n),k(t)):(S.add(o),u--):(c(s,a),u--)}for(;u--;){const t=e[u];b.has(t.key)||c(t,a)}for(;f;)k(g[f-1]);return n(w),g}(re,o,pe,1,t,he,ce,ie,L,q,null,A)),32&o&&g(s,"display",t[5]?"block":"none")},i:e,o:e,d(e){e&&h(s),de&&de.d();for(let e=0;e<re.length;e+=1)re[e].d();le=!1,n(ae)}}}function G(e,t,s){let n,o,i,l=[],a=null,r=!0,c=!1;const d=H([]),h=H([]),p=H(null),u=H(!0),f=H(!1);v((()=>{const e={onUpdateShapes:e=>{d.set(e)},onUpdateFilteredShapes:e=>{h.set(e)},onUpdateSelectedItemId:e=>{p.set(e)},onUpdateDialogOpen:e=>{u.set(e)},onUpdateImportButtonSelected:e=>{f.set(e)}};s(0,n=new P(document.getElementById("Container"),e))})),d.subscribe((e=>{})),h.subscribe((e=>{s(3,l=e)})),p.subscribe((e=>{s(4,a=e)})),u.subscribe((e=>{s(5,r=e)})),f.subscribe((e=>{s(6,c=e)}));return e.$$.update=()=>{1&e.$$.dirty&&n&&(s(1,o=n.searchTerm),s(2,i=n.currentType),s(3,l=n.filteredShapes),n.shapes,s(4,a=n.selectedItemId),s(5,r=n.dialogOpen),s(6,c=n.importButtonSelected))},[n,o,i,l,a,r,c,()=>n.toggleDialog(),()=>{s(2,i="turtle"),n.filterShapes("turtle")},()=>{s(2,i="link"),n.filterShapes("link")},e=>n.handleSearch(e.target.value),(e,t)=>{t.stopPropagation(),n.duplicateShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.duplicateShape(e.id))},(e,t)=>{t.stopPropagation(),n.deleteShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.deleteShape(e.id))},(e,t,n)=>s(3,t[n].hover=!0,l),(e,t,n)=>s(3,t[n].hover=!1,l),(e,t,n)=>s(3,t[n].hover=!0,l),(e,t,n)=>s(3,t[n].hover=!1,l),e=>n.setSelectedItemId(e.id)]}return new class extends C{constructor(e){super(),F(this,e,G,X,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
