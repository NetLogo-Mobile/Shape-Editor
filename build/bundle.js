var app=function(){"use strict";function e(){}function t(e){return e()}function s(){return Object.create(null)}function n(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,l;function r(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function c(e,t){e.appendChild(t)}function h(e,t,s){e.insertBefore(t,s||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function g(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function m(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function y(e,t,s,n){null===s?e.style.removeProperty(t):e.style.setProperty(t,s,n?"important":"")}function b(e){l=e}function k(e){(function(){if(!l)throw new Error("Function called outside component initialization");return l})().$$.on_mount.push(e)}const v=[],$=[];let S=[];const w=[],I=Promise.resolve();let x=!1;function _(e){S.push(e)}const T=new Set;let E=0;function M(){if(0!==E)return;const e=l;do{try{for(;E<v.length;){const e=v[E];E++,b(e),U(e.$$)}}catch(e){throw v.length=0,E=0,e}for(b(null),v.length=0,E=0;$.length;)$.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];T.has(t)||(T.add(t),t())}S.length=0}while(v.length);for(;w.length;)w.pop()();x=!1,T.clear(),b(e)}function U(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_)}}const O=new Set;function L(e,t){e&&e.i&&(O.delete(e),e.i(t))}function F(e,t){e.d(1),t.delete(e.key)}function C(e,t){const s=e.$$;null!==s.fragment&&(!function(e){const t=[],s=[];S.forEach((n=>-1===e.indexOf(n)?t.push(n):s.push(n))),s.forEach((e=>e())),S=t}(s.after_update),n(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function P(e,t){-1===e.$$.dirty[0]&&(v.push(e),x||(x=!0,I.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(o,a,r,c,h,p,u,f=[-1]){const g=l;b(o);const m=o.$$={fragment:null,ctx:[],props:p,update:e,not_equal:h,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(g?g.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:a.target||g.$$.root};u&&u(m.root);let y=!1;if(m.ctx=r?r(o,a.props||{},((e,t,...s)=>{const n=s.length?s[0]:t;return m.ctx&&h(m.ctx[e],m.ctx[e]=n)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](n),y&&P(o,e)),t})):[],m.update(),y=!0,n(m.before_update),m.fragment=!!c&&c(m.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);m.fragment&&m.fragment.l(e),e.forEach(d)}else m.fragment&&m.fragment.c();a.intro&&L(o.$$.fragment),function(e,s,o,a){const{fragment:l,after_update:r}=e.$$;l&&l.m(s,o),a||_((()=>{const s=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...s):n(s),e.$$.on_mount=[]})),r.forEach(_)}(o,a.target,a.anchor,a.customElement),M()}b(g)}class N{$destroy(){C(this,1),this.$destroy=e}$on(t,s){if(!i(s))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(s),()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class j{constructor(e,t){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!1},{id:2,name:"apple",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:3,name:"banana",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:4,name:"peach",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:5,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0},{id:6,name:"down-arrow",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!0}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=t,this.filterShapes(this.currentType),this.dialogOpen=!0}toggleDialog(){this.config.onUpdateDialogOpen(!this.dialogOpen)}createShape(){const e={id:Math.max(...this.shapes.map((e=>e.id)))+1,name:"new default",image:"shapes/down-arrow.png",type:this.currentType,hover:!1,deletable:!0};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){console.log("import shape")}duplicateShape(e){const t=this.shapes.find((t=>t.id===e));if(t){const{name:s}=t,n=s.match(/^(.*?)(\s(\d+))?$/);if(n){const s=n[1],i=[];for(const e of this.shapes)if(0===e.name.indexOf(s)){const t=e.name.match(/^.*\s(\d+)$/);t&&i.push(Number(t[1]))}let o=-1;for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].id===e){o=t;break}let a=o;if(i.length>=1){let e=Math.max(...i);for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].name===`${s} ${e}`){a=t;break}}const l=`${s} ${i.length?Math.max(...i)+1:1}`,r=Object.assign(Object.assign({},t),{name:l,hover:!1,deletable:!0}),c=Math.max(...this.shapes.map((e=>e.id)))+1;r.id=c,this.shapes.splice(a+1,0,r),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}deleteShape(e){let t=-1;for(let s=0;s<this.shapes.length;s++)if(this.shapes[s].id===e){t=s;break}-1!==t&&(this.shapes.splice(t,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let e=0;e<this.shapes.length;e++){const t=this.shapes[e];t.type===this.currentType&&-1!==t.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())&&this.filteredShapes.push(t)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,console.log(this.shapes.find((e=>e.id===this.selectedItemId))),this.config.onUpdateSelectedItemId(this.selectedItemId)}}const A=[];function H(t,s=e){let n;const i=new Set;function a(e){if(o(t,e)&&(t=e,n)){const e=!A.length;for(const e of i)e[1](),A.push(e,t);if(e){for(let e=0;e<A.length;e+=2)A[e][0](A[e+1]);A.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,l=e){const r=[o,l];return i.add(r),1===i.size&&(n=s(a)||e),o(t),()=>{i.delete(r),0===i.size&&n&&(n(),n=null)}}}}function z(e,t,s){const n=e.slice();return n[23]=t[s],n[24]=t,n[25]=s,n}function B(e,t){let s,i,o,a,l,b,k,v,$,S,w,I,x,_,T,E,M,U,O,L,F=t[23].name+"";function C(...e){return t[10](t[23],...e)}function P(...e){return t[11](t[23],...e)}function D(...e){return t[12](t[23],...e)}function N(...e){return t[13](t[23],...e)}function j(){return t[14](t[23],t[24],t[25])}function A(){return t[15](t[23],t[24],t[25])}function H(){return t[16](t[23],t[24],t[25])}function z(){return t[17](t[23],t[24],t[25])}function B(){return t[18](t[23])}return{key:e,first:null,c(){s=p("button"),i=p("div"),o=p("button"),a=f(),l=p("button"),v=f(),$=p("div"),S=p("div"),w=p("img"),x=f(),_=p("div"),T=u(F),M=f(),m(o,"aria-label","Duplicate shape"),m(o,"class","duplicate-icon svelte-19iykf5"),y(o,"display",t[23].hover?"block":"none"),y(o,"background-image","url('icons/duplicate-icon.png')"),m(l,"aria-label","Delete shape"),m(l,"class",b="delete-icon "+(t[23].deletable?"":"button-disabled")+" svelte-19iykf5"),y(l,"display",t[23].hover?"block":"none"),y(l,"background-image","url('icons/delete-icon.png')"),l.disabled=k=!t[23].deletable,m(i,"class","shape-selector-item-buttons svelte-19iykf5"),m(w,"class","shape-selector-item-image svelte-19iykf5"),r(w.src,I=t[23].image)||m(w,"src",I),m(w,"alt",""),m(S,"class","shape-selector-item-image-div svelte-19iykf5"),m(_,"class",E="shape-selector-item-name "+(t[23].id===t[4]?"font-selected":"")+" svelte-19iykf5"),m($,"class","shape-selector-details svelte-19iykf5"),m(s,"class",U="shape-selector-item "+(t[23].id===t[4]?"selected":"")+" svelte-19iykf5"),this.first=s},m(e,t){h(e,s,t),c(s,i),c(i,o),c(i,a),c(i,l),c(s,v),c(s,$),c($,S),c(S,w),c($,x),c($,_),c(_,T),c(s,M),O||(L=[g(o,"click",C),g(o,"keydown",P),g(l,"click",D),g(l,"keydown",N),g(s,"mouseenter",j),g(s,"mouseleave",A),g(s,"focus",H),g(s,"blur",z),g(s,"click",B)],O=!0)},p(e,n){t=e,8&n&&y(o,"display",t[23].hover?"block":"none"),8&n&&b!==(b="delete-icon "+(t[23].deletable?"":"button-disabled")+" svelte-19iykf5")&&m(l,"class",b),8&n&&y(l,"display",t[23].hover?"block":"none"),8&n&&k!==(k=!t[23].deletable)&&(l.disabled=k),8&n&&!r(w.src,I=t[23].image)&&m(w,"src",I),8&n&&F!==(F=t[23].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(T,F),24&n&&E!==(E="shape-selector-item-name "+(t[23].id===t[4]?"font-selected":"")+" svelte-19iykf5")&&m(_,"class",E),24&n&&U!==(U="shape-selector-item "+(t[23].id===t[4]?"selected":"")+" svelte-19iykf5")&&m(s,"class",U)},d(e){e&&d(s),O=!1,n(L)}}}function q(t){let s,o,a,l,b,k,v,$,S,w,I,x,_,T,E,M,U,O,C,P,D,N,j,A,H,q,X,G,J,K,Q,R,V,W,Y,Z,ee,te=[],se=new Map,ne=t[3];const ie=e=>e[23].id;for(let e=0;e<ne.length;e+=1){let s=z(t,ne,e),n=ie(s);se.set(n,te[e]=B(n,s))}return{c(){s=p("div"),o=p("div"),a=p("div"),l=p("div"),l.innerHTML='<img src="icons/header-logo.png" alt="header logo" class="svelte-19iykf5"/> \n        <h2 class="svelte-19iykf5">Shape Editor</h2>',b=f(),k=p("button"),k.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-19iykf5"/>',v=f(),$=p("div"),S=p("div"),w=p("h3"),w.textContent="Selection Mode",I=f(),x=p("div"),_=p("div"),T=p("button"),E=p("img"),U=u("Turtle"),C=f(),P=p("button"),D=p("img"),j=u("Link"),H=f(),q=p("div"),X=p("button"),X.innerHTML='<img class="button-image-right svelte-19iykf5" src="icons/create-new-icon.png" alt="create new"/>Create New',G=f(),J=p("button"),J.innerHTML='<img class="button-image-right svelte-19iykf5" src="icons/import-icon.png" alt="import"/>Import From...',K=f(),Q=p("div"),R=p("input"),V=f(),W=p("div"),Y=p("div");for(let e=0;e<te.length;e+=1)te[e].c();m(l,"class","shape-selector-header-logo svelte-19iykf5"),m(k,"class","close-button svelte-19iykf5"),m(a,"class","shape-selector-header svelte-19iykf5"),m(w,"class","svelte-19iykf5"),m(E,"class","button-image-left svelte-19iykf5"),r(E.src,M="icons/turtle-icon.png")||m(E,"src","icons/turtle-icon.png"),m(E,"alt","turtle button"),m(T,"class",O="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-19iykf5"),m(D,"class","button-image-left svelte-19iykf5"),r(D.src,N="icons/link-icon.png")||m(D,"src","icons/link-icon.png"),m(D,"alt","link button"),m(P,"class",A="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-19iykf5"),m(_,"class","mode-selector-buttons svelte-19iykf5"),m(X,"class","create-new-button svelte-19iykf5"),m(J,"class","import-shapes-button svelte-19iykf5"),m(q,"class","shape-selector-buttons svelte-19iykf5"),m(x,"class","selector-buttons svelte-19iykf5"),m(S,"class","mode-selector svelte-19iykf5"),R.value=t[1],m(R,"placeholder","Search"),y(R,"background-image","url('icons/search-icon.png')"),m(R,"class","svelte-19iykf5"),m(Q,"class","shape-selector-search svelte-19iykf5"),m(Y,"class","shape-selector-grid-inner svelte-19iykf5"),m(W,"class","shape-selector-grid svelte-19iykf5"),m($,"class","inner-container svelte-19iykf5"),m(o,"class","shape-selector svelte-19iykf5"),m(s,"class","shape-selector-dialog svelte-19iykf5"),y(s,"display",t[5]?"block":"none")},m(e,n){h(e,s,n),c(s,o),c(o,a),c(a,l),c(a,b),c(a,k),c(o,v),c(o,$),c($,S),c(S,w),c(S,I),c(S,x),c(x,_),c(_,T),c(T,E),c(T,U),c(_,C),c(_,P),c(P,D),c(P,j),c(x,H),c(x,q),c(q,X),c(q,G),c(q,J),c($,K),c($,Q),c(Q,R),c($,V),c($,W),c(W,Y);for(let e=0;e<te.length;e+=1)te[e]&&te[e].m(Y,null);Z||(ee=[g(k,"click",t[6]),g(T,"click",t[7]),g(P,"click",t[8]),g(X,"click",(function(){i(t[0].createShape())&&t[0].createShape().apply(this,arguments)})),g(J,"click",(function(){i(t[0].importShapes)&&t[0].importShapes.apply(this,arguments)})),g(R,"input",t[9])],Z=!0)},p(e,[i]){t=e,4&i&&O!==(O="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-19iykf5")&&m(T,"class",O),4&i&&A!==(A="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-19iykf5")&&m(P,"class",A),2&i&&R.value!==t[1]&&(R.value=t[1]),25&i&&(ne=t[3],te=function(e,t,s,i,o,a,l,r,c,h,d,p){let u=e.length,f=a.length,g=u;const m={};for(;g--;)m[e[g].key]=g;const y=[],b=new Map,k=new Map,v=[];for(g=f;g--;){const e=p(o,a,g),n=s(e);let r=l.get(n);r?i&&v.push((()=>r.p(e,t))):(r=h(n,e),r.c()),b.set(n,y[g]=r),n in m&&k.set(n,Math.abs(g-m[n]))}const $=new Set,S=new Set;function w(e){L(e,1),e.m(r,d),l.set(e.key,e),d=e.first,f--}for(;u&&f;){const t=y[f-1],s=e[u-1],n=t.key,i=s.key;t===s?(d=t.first,u--,f--):b.has(i)?!l.has(n)||$.has(n)?w(t):S.has(i)?u--:k.get(n)>k.get(i)?(S.add(n),w(t)):($.add(i),u--):(c(s,l),u--)}for(;u--;){const t=e[u];b.has(t.key)||c(t,l)}for(;f;)w(y[f-1]);return n(v),y}(te,i,ie,1,t,ne,se,Y,F,B,null,z)),32&i&&y(s,"display",t[5]?"block":"none")},i:e,o:e,d(e){e&&d(s);for(let e=0;e<te.length;e+=1)te[e].d();Z=!1,n(ee)}}}function X(e,t,s){let n,i,o,a=[],l=null,r=!0;const c=H([]),h=H([]),d=H(null);k((()=>{const e={onUpdateShapes:e=>{c.set(e)},onUpdateFilteredShapes:e=>{h.set(e)},onUpdateSelectedItemId:e=>{d.set(e)},onUpdateDialogOpen:e=>{s(5,r=e)}};s(0,n=new j(document.getElementById("Container"),e))})),c.subscribe((e=>{})),h.subscribe((e=>{s(3,a=e)})),d.subscribe((e=>{s(4,l=e)}));return e.$$.update=()=>{1&e.$$.dirty&&n&&(s(1,i=n.searchTerm),s(2,o=n.currentType),s(3,a=n.filteredShapes),n.shapes,s(4,l=n.selectedItemId))},[n,i,o,a,l,r,()=>n.toggleDialog(),()=>{s(2,o="turtle"),n.filterShapes("turtle")},()=>{s(2,o="link"),n.filterShapes("link")},e=>n.handleSearch(e.target.value),(e,t)=>{t.stopPropagation(),n.duplicateShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.duplicateShape(e.id))},(e,t)=>{t.stopPropagation(),n.deleteShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.deleteShape(e.id))},(e,t,n)=>s(3,t[n].hover=!0,a),(e,t,n)=>s(3,t[n].hover=!1,a),(e,t,n)=>s(3,t[n].hover=!0,a),(e,t,n)=>s(3,t[n].hover=!1,a),e=>n.setSelectedItemId(e.id)]}return new class extends N{constructor(e){super(),D(this,e,X,q,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
