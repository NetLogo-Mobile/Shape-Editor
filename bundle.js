var app=function(){"use strict";function e(){}function t(e){return e()}function s(){return Object.create(null)}function n(e){e.forEach(t)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i,r;function l(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function c(e,t){e.appendChild(t)}function h(e,t,s){e.insertBefore(t,s||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function f(){return p(" ")}function g(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function m(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function b(e,t,s,n){null===s?e.style.removeProperty(t):e.style.setProperty(t,s,n?"important":"")}function v(e){r=e}function y(e){(function(){if(!r)throw new Error("Function called outside component initialization");return r})().$$.on_mount.push(e)}const $=[],S=[];let k=[];const w=[],j=Promise.resolve();let q=!1;function x(e){k.push(e)}const I=new Set;let _=0;function T(){if(0!==_)return;const e=r;do{try{for(;_<$.length;){const e=$[_];_++,v(e),E(e.$$)}}catch(e){throw $.length=0,_=0,e}for(v(null),$.length=0,_=0;S.length;)S.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];I.has(t)||(I.add(t),t())}k.length=0}while($.length);for(;w.length;)w.pop()();q=!1,I.clear(),v(e)}function E(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(x)}}const M=new Set;function U(e,t){e&&e.i&&(M.delete(e),e.i(t))}function F(e,t){e.d(1),t.delete(e.key)}function L(e,t){const s=e.$$;null!==s.fragment&&(!function(e){const t=[],s=[];k.forEach((n=>-1===e.indexOf(n)?t.push(n):s.push(n))),s.forEach((e=>e())),k=t}(s.after_update),n(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function O(e,t){-1===e.$$.dirty[0]&&($.push(e),q||(q=!0,j.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function C(a,i,l,c,h,u,p,f=[-1]){const g=r;v(a);const m=a.$$={fragment:null,ctx:[],props:u,update:e,not_equal:h,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(g?g.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:i.target||g.$$.root};p&&p(m.root);let b=!1;if(m.ctx=l?l(a,i.props||{},((e,t,...s)=>{const n=s.length?s[0]:t;return m.ctx&&h(m.ctx[e],m.ctx[e]=n)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](n),b&&O(a,e)),t})):[],m.update(),b=!0,n(m.before_update),m.fragment=!!c&&c(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(d)}else m.fragment&&m.fragment.c();i.intro&&U(a.$$.fragment),function(e,s,a,i){const{fragment:r,after_update:l}=e.$$;r&&r.m(s,a),i||x((()=>{const s=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...s):n(s),e.$$.on_mount=[]})),l.forEach(x)}(a,i.target,i.anchor,i.customElement),T()}v(g)}class P{$destroy(){L(this,1),this.$destroy=e}$on(t,s){if(!o(s))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(s),()=>{const e=n.indexOf(s);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class N{constructor(e,t){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.parent=e,this.shapes=[{id:1,name:"default",image:"down-arrow.png",type:"turtle",hover:!1,deletable:!1},{id:2,name:"apple",image:"down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:3,name:"banana",image:"down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:4,name:"peach",image:"down-arrow.png",type:"turtle",hover:!1,deletable:!0},{id:5,name:"down-arrow",image:"down-arrow.png",type:"link",hover:!1,deletable:!0},{id:6,name:"down-arrow",image:"down-arrow.png",type:"link",hover:!1,deletable:!0}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=t,this.filterShapes(this.currentType)}createShape(){const e={id:Math.max(...this.shapes.map((e=>e.id)))+1,name:"new default",image:"down-arrow.png",type:"turtle",hover:!1,deletable:!0};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){console.log("import shape")}duplicateShape(e){const t=this.shapes.find((t=>t.id===e));if(t){const{name:s}=t,n=s.match(/^(.*?)(\s(\d+))?$/);if(n){const s=n[1],o=[];for(const e of this.shapes)if(0===e.name.indexOf(s)){const t=e.name.match(/^.*\s(\d+)$/);t&&o.push(Number(t[1]))}let a=-1;for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].id===e){a=t;break}let i=a;if(o.length>=1){let e=Math.max(...o);for(let t=0;t<this.shapes.length;t++)if(this.shapes[t].name===`${s} ${e}`){i=t;break}}const r=`${s} ${o.length?Math.max(...o)+1:1}`,l=Object.assign(Object.assign({},t),{name:r,hover:!1,deletable:!0}),c=Math.max(...this.shapes.map((e=>e.id)))+1;l.id=c,this.shapes.splice(i+1,0,l),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}deleteShape(e){let t=-1;for(let s=0;s<this.shapes.length;s++)if(this.shapes[s].id===e){t=s;break}-1!==t&&(this.shapes.splice(t,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let e=0;e<this.shapes.length;e++){const t=this.shapes[e];t.type===this.currentType&&-1!==t.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())&&this.filteredShapes.push(t)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,this.config.onUpdateSelectedItemId(this.selectedItemId)}}const A=[];function z(t,s=e){let n;const o=new Set;function i(e){if(a(t,e)&&(t=e,n)){const e=!A.length;for(const e of o)e[1](),A.push(e,t);if(e){for(let e=0;e<A.length;e+=2)A[e][0](A[e+1]);A.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,r=e){const l=[a,r];return o.add(l),1===o.size&&(n=s(i)||e),a(t),()=>{o.delete(l),0===o.size&&n&&(n(),n=null)}}}}function H(e,t,s){const n=e.slice();return n[21]=t[s],n[22]=t,n[23]=s,n}function B(e,t){let s,o,a,i,r,v,y,$,S,k,w,j,q,x,I,_,T,E,M,U,F=t[21].name+"";function L(...e){return t[8](t[21],...e)}function O(...e){return t[9](t[21],...e)}function C(...e){return t[10](t[21],...e)}function P(...e){return t[11](t[21],...e)}function N(){return t[12](t[21],t[22],t[23])}function A(){return t[13](t[21],t[22],t[23])}function z(){return t[14](t[21],t[22],t[23])}function H(){return t[15](t[21],t[22],t[23])}function B(){return t[16](t[21])}return{key:e,first:null,c(){s=u("button"),o=u("div"),a=u("button"),i=f(),r=u("button"),$=f(),S=u("div"),k=u("div"),w=u("img"),q=f(),x=u("div"),I=p(F),T=f(),m(a,"aria-label","Duplicate shape"),m(a,"class","duplicate-icon svelte-16tqjgc"),b(a,"display",t[21].hover?"block":"none"),m(r,"aria-label","Delete shape"),m(r,"class",v="delete-icon "+(t[21].deletable?"":"button-disabled")+" svelte-16tqjgc"),b(r,"display",t[21].hover?"block":"none"),r.disabled=y=!t[21].deletable,m(o,"class","shape-selector-item-buttons svelte-16tqjgc"),m(w,"class","shape-selector-item-image svelte-16tqjgc"),l(w.src,j=t[21].image)||m(w,"src",j),m(w,"alt",""),m(k,"class","shape-selector-item-image-div svelte-16tqjgc"),m(x,"class",_="shape-selector-item-name "+(t[21].id===t[4]?"font-selected":"")+" svelte-16tqjgc"),m(S,"class","shape-selector-details svelte-16tqjgc"),m(s,"class",E="shape-selector-item "+(t[21].id===t[4]?"selected":"")+" svelte-16tqjgc"),this.first=s},m(e,t){h(e,s,t),c(s,o),c(o,a),c(o,i),c(o,r),c(s,$),c(s,S),c(S,k),c(k,w),c(S,q),c(S,x),c(x,I),c(s,T),M||(U=[g(a,"click",L),g(a,"keydown",O),g(r,"click",C),g(r,"keydown",P),g(s,"mouseenter",N),g(s,"mouseleave",A),g(s,"focus",z),g(s,"blur",H),g(s,"click",B)],M=!0)},p(e,n){t=e,8&n&&b(a,"display",t[21].hover?"block":"none"),8&n&&v!==(v="delete-icon "+(t[21].deletable?"":"button-disabled")+" svelte-16tqjgc")&&m(r,"class",v),8&n&&b(r,"display",t[21].hover?"block":"none"),8&n&&y!==(y=!t[21].deletable)&&(r.disabled=y),8&n&&!l(w.src,j=t[21].image)&&m(w,"src",j),8&n&&F!==(F=t[21].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(I,F),24&n&&_!==(_="shape-selector-item-name "+(t[21].id===t[4]?"font-selected":"")+" svelte-16tqjgc")&&m(x,"class",_),24&n&&E!==(E="shape-selector-item "+(t[21].id===t[4]?"selected":"")+" svelte-16tqjgc")&&m(s,"class",E)},d(e){e&&d(s),M=!1,n(U)}}}function D(t){let s,a,i,r,b,v,y,$,S,k,w,j,q,x,I,_,T,E,M,L,O,C,P,N,A,z,D,G,J,K,Q,R,V,W,X=[],Y=new Map,Z=t[3];const ee=e=>e[21].id;for(let e=0;e<Z.length;e+=1){let s=H(t,Z,e),n=ee(s);Y.set(n,X[e]=B(n,s))}return{c(){s=u("div"),a=u("div"),i=u("div"),i.innerHTML='<img src="header-logo.png" alt="header logo" class="svelte-16tqjgc"/> \n      <h2 class="svelte-16tqjgc">Shape Editor</h2>',r=f(),b=u("div"),v=u("div"),y=u("h3"),y.textContent="Selection Mode",$=f(),S=u("div"),k=u("div"),w=u("button"),j=u("img"),x=p("Turtle"),_=f(),T=u("button"),E=u("img"),L=p("Link"),C=f(),P=u("div"),N=u("button"),N.innerHTML='<img class="button-image-right svelte-16tqjgc" src="create-new-icon.png" alt="create new"/>Create New',A=f(),z=u("button"),z.innerHTML='<img class="button-image-right svelte-16tqjgc" src="import-icon.png" alt="import"/>Import From...',D=f(),G=u("div"),J=u("input"),K=f(),Q=u("div"),R=u("div");for(let e=0;e<X.length;e+=1)X[e].c();m(i,"class","shape-selector-header svelte-16tqjgc"),m(y,"class","svelte-16tqjgc"),m(j,"class","button-image-left svelte-16tqjgc"),l(j.src,q="turtle-icon.png")||m(j,"src","turtle-icon.png"),m(j,"alt","turtle button"),m(w,"class",I="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-16tqjgc"),m(E,"class","button-image-left svelte-16tqjgc"),l(E.src,M="link-icon.png")||m(E,"src","link-icon.png"),m(E,"alt","link button"),m(T,"class",O="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-16tqjgc"),m(k,"class","mode-selector-buttons svelte-16tqjgc"),m(N,"class","create-new-button svelte-16tqjgc"),m(z,"class","import-shapes-button svelte-16tqjgc"),m(P,"class","shape-selector-buttons svelte-16tqjgc"),m(S,"class","selector-buttons svelte-16tqjgc"),m(v,"class","mode-selector svelte-16tqjgc"),J.value=t[1],m(J,"placeholder","Search"),m(J,"class","svelte-16tqjgc"),m(G,"class","shape-selector-search svelte-16tqjgc"),m(R,"class","shape-selector-grid-inner svelte-16tqjgc"),m(Q,"class","shape-selector-grid svelte-16tqjgc"),m(b,"class","inner-container svelte-16tqjgc"),m(a,"class","shape-selector svelte-16tqjgc"),m(s,"class","shape-selector-dialog svelte-16tqjgc")},m(e,n){h(e,s,n),c(s,a),c(a,i),c(a,r),c(a,b),c(b,v),c(v,y),c(v,$),c(v,S),c(S,k),c(k,w),c(w,j),c(w,x),c(k,_),c(k,T),c(T,E),c(T,L),c(S,C),c(S,P),c(P,N),c(P,A),c(P,z),c(b,D),c(b,G),c(G,J),c(b,K),c(b,Q),c(Q,R);for(let e=0;e<X.length;e+=1)X[e]&&X[e].m(R,null);V||(W=[g(w,"click",t[5]),g(T,"click",t[6]),g(N,"click",(function(){o(t[0].createShape())&&t[0].createShape().apply(this,arguments)})),g(z,"click",(function(){o(t[0].importShapes)&&t[0].importShapes.apply(this,arguments)})),g(J,"input",t[7])],V=!0)},p(e,[s]){t=e,4&s&&I!==(I="turtle-button "+("turtle"===t[2]?"selected-button":"unselected-button")+" svelte-16tqjgc")&&m(w,"class",I),4&s&&O!==(O="link-button "+("link"===t[2]?"selected-button":"unselected-button")+" svelte-16tqjgc")&&m(T,"class",O),2&s&&J.value!==t[1]&&(J.value=t[1]),25&s&&(Z=t[3],X=function(e,t,s,o,a,i,r,l,c,h,d,u){let p=e.length,f=i.length,g=p;const m={};for(;g--;)m[e[g].key]=g;const b=[],v=new Map,y=new Map,$=[];for(g=f;g--;){const e=u(a,i,g),n=s(e);let l=r.get(n);l?o&&$.push((()=>l.p(e,t))):(l=h(n,e),l.c()),v.set(n,b[g]=l),n in m&&y.set(n,Math.abs(g-m[n]))}const S=new Set,k=new Set;function w(e){U(e,1),e.m(l,d),r.set(e.key,e),d=e.first,f--}for(;p&&f;){const t=b[f-1],s=e[p-1],n=t.key,o=s.key;t===s?(d=t.first,p--,f--):v.has(o)?!r.has(n)||S.has(n)?w(t):k.has(o)?p--:y.get(n)>y.get(o)?(k.add(n),w(t)):(S.add(o),p--):(c(s,r),p--)}for(;p--;){const t=e[p];v.has(t.key)||c(t,r)}for(;f;)w(b[f-1]);return n($),b}(X,s,ee,1,t,Z,Y,R,F,B,null,H))},i:e,o:e,d(e){e&&d(s);for(let e=0;e<X.length;e+=1)X[e].d();V=!1,n(W)}}}function G(e,t,s){let n,o,a,i=[],r=null;const l=z([]),c=z([]),h=z(null);y((()=>{const e={onUpdateShapes:e=>{l.set(e)},onUpdateFilteredShapes:e=>{c.set(e)},onUpdateSelectedItemId:e=>{h.set(e)}};s(0,n=new N(document.getElementById("Container"),e))})),l.subscribe((e=>{})),c.subscribe((e=>{s(3,i=e)})),h.subscribe((e=>{s(4,r=e)}));return e.$$.update=()=>{1&e.$$.dirty&&n&&(s(1,o=n.searchTerm),s(2,a=n.currentType),s(3,i=n.filteredShapes),n.shapes,s(4,r=n.selectedItemId))},[n,o,a,i,r,()=>n.filterShapes("turtle"),()=>n.filterShapes("link"),e=>n.handleSearch(e.target.value),(e,t)=>{t.stopPropagation(),n.duplicateShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.duplicateShape(e.id))},(e,t)=>{t.stopPropagation(),n.deleteShape(e.id)},(e,t)=>{"Enter"===t.key&&(t.stopPropagation(),n.deleteShape(e.id))},(e,t,n)=>s(3,t[n].hover=!0,i),(e,t,n)=>s(3,t[n].hover=!1,i),(e,t,n)=>s(3,t[n].hover=!0,i),(e,t,n)=>s(3,t[n].hover=!1,i),e=>n.setSelectedItemId(e.id)]}return new class extends P{constructor(e){super(),C(this,e,G,D,a,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
