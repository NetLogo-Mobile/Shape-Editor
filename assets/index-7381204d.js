(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function x(){}const ks=t=>t;function Sl(t,e){for(const n in e)t[n]=e[n];return t}function vr(t){return t()}function Ks(){return Object.create(null)}function ye(t){t.forEach(vr)}function Ve(t){return typeof t=="function"}function Oe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Cn;function ft(t,e){return Cn||(Cn=document.createElement("a")),Cn.href=e,t===Cn.href}function wl(t){return Object.keys(t).length===0}function $t(t,e,n,r){if(t){const o=yr(t,e,n,r);return t[0](o)}}function yr(t,e,n,r){return t[1]&&r?Sl(n.ctx.slice(),t[1](r(e))):n.ctx}function xt(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const a=[],l=Math.max(e.dirty.length,o.length);for(let i=0;i<l;i+=1)a[i]=e.dirty[i]|o[i];return a}return e.dirty|o}return e.dirty}function en(t,e,n,r,o,a){if(o){const l=yr(e,n,r,a);t.p(l,o)}}function tn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function kl(t){return t&&Ve(t.destroy)?t.destroy:x}const Sr=typeof window<"u";let wr=Sr?()=>window.performance.now():()=>Date.now(),Ts=Sr?t=>requestAnimationFrame(t):x;const Ot=new Set;function kr(t){Ot.forEach(e=>{e.c(t)||(Ot.delete(e),e.f())}),Ot.size!==0&&Ts(kr)}function Tr(t){let e;return Ot.size===0&&Ts(kr),{promise:new Promise(n=>{Ot.add(e={c:t,f:n})}),abort(){Ot.delete(e)}}}function f(t,e){t.appendChild(e)}function Cr(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Tl(t){const e=y("style");return Cl(Cr(t),e),e.sheet}function Cl(t,e){return f(t.head||t,e),e.sheet}function J(t,e,n){t.insertBefore(e,n||null)}function H(t){t.parentNode&&t.parentNode.removeChild(t)}function zt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function T(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Fe(t){return document.createTextNode(t)}function B(){return Fe(" ")}function Cs(){return Fe("")}function z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ll(t){return Array.from(t.childNodes)}function Lr(t,e){e=""+e,t.data!==e&&(t.data=e)}function Il(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Zs(t,e){t.value=e??""}function oe(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Qs(t,e,n){t.classList[n?"add":"remove"](e)}function El(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}const On=new Map;let Nn=0;function Ol(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Nl(t,e){const n={stylesheet:Tl(e),rules:{}};return On.set(t,n),n}function ms(t,e,n,r,o,a,l,i=0){const u=16.666/r;let c=`{
`;for(let N=0;N<=1;N+=u){const k=e+(n-e)*a(N);c+=N*100+`%{${l(k,1-k)}}
`}const h=c+`100% {${l(n,1-n)}}
}`,d=`__svelte_${Ol(h)}_${i}`,m=Cr(t),{stylesheet:b,rules:g}=On.get(m)||Nl(m,t);g[d]||(g[d]=!0,b.insertRule(`@keyframes ${d} ${h}`,b.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${o}ms 1 both`,Nn+=1,d}function bs(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),Nn-=o,Nn||Ml())}function Ml(){Ts(()=>{Nn||(On.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&H(e)}),On.clear())})}let Kt;function Xt(t){Kt=t}function Bl(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function Ir(t){Bl().$$.on_mount.push(t)}const Ct=[],O=[];let Nt=[];const vs=[],Gl=Promise.resolve();let ys=!1;function Dl(){ys||(ys=!0,Gl.then(Er))}function Ze(t){Nt.push(t)}function D(t){vs.push(t)}const gs=new Set;let wt=0;function Er(){if(wt!==0)return;const t=Kt;do{try{for(;wt<Ct.length;){const e=Ct[wt];wt++,Xt(e),Rl(e.$$)}}catch(e){throw Ct.length=0,wt=0,e}for(Xt(null),Ct.length=0,wt=0;O.length;)O.pop()();for(let e=0;e<Nt.length;e+=1){const n=Nt[e];gs.has(n)||(gs.add(n),n())}Nt.length=0}while(Ct.length);for(;vs.length;)vs.pop()();ys=!1,gs.clear(),Xt(t)}function Rl(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ze)}}function Ul(t){const e=[],n=[];Nt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Nt=e}let Jt;function Or(){return Jt||(Jt=Promise.resolve(),Jt.then(()=>{Jt=null})),Jt}function Wt(t,e,n){t.dispatchEvent(El(`${e?"intro":"outro"}${n}`))}const En=new Set;let We;function lt(){We={r:0,c:[],p:We}}function ot(){We.r||ye(We.c),We=We.p}function U(t,e){t&&t.i&&(En.delete(t),t.i(e))}function Y(t,e,n,r){if(t&&t.o){if(En.has(t))return;En.add(t),We.c.push(()=>{En.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Nr={duration:0};function Fl(t,e,n){const r={direction:"in"};let o=e(t,n,r),a=!1,l,i,u=0;function c(){l&&bs(t,l)}function h(){const{delay:m=0,duration:b=300,easing:g=ks,tick:v=x,css:N}=o||Nr;N&&(l=ms(t,0,1,b,m,g,N,u++)),v(0,1);const k=wr()+m,j=k+b;i&&i.abort(),a=!0,Ze(()=>Wt(t,!0,"start")),i=Tr(G=>{if(a){if(G>=j)return v(1,0),Wt(t,!0,"end"),c(),a=!1;if(G>=k){const q=g((G-k)/b);v(q,1-q)}}return a})}let d=!1;return{start(){d||(d=!0,bs(t),Ve(o)?(o=o(r),Or().then(h)):h())},invalidate(){d=!1},end(){a&&(c(),a=!1)}}}function Mn(t,e,n,r){const o={direction:"both"};let a=e(t,n,o),l=r?0:1,i=null,u=null,c=null;function h(){c&&bs(t,c)}function d(b,g){const v=b.b-l;return g*=Math.abs(v),{a:l,b:b.b,d:v,duration:g,start:b.start,end:b.start+g,group:b.group}}function m(b){const{delay:g=0,duration:v=300,easing:N=ks,tick:k=x,css:j}=a||Nr,G={start:wr()+g,b};b||(G.group=We,We.r+=1),i||u?u=G:(j&&(h(),c=ms(t,l,b,v,g,N,j)),b&&k(0,1),i=d(G,v),Ze(()=>Wt(t,b,"start")),Tr(q=>{if(u&&q>u.start&&(i=d(u,v),u=null,Wt(t,i.b,"start"),j&&(h(),c=ms(t,l,i.b,i.duration,0,N,a.css))),i){if(q>=i.end)k(l=i.b,1-l),Wt(t,i.b,"end"),u||(i.b?h():--i.group.r||ye(i.group.c)),i=null;else if(q>=i.start){const P=q-i.start;l=i.a+i.d*N(P/i.duration),k(l,1-l)}}return!!(i||u)}))}return{run(b){Ve(a)?Or().then(()=>{a=a(o),m(b)}):m(b)},end(){h(),i=u=null}}}function Mr(t,e){t.d(1),e.delete(t.key)}function Br(t,e,n,r,o,a,l,i,u,c,h,d){let m=t.length,b=a.length,g=m;const v={};for(;g--;)v[t[g].key]=g;const N=[],k=new Map,j=new Map,G=[];for(g=b;g--;){const E=d(o,a,g),w=n(E);let L=l.get(w);L?r&&G.push(()=>L.p(E,e)):(L=c(w,E),L.c()),k.set(w,N[g]=L),w in v&&j.set(w,Math.abs(g-v[w]))}const q=new Set,P=new Set;function S(E){U(E,1),E.m(i,h),l.set(E.key,E),h=E.first,b--}for(;m&&b;){const E=N[b-1],w=t[m-1],L=E.key,K=w.key;E===w?(h=E.first,m--,b--):k.has(K)?!l.has(L)||q.has(L)?S(E):P.has(K)?m--:j.get(L)>j.get(K)?(P.add(L),S(E)):(q.add(K),m--):(u(w,l),m--)}for(;m--;){const E=t[m];k.has(E.key)||u(E,l)}for(;b;)S(N[b-1]);return ye(G),N}function R(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function ue(t){t&&t.c()}function ie(t,e,n,r){const{fragment:o,after_update:a}=t.$$;o&&o.m(e,n),r||Ze(()=>{const l=t.$$.on_mount.map(vr).filter(Ve);t.$$.on_destroy?t.$$.on_destroy.push(...l):ye(l),t.$$.on_mount=[]}),a.forEach(Ze)}function ae(t,e){const n=t.$$;n.fragment!==null&&(Ul(n.after_update),ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pl(t,e){t.$$.dirty[0]===-1&&(Ct.push(t),Dl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,r,o,a,l,i=[-1]){const u=Kt;Xt(t);const c=t.$$={fragment:null,ctx:[],props:a,update:x,not_equal:o,bound:Ks(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ks(),dirty:i,skip_bound:!1,root:e.target||u.$$.root};l&&l(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},(d,m,...b)=>{const g=b.length?b[0]:m;return c.ctx&&o(c.ctx[d],c.ctx[d]=g)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](g),h&&Pl(t,d)),m}):[],c.update(),h=!0,ye(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const d=Ll(e.target);c.fragment&&c.fragment.l(d),d.forEach(H)}else c.fragment&&c.fragment.c();e.intro&&U(t.$$.fragment),ie(t,e.target,e.anchor,e.customElement),Er()}Xt(u)}class qe{$destroy(){ae(this,1),this.$destroy=x}$on(e,n){if(!Ve(n))return x;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!wl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class ql{constructor(e,n){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.recentlyImportedShapeIds=[],this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!1,isDeleting:!1},{id:2,name:"default",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!1,isDeleting:!1}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=n,this.filterShapes(this.currentType),this.dialogOpen=!0,this.importButtonSelected=!1,this.libraryOpen=!1}toggleDialog(){this.dialogOpen=!this.dialogOpen,this.config.onUpdateDialogOpen(this.dialogOpen)}openLibrary(){this.libraryOpen=!0,this.importButtonSelected=!1,this.config.onUpdateLibraryOpen(this.libraryOpen),this.config.onUpdateImportButtonSelected(this.importButtonSelected)}closeLibrary(){console.log("close library"),this.libraryOpen=!1,this.config.onUpdateLibraryOpen(this.libraryOpen)}createShape(){this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds);const e={id:Math.max(...this.shapes.map(n=>n.id))+1,name:"new default",image:"shapes/down-arrow.png",type:this.currentType,hover:!1,deletable:!0,isDeleting:!1};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}createSVGShape(e,n){const r="data:image/svg+xml;base64,"+btoa(`<svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">${n}</svg>`);this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds);const o={id:Math.max(...this.shapes.map(a=>a.id))+1,name:e,image:r,type:this.currentType,hover:!1,deletable:!0,isDeleting:!1};this.shapes.unshift(o),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){this.importButtonSelected=!this.importButtonSelected,this.config.onUpdateImportButtonSelected(this.importButtonSelected)}duplicateShape(e){const n=this.shapes.find(r=>r.id===e);if(n){const{name:r}=n,o=r.match(/^(.*?)(\s(\d+))?$/);if(o){const a=o[1],l=[];for(const b of this.shapes)if(b.name.indexOf(a)===0){const g=b.name.match(/^.*\s(\d+)$/);g&&l.push(Number(g[1]))}let i=-1;for(let b=0;b<this.shapes.length;b++)if(this.shapes[b].id===e){i=b;break}let u=i;if(l.length>=1){const b=Math.max(...l);for(let g=0;g<this.shapes.length;g++)if(this.shapes[g].name===`${a} ${b}`){u=g;break}}const c=l.length?Math.max(...l)+1:1,h=`${a} ${c}`,d={...n,name:h,hover:!1,deletable:!0},m=Math.max(...this.shapes.map(b=>b.id))+1;d.id=m,this.shapes.splice(u+1,0,d),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}addNewShapes(e){this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds),e.forEach(n=>{n.id=Math.max(...this.shapes.map(r=>r.id))+1,n.type=this.currentType,n.hover=!1,n.deletable=!0,n.name==="default"&&(n.deletable=!1),this.shapes.push(n),this.recentlyImportedShapeIds.push(n.id)}),this.shapes.sort((n,r)=>n.name==="default"?-1:r.name==="default"?1:n.name.localeCompare(r.name)),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds)}deleteShape(e){console.log("delete shape");let n=-1,r=-1;for(let o=0;o<this.shapes.length;o++)this.shapes[o].id===e&&(n=o);for(let o=0;o<this.filteredShapes.length;o++)this.filteredShapes[o].id===e&&(r=o);n!==-1&&r!==-1&&(this.shapes[n].isDeleting=!0,this.filteredShapes[r].isDeleting=!0,this.shapes=[...this.shapes],this.filteredShapes=[...this.filteredShapes],this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes),setTimeout(()=>{this.shapes.splice(n,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)},500))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let n=0;n<this.shapes.length;n++){const r=this.shapes[n];r.type===this.currentType&&r.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())!==-1&&this.filteredShapes.push(r)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,console.log(this.shapes.find(n=>n.id===this.selectedItemId)),this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds),this.config.onUpdateSelectedItemId(this.selectedItemId)}}class Al{constructor(e,n){this.shapes=[],this.filteredShapes=[],this.selectedItemIds=[],this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:2,name:"ghost",image:"shapes/ghost.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:3,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:4,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:5,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:6,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:7,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:8,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:9,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:10,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=n,this.filterShapes(this.currentType),this.dialogOpen=!0}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let n=0;n<this.shapes.length;n++){const r=this.shapes[n];r.type===this.currentType&&r.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())!==-1&&this.filteredShapes.push(r)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){const n=this.selectedItemIds.indexOf(e);n>-1?this.selectedItemIds.splice(n,1):this.selectedItemIds.push(e),console.log(this.selectedItemIds.map(r=>this.shapes.find(o=>o.id===r))),this.config.onUpdateSelectedItemIds([...this.selectedItemIds])}}const kt=[];function Ue(t,e=x){let n;const r=new Set;function o(i){if(Oe(t,i)&&(t=i,n)){const u=!kt.length;for(const c of r)c[1](),kt.push(c,t);if(u){for(let c=0;c<kt.length;c+=2)kt[c][0](kt[c+1]);kt.length=0}}}function a(i){o(i(t))}function l(i,u=x){const c=[i,u];return r.add(c),r.size===1&&(n=e(o)||x),i(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:l}}function Zt(t,{delay:e=0,duration:n=400,easing:r=ks}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:a=>`opacity: ${a*o}`}}function $s(t,e,n){const r=t.slice();return r[23]=e[n],r[24]=e,r[25]=n,r}function xs(t,e){let n,r,o,a,l,i,u,c=e[23].name+"",h,d,m,b,g,v;function N(){return e[11](e[23],e[24],e[25])}function k(){return e[12](e[23],e[24],e[25])}function j(){return e[13](e[23],e[24],e[25])}function G(){return e[14](e[23],e[24],e[25])}function q(){return e[15](e[23])}return{key:t,first:null,c(){n=y("button"),r=y("div"),o=y("div"),a=y("img"),i=B(),u=y("div"),h=Fe(c),m=B(),s(a,"class","shape-selector-item-image svelte-i5xq7v"),ft(a.src,l=e[23].image)||s(a,"src",l),s(a,"alt",""),s(o,"class","shape-selector-item-image-div svelte-i5xq7v"),s(u,"class",d="shape-selector-item-name "+(e[8].includes(e[23].id)?"font-selected":"")+" svelte-i5xq7v"),s(r,"class","shape-selector-details svelte-i5xq7v"),s(n,"class",b="shape-selector-item "+(e[8].includes(e[23].id)?"selected":"")+" svelte-i5xq7v"),this.first=n},m(P,S){J(P,n,S),f(n,r),f(r,o),f(o,a),f(r,i),f(r,u),f(u,h),f(n,m),g||(v=[z(n,"mouseenter",N),z(n,"mouseleave",k),z(n,"focus",j),z(n,"blur",G),z(n,"click",q)],g=!0)},p(P,S){e=P,S&64&&!ft(a.src,l=e[23].image)&&s(a,"src",l),S&64&&c!==(c=e[23].name+"")&&Lr(h,c),S&320&&d!==(d="shape-selector-item-name "+(e[8].includes(e[23].id)?"font-selected":"")+" svelte-i5xq7v")&&s(u,"class",d),S&320&&b!==(b="shape-selector-item "+(e[8].includes(e[23].id)?"selected":"")+" svelte-i5xq7v")&&s(n,"class",b)},d(P){P&&H(n),g=!1,ye(v)}}}function Hl(t){let e,n,r,o,a,l,i,u,c,h,d,m,b,g,v=[],N=new Map,k,j,G,q,P,S,E,w,L,K,te=t[6];const ne=X=>X[23].id;for(let X=0;X<te.length;X+=1){let I=$s(t,te,X),V=ne(I);N.set(V,v[X]=xs(V,I))}return{c(){e=y("div"),n=y("div"),r=y("div"),o=y("h2"),o.textContent="Library",a=B(),l=y("button"),l.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-i5xq7v"/>',i=B(),u=y("div"),c=y("div"),h=y("input"),d=B(),m=y("div"),b=y("div"),g=y("div");for(let X=0;X<v.length;X+=1)v[X].c();k=B(),j=y("div"),G=y("div"),q=y("button"),q.textContent="Import",P=B(),S=y("button"),S.textContent="Cancel",s(o,"class","svelte-i5xq7v"),s(l,"class","close-button svelte-i5xq7v"),s(r,"class","shape-selector-header svelte-i5xq7v"),h.value=t[5],s(h,"placeholder","Search"),oe(h,"background-image","url('icons/search-icon.png')"),s(h,"class","svelte-i5xq7v"),s(c,"class","shape-selector-search svelte-i5xq7v"),s(g,"class","shape-selector-grid-inner svelte-i5xq7v"),s(b,"class","scrollbar-wrapper svelte-i5xq7v"),s(m,"class","shape-selector-grid svelte-i5xq7v"),s(u,"class","inner-container svelte-i5xq7v"),s(q,"class","import-button svelte-i5xq7v"),s(S,"class","cancel-button svelte-i5xq7v"),s(G,"class","import-cancel-buttons svelte-i5xq7v"),s(j,"class","import-cancel-buttons-container svelte-i5xq7v"),s(n,"class","shape-selector-library svelte-i5xq7v"),s(e,"class","shape-selector-library-dialog svelte-i5xq7v")},m(X,I){J(X,e,I),f(e,n),f(n,r),f(r,o),f(r,a),f(r,l),t[9](r),f(n,i),f(n,u),f(u,c),f(c,h),f(u,d),f(u,m),f(m,b),f(b,g);for(let V=0;V<v.length;V+=1)v[V]&&v[V].m(g,null);f(n,k),f(n,j),f(j,G),f(G,q),f(G,P),f(G,S),t[17](e),w=!0,L||(K=[z(l,"click",function(){Ve(t[0])&&t[0].apply(this,arguments)}),z(h,"input",t[10]),z(q,"click",t[16]),z(S,"click",function(){Ve(t[0])&&t[0].apply(this,arguments)})],L=!0)},p(X,[I]){t=X,(!w||I&32&&h.value!==t[5])&&(h.value=t[5]),I&324&&(te=t[6],v=Br(v,I,ne,1,t,te,N,g,Mr,xs,null,$s))},i(X){w||(Ze(()=>{w&&(E||(E=Mn(e,Zt,{duration:500},!0)),E.run(1))}),w=!0)},o(X){E||(E=Mn(e,Zt,{duration:500},!1)),E.run(0),w=!1},d(X){X&&H(e),t[9](null);for(let I=0;I<v.length;I+=1)v[I].d();t[17](null),X&&E&&E.end(),L=!1,ye(K)}}}function Yl(t,e,n){let r,o,a,l,i=[],u=[],c=[],{closeLibrary:h}=e,{addNewShapes:d}=e;const m=Ue([]),b=Ue([]),g=Ue([]),v=Ue(!1);Ir(()=>{const L={onUpdateShapes:ne=>{m.set(ne)},onUpdateFilteredShapes:ne=>{b.set(ne)},onUpdateSelectedItemIds:ne=>{g.set(ne)},onUpdateImportButtonSelected:ne=>{v.set(ne)}};n(2,a=new Al(document.getElementById("Container"),L));let K=!1,te=[0,0];o.addEventListener("mousedown",ne=>{K=!0,te=[r.offsetLeft-ne.clientX,r.offsetTop-ne.clientY]},!0),document.addEventListener("mouseup",()=>{K=!1},!0),document.addEventListener("mousemove",ne=>{ne.preventDefault(),K&&(n(3,r.style.left=ne.clientX+te[0]+"px",r),n(3,r.style.top=ne.clientY+te[1]+"px",r))},!0)}),m.subscribe(L=>{n(7,u=L)}),b.subscribe(L=>{n(6,i=L)}),g.subscribe(L=>{n(8,c=L)});function N(L){O[L?"unshift":"push"](()=>{o=L,n(4,o)})}const k=L=>a.handleSearch(L.target.value),j=(L,K,te)=>n(6,K[te].hover=!0,i),G=(L,K,te)=>n(6,K[te].hover=!1,i),q=(L,K,te)=>n(6,K[te].hover=!0,i),P=(L,K,te)=>n(6,K[te].hover=!1,i),S=L=>a.setSelectedItemId(L.id),E=()=>{c.length>0&&(d(u.filter(L=>c.includes(L.id))),h())};function w(L){O[L?"unshift":"push"](()=>{r=L,n(3,r)})}return t.$$set=L=>{"closeLibrary"in L&&n(0,h=L.closeLibrary),"addNewShapes"in L&&n(1,d=L.addNewShapes)},t.$$.update=()=>{t.$$.dirty&4&&a&&(n(5,l=a.searchTerm),a.currentType,n(6,i=a.filteredShapes),n(7,u=a.shapes),n(8,c=a.selectedItemIds))},[h,d,a,r,o,l,i,u,c,N,k,j,G,q,P,S,E,w]}class jl extends qe{constructor(e){super(),Pe(this,e,Yl,Hl,Oe,{closeLibrary:0,addNewShapes:1})}}const Lt=300,Je=100,Qt=15;var Ke;(t=>{function e(r,o,a=!1){const l=r.getBoundingClientRect(),i=a?Qt:1;return{x:Math.round(Math.round(Je*Lt*(o.clientX-l.left)/l.width)/Je/i)*i,y:Math.round(Math.round(Je*Lt*(o.clientY-l.top)/l.height)/Je/i)*i}}t.fromMouse=e;function n(r,o){return Math.round(Je*Math.sqrt((r.x-o.x)**2+(r.y-o.y)**2))/Je}t.l2=n})(Ke||(Ke={}));var fe;(t=>{function e(r){let o;switch(r.type){case t.Type.LINE:const a=r;o=[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2}];break;case t.Type.CIRCLE:const l=r,i=l.diam/2;o=[{x:l.x+i,y:l.y+i},{x:l.x+i,y:l.y}];break;case t.Type.RECTANGLE:const u=r;o=[{x:u.xmin,y:u.ymin},{x:u.xmax,y:u.ymax}];break;case t.Type.POLYGON:const c=r;o=c.xcors.map((h,d)=>({x:h,y:c.ycors[d]}));break}return{points:o,color:r.color,type:r.type,filled:r.filled}}t.fromJSON=e;function n(r){let o={type:r.type,color:r.color,filled:r.filled,marked:!1};switch(r.points=r.points.map(a=>({x:Math.round(Je*a.x)/Je,y:Math.round(Je*a.y)/Je})),r.type){case t.Type.LINE:return{...o,x1:r.points[0].x,y1:r.points[0].y,x2:r.points[1].x,y2:r.points[1].y};case t.Type.CIRCLE:const a=Ke.l2(r.points[0],r.points[1]);return{...o,x:r.points[0].x+a,y:r.points[0].y+a,diam:a*2};case t.Type.RECTANGLE:return{...o,xmin:Math.min(r.points[0].x,r.points[1].x),ymin:Math.min(r.points[0].y,r.points[1].y),xmax:Math.max(r.points[0].x,r.points[1].x),ymax:Math.max(r.points[0].y,r.points[1].y)};case t.Type.POLYGON:return{...o,xcors:r.points.map(l=>l.x),ycors:r.points.map(l=>l.y)}}}t.toJSON=n})(fe||(fe={}));(t=>{(e=>{e.LINE="line",e.CIRCLE="circle",e.RECTANGLE="rectangle",e.POLYGON="polygon"})(t.Type||(t.Type={}))})(fe||(fe={}));var It;(t=>{function e(l){return{x:Lt-l.x,y:l.y}}t.flipHorizontal=e;function n(l){return{x:l.x,y:Lt-l.y}}t.flipVertical=n;function r(l){return{x:Lt-l.y,y:l.x}}t.rotateCW=r;function o(l){return{x:l.y,y:Lt-l.x}}t.rotateCCW=o;function a(l,i){return{x:l.x+i.x,y:l.y+i.y}}t.translate=a})(It||(It={}));var ee=(t=>(t[t.SELECT=0]="SELECT",t[t.LINE=1]="LINE",t[t.FILLED_RECTANGLE=2]="FILLED_RECTANGLE",t[t.RECTANGLE=3]="RECTANGLE",t[t.FILLED_CIRCLE=4]="FILLED_CIRCLE",t[t.CIRCLE=5]="CIRCLE",t[t.FILLED_POLYGON=6]="FILLED_POLYGON",t[t.POLYGON=7]="POLYGON",t))(ee||{});(t=>{function e(r){switch(r){case 1:return fe.Type.LINE;case 2:case 3:return fe.Type.RECTANGLE;case 4:case 5:return fe.Type.CIRCLE;case 6:case 7:return fe.Type.POLYGON;default:return null}}t.shapeType=e;function n(r){switch(r){case 2:case 4:case 6:return!0;default:return!1}}t.isFilled=n})(ee||(ee={}));var Et;(t=>{function e(a,l){return[null,l.filter(i=>i!==a)]}t.remove=e;function n(a,l){return[a,l.filter(i=>i!==a).concat(a)]}t.moveToTop=n;function r(a,l){return[a,[a].concat(l.filter(i=>i!==a))]}t.moveToBottom=r;function o(a,l){const i=structuredClone(a);return[i,l.concat(i)]}t.duplicate=o})(Et||(Et={}));var Bn;(t=>{function e(r,o,a){return r.length===0?[r,o,a]:(o.push(a),[r,o,r.pop()])}t.undo=e;function n(r,o,a){return o.length===0?[r,o,a]:(r.push(a),[r,o,o.pop()])}t.redo=n})(Bn||(Bn={}));function Jl(t){let e,n,r,o;const a=t[5].default,l=$t(a,t,t[4],null);return{c(){e=y("button"),l&&l.c(),s(e,"class","svelte-o6ti3e"),Qs(e,"selected",t[0]===t[1])},m(i,u){J(i,e,u),l&&l.m(e,null),n=!0,r||(o=z(e,"click",t[2]),r=!0)},p(i,[u]){l&&l.p&&(!n||u&16)&&en(l,a,i,i[4],n?xt(a,i[4],u,null):tn(i[4]),null),(!n||u&3)&&Qs(e,"selected",i[0]===i[1])},i(i){n||(U(l,i),n=!0)},o(i){Y(l,i),n=!1},d(i){i&&H(e),l&&l.d(i),r=!1,o()}}}function Vl(t,e,n){let{$$slots:r={},$$scope:o}=e,{currentShape:a=null}=e,{currentTool:l=ee.SELECT}=e,{tool:i=ee.SELECT}=e;const u=()=>{l===ee.SELECT&&n(3,a=null),n(0,l=i)};return t.$$set=c=>{"currentShape"in c&&n(3,a=c.currentShape),"currentTool"in c&&n(0,l=c.currentTool),"tool"in c&&n(1,i=c.tool),"$$scope"in c&&n(4,o=c.$$scope)},[l,i,u,a,o,r]}class rt extends qe{constructor(e){super(),Pe(this,e,Vl,Jl,Oe,{currentShape:3,currentTool:0,tool:1})}}function zl(t){let e,n,r,o,a;return{c(){e=T("rect"),s(e,"x",n=t[2]-Tt/2),s(e,"y",r=t[1]-Tt/2),s(e,"width",Tt),s(e,"height",Tt),s(e,"cursor",t[0])},m(l,i){J(l,e,i),o||(a=[z(e,"mousedown",t[3]),z(e,"mousemove",t[4]),z(e,"mouseup",t[5])],o=!0)},p(l,[i]){i&4&&n!==(n=l[2]-Tt/2)&&s(e,"x",n),i&2&&r!==(r=l[1]-Tt/2)&&s(e,"y",r),i&1&&s(e,"cursor",l[0])},i:x,o:x,d(l){l&&H(e),o=!1,ye(a)}}}const Tt=6;function Xl(t,e,n){let r,o,a,{shape:l}=e,{index:i}=e,{canvas:u}=e,{grabbed:c=!1}=e,{pushState:h}=e;function d(g){h(),n(7,c=!0)}function m(g){c&&n(6,l.points[i]=Ke.fromMouse(u,g),l)}function b(g){n(7,c=!1)}return t.$$set=g=>{"shape"in g&&n(6,l=g.shape),"index"in g&&n(8,i=g.index),"canvas"in g&&n(9,u=g.canvas),"grabbed"in g&&n(7,c=g.grabbed),"pushState"in g&&n(10,h=g.pushState)},t.$$.update=()=>{t.$$.dirty&320&&n(2,r=l.points[i].x),t.$$.dirty&320&&n(1,o=l.points[i].y),t.$$.dirty&128&&n(0,a=c?"grabbing":"grab")},[a,o,r,d,m,b,l,c,i,u,h]}class Wl extends qe{constructor(e){super(),Pe(this,e,Xl,zl,Oe,{shape:6,index:8,canvas:9,grabbed:7,pushState:10})}}function Kl(t){let e,n,r,o,a,l,i;return{c(){e=T("rect"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"x",n=Math.min(t[0].points[0].x,t[0].points[1].x)),s(e,"y",r=Math.min(t[0].points[0].y,t[0].points[1].y)),s(e,"width",o=Math.abs(t[0].points[1].x-t[0].points[0].x)),s(e,"height",a=Math.abs(t[0].points[1].y-t[0].points[0].y)),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(u,c){J(u,e,c),t[13](e),l||(i=z(e,"mousedown",t[7]),l=!0)},p(u,c){c&64&&s(e,"stroke-width",u[6]),c&16&&s(e,"stroke",u[4]),c&32&&s(e,"fill",u[5]),c&1&&n!==(n=Math.min(u[0].points[0].x,u[0].points[1].x))&&s(e,"x",n),c&1&&r!==(r=Math.min(u[0].points[0].y,u[0].points[1].y))&&s(e,"y",r),c&1&&o!==(o=Math.abs(u[0].points[1].x-u[0].points[0].x))&&s(e,"width",o),c&1&&a!==(a=Math.abs(u[0].points[1].y-u[0].points[0].y))&&s(e,"height",a),c&2&&s(e,"transform",u[1]),c&8&&s(e,"cursor",u[3])},d(u){u&&H(e),t[13](null),l=!1,i()}}}function Zl(t){let e,n,r,o;return{c(){e=T("polygon"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"points",n=t[0].points.map(er).join(" ")),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(a,l){J(a,e,l),t[12](e),r||(o=z(e,"mousedown",t[7]),r=!0)},p(a,l){l&64&&s(e,"stroke-width",a[6]),l&16&&s(e,"stroke",a[4]),l&32&&s(e,"fill",a[5]),l&1&&n!==(n=a[0].points.map(er).join(" "))&&s(e,"points",n),l&2&&s(e,"transform",a[1]),l&8&&s(e,"cursor",a[3])},d(a){a&&H(e),t[12](null),r=!1,o()}}}function Ql(t){let e,n,r,o,a,l,i;return{c(){e=T("line"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"x1",n=t[0].points[0].x),s(e,"y1",r=t[0].points[0].y),s(e,"x2",o=t[0].points[1].x),s(e,"y2",a=t[0].points[1].y),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(u,c){J(u,e,c),t[11](e),l||(i=z(e,"mousedown",t[7]),l=!0)},p(u,c){c&64&&s(e,"stroke-width",u[6]),c&16&&s(e,"stroke",u[4]),c&32&&s(e,"fill",u[5]),c&1&&n!==(n=u[0].points[0].x)&&s(e,"x1",n),c&1&&r!==(r=u[0].points[0].y)&&s(e,"y1",r),c&1&&o!==(o=u[0].points[1].x)&&s(e,"x2",o),c&1&&a!==(a=u[0].points[1].y)&&s(e,"y2",a),c&2&&s(e,"transform",u[1]),c&8&&s(e,"cursor",u[3])},d(u){u&&H(e),t[11](null),l=!1,i()}}}function $l(t){let e,n,r,o,a,l;return{c(){e=T("circle"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"cx",n=t[0].points[0].x),s(e,"cy",r=t[0].points[0].y),s(e,"r",o=Ke.l2(t[0].points[0],t[0].points[1])),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(i,u){J(i,e,u),t[10](e),a||(l=z(e,"mousedown",t[7]),a=!0)},p(i,u){u&64&&s(e,"stroke-width",i[6]),u&16&&s(e,"stroke",i[4]),u&32&&s(e,"fill",i[5]),u&1&&n!==(n=i[0].points[0].x)&&s(e,"cx",n),u&1&&r!==(r=i[0].points[0].y)&&s(e,"cy",r),u&1&&o!==(o=Ke.l2(i[0].points[0],i[0].points[1]))&&s(e,"r",o),u&2&&s(e,"transform",i[1]),u&8&&s(e,"cursor",i[3])},d(i){i&&H(e),t[10](null),a=!1,l()}}}function xl(t){let e;function n(a,l){if(a[0].type===fe.Type.CIRCLE)return $l;if(a[0].type===fe.Type.LINE)return Ql;if(a[0].type===fe.Type.POLYGON)return Zl;if(a[0].type===fe.Type.RECTANGLE)return Kl}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=Cs()},m(a,l){o&&o.m(a,l),J(a,e,l)},p(a,[l]){r===(r=n(a))&&o?o.p(a,l):(o&&o.d(1),o=r&&r(a),o&&(o.c(),o.m(e.parentNode,e)))},i:x,o:x,d(a){o&&o.d(a),a&&H(e)}}}const er=t=>`${t.x},${t.y}`;function eo(t,e,n){let r,o,a,l,{shape:i}=e,u,{transform:c=""}=e,{currentShape:h=null}=e,{currentTool:d=ee.SELECT}=e;function m(k){d===ee.SELECT&&n(8,h=i)}function b(k){O[k?"unshift":"push"](()=>{u=k,n(2,u)})}function g(k){O[k?"unshift":"push"](()=>{u=k,n(2,u)})}function v(k){O[k?"unshift":"push"](()=>{u=k,n(2,u)})}function N(k){O[k?"unshift":"push"](()=>{u=k,n(2,u)})}return t.$$set=k=>{"shape"in k&&n(0,i=k.shape),"transform"in k&&n(1,c=k.transform),"currentShape"in k&&n(8,h=k.currentShape),"currentTool"in k&&n(9,d=k.currentTool)},t.$$.update=()=>{t.$$.dirty&1&&n(6,r=i.filled?1:2),t.$$.dirty&1&&n(5,o=i.filled?i.color:"none"),t.$$.dirty&1&&n(4,a=i.color),t.$$.dirty&769&&n(3,l=d!==ee.SELECT?"crosshair":h===i?"move":"pointer")},[i,c,u,l,a,o,r,m,h,d,b,g,v,N]}class Ls extends qe{constructor(e){super(),Pe(this,e,eo,xl,Oe,{shape:0,transform:1,currentShape:8,currentTool:9})}}function tr(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function nr(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function sr(t,e,n){const r=t.slice();return r[29]=e[n],r[33]=e,r[31]=n,r}function rr(t,e,n){const r=t.slice();return r[34]=e[n],r[35]=e,r[36]=n,r}function lr(t){let e,n,r,o,a;function l(h){t[17](h,t[34],t[35],t[36])}function i(h){t[18](h)}function u(h){t[19](h)}let c={};return t[34]!==void 0&&(c.shape=t[34]),t[1]!==void 0&&(c.currentShape=t[1]),t[0]!==void 0&&(c.currentTool=t[0]),e=new Ls({props:c}),O.push(()=>R(e,"shape",l)),O.push(()=>R(e,"currentShape",i)),O.push(()=>R(e,"currentTool",u)),{c(){ue(e.$$.fragment)},m(h,d){ie(e,h,d),a=!0},p(h,d){t=h;const m={};!n&&d[0]&4&&(n=!0,m.shape=t[34],D(()=>n=!1)),!r&&d[0]&2&&(r=!0,m.currentShape=t[1],D(()=>r=!1)),!o&&d[0]&1&&(o=!0,m.currentTool=t[0],D(()=>o=!1)),e.$set(m)},i(h){a||(U(e.$$.fragment,h),a=!0)},o(h){Y(e.$$.fragment,h),a=!1},d(h){ae(e,h)}}}function or(t){let e,n,r,o,a;function l(h){t[20](h)}function i(h){t[21](h)}function u(h){t[22](h)}let c={};return t[1]!==void 0&&(c.shape=t[1]),t[1]!==void 0&&(c.currentShape=t[1]),t[0]!==void 0&&(c.currentTool=t[0]),e=new Ls({props:c}),O.push(()=>R(e,"shape",l)),O.push(()=>R(e,"currentShape",i)),O.push(()=>R(e,"currentTool",u)),{c(){ue(e.$$.fragment)},m(h,d){ie(e,h,d),a=!0},p(h,d){const m={};!n&&d[0]&2&&(n=!0,m.shape=h[1],D(()=>n=!1)),!r&&d[0]&2&&(r=!0,m.currentShape=h[1],D(()=>r=!1)),!o&&d[0]&1&&(o=!0,m.currentTool=h[0],D(()=>o=!1)),e.$set(m)},i(h){a||(U(e.$$.fragment,h),a=!0)},o(h){Y(e.$$.fragment,h),a=!1},d(h){ae(e,h)}}}function ir(t){let e,n,r=t[1].points,o=[];for(let l=0;l<r.length;l+=1)o[l]=ar(sr(t,r,l));const a=l=>Y(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=Cs()},m(l,i){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,i);J(l,e,i),n=!0},p(l,i){if(i[0]&122){r=l[1].points;let u;for(u=0;u<r.length;u+=1){const c=sr(l,r,u);o[u]?(o[u].p(c,i),U(o[u],1)):(o[u]=ar(c),o[u].c(),U(o[u],1),o[u].m(e.parentNode,e))}for(lt(),u=r.length;u<o.length;u+=1)a(u);ot()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)U(o[i]);n=!0}},o(l){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)Y(o[i]);n=!1},d(l){zt(o,l),l&&H(e)}}}function ar(t){let e,n=t[31],r,o,a,l;const i=()=>t[23](e,n),u=()=>t[23](null,n);function c(b){t[24](b,t[31])}function h(b){t[25](b)}function d(b){t[26](b)}let m={pushState:t[3],index:t[31]};return t[4][t[31]]!==void 0&&(m.grabbed=t[4][t[31]]),t[5]!==void 0&&(m.canvas=t[5]),t[1]!==void 0&&(m.shape=t[1]),e=new Wl({props:m}),i(),O.push(()=>R(e,"grabbed",c)),O.push(()=>R(e,"canvas",h)),O.push(()=>R(e,"shape",d)),{c(){ue(e.$$.fragment)},m(b,g){ie(e,b,g),l=!0},p(b,g){t=b,n!==t[31]&&(u(),n=t[31],i());const v={};g[0]&8&&(v.pushState=t[3]),!r&&g[0]&16&&(r=!0,v.grabbed=t[4][t[31]],D(()=>r=!1)),!o&&g[0]&32&&(o=!0,v.canvas=t[5],D(()=>o=!1)),!a&&g[0]&2&&(a=!0,v.shape=t[1],D(()=>a=!1)),e.$set(v)},i(b){l||(U(e.$$.fragment,b),l=!0)},o(b){Y(e.$$.fragment,b),l=!1},d(b){u(),ae(e,b)}}}function ur(t){let e;return{c(){e=T("line"),s(e,"x1",t[31]*Qt),s(e,"y1","0"),s(e,"x2",t[31]*Qt),s(e,"y2","300")},m(n,r){J(n,e,r)},p:x,d(n){n&&H(e)}}}function cr(t){let e;return{c(){e=T("line"),s(e,"x1","0"),s(e,"y1",t[31]*Qt),s(e,"x2","300"),s(e,"y2",t[31]*Qt)},m(n,r){J(n,e,r)},p:x,d(n){n&&H(e)}}}function to(t){let e,n,r,o,a,l,i,u,c,h,d=t[2],m=[];for(let S=0;S<d.length;S+=1)m[S]=lr(rr(t,d,S));const b=S=>Y(m[S],1,1,()=>{m[S]=null});let g=t[1]!=null&&t[0]!=ee.SELECT&&or(t),v=t[1]!=null&&t[0]===ee.SELECT&&ir(t);const N=t[16].default,k=$t(N,t,t[15],null);let j={length:21},G=[];for(let S=0;S<j.length;S+=1)G[S]=ur(nr(t,j,S));let q={length:21},P=[];for(let S=0;S<q.length;S+=1)P[S]=cr(tr(t,q,S));return{c(){e=T("svg"),n=T("g");for(let S=0;S<m.length;S+=1)m[S].c();r=Cs(),g&&g.c(),o=T("g"),v&&v.c(),k&&k.c(),a=T("g");for(let S=0;S<G.length;S+=1)G[S].c();l=T("line");for(let S=0;S<P.length;S+=1)P[S].c();i=T("line"),s(n,"id","shape"),s(o,"id","handles"),s(o,"fill","white"),s(o,"stroke","black"),s(o,"stroke-width","1"),s(l,"x1","150"),s(l,"y1","0"),s(l,"x2","150"),s(l,"y2","300"),s(i,"x1","0"),s(i,"y1","150"),s(i,"x2","300"),s(i,"y2","150"),s(a,"id","grid"),s(a,"stroke","rgba(255, 255, 255, 0.3)"),s(a,"stroke-width","0.5"),s(e,"class","canvas svelte-19kwhnv"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 300 300"),s(e,"cursor",t[7])},m(S,E){J(S,e,E),f(e,n);for(let w=0;w<m.length;w+=1)m[w]&&m[w].m(n,null);f(n,r),g&&g.m(n,null),f(e,o),v&&v.m(o,null),k&&k.m(e,null),f(e,a);for(let w=0;w<G.length;w+=1)G[w]&&G[w].m(a,null);f(a,l);for(let w=0;w<P.length;w+=1)P[w]&&P[w].m(a,null);f(a,i),t[27](e),u=!0,c||(h=[z(e,"mousemove",t[8]),z(e,"mousedown",t[10]),z(e,"mouseup",t[9])],c=!0)},p(S,E){if(E[0]&7){d=S[2];let w;for(w=0;w<d.length;w+=1){const L=rr(S,d,w);m[w]?(m[w].p(L,E),U(m[w],1)):(m[w]=lr(L),m[w].c(),U(m[w],1),m[w].m(n,r))}for(lt(),w=d.length;w<m.length;w+=1)b(w);ot()}if(S[1]!=null&&S[0]!=ee.SELECT?g?(g.p(S,E),E[0]&3&&U(g,1)):(g=or(S),g.c(),U(g,1),g.m(n,null)):g&&(lt(),Y(g,1,1,()=>{g=null}),ot()),S[1]!=null&&S[0]===ee.SELECT?v?(v.p(S,E),E[0]&3&&U(v,1)):(v=ir(S),v.c(),U(v,1),v.m(o,null)):v&&(lt(),Y(v,1,1,()=>{v=null}),ot()),k&&k.p&&(!u||E[0]&32768)&&en(k,N,S,S[15],u?xt(N,S[15],E,null):tn(S[15]),null),E&0){j={length:21};let w;for(w=0;w<j.length;w+=1){const L=nr(S,j,w);G[w]?G[w].p(L,E):(G[w]=ur(L),G[w].c(),G[w].m(a,l))}for(;w<G.length;w+=1)G[w].d(1);G.length=j.length}if(E&0){q={length:21};let w;for(w=0;w<q.length;w+=1){const L=tr(S,q,w);P[w]?P[w].p(L,E):(P[w]=cr(L),P[w].c(),P[w].m(a,i))}for(;w<P.length;w+=1)P[w].d(1);P.length=q.length}(!u||E[0]&128)&&s(e,"cursor",S[7])},i(S){if(!u){for(let E=0;E<d.length;E+=1)U(m[E]);U(g),U(v),U(k,S),u=!0}},o(S){m=m.filter(Boolean);for(let E=0;E<m.length;E+=1)Y(m[E]);Y(g),Y(v),Y(k,S),u=!1},d(S){S&&H(e),zt(m,S),g&&g.d(),v&&v.d(),k&&k.d(S),zt(G,S),zt(P,S),t[27](null),c=!1,ye(h)}}}const no="#FFFFFF";function so(t,e,n){let r,o,{$$slots:a={},$$scope:l}=e,{currentTool:i=ee.SELECT}=e,{currentColor:u=no}=e,{currentShape:c=null}=e,{snapToGrid:h=!1}=e,{shapes:d=[]}=e,{pushState:m}=e,b,g=[],v=[],N=!1,k;function j(M){if(!c)return;const W=Ke.fromMouse(b,M,h);if(i!==ee.SELECT)n(1,c.points[c.points.length-1]=W,c);else{N&&!r&&(n(1,c.points=c.points.map(A=>({x:A.x+W.x-k.x,y:A.y+W.y-k.y})),c),k=W);for(let A=0;A<g.length;A++)v[A]&&n(1,c.points[A]=W,c)}n(2,d)}function G(M){let W=Ke.fromMouse(b,M,h);n(13,N=!1);for(let A=0;A<g.length;A++)n(4,v[A]=!1,v);c&&(W.x==c.points[0].x&&W.y==c.points[0].y||ee.shapeType(i)!=fe.Type.POLYGON&&i!==ee.SELECT&&q(M))}function q(M){i===ee.SELECT&&M.target===b&&n(1,c=null);let W=Ke.fromMouse(b,M,h);if(i!==ee.SELECT)if(!c)n(1,c={points:[W,W],color:u,type:ee.shapeType(i),filled:ee.isFilled(i)});else if(n(1,c.points[c.points.length-1]=W,c),c.points.length==2&&ee.shapeType(i)!=fe.Type.POLYGON)m(),d.push(c),n(1,c=null);else{const A=c.points.at(-2),Q=W;Q.x==A.x&&Q.y==A.y?(c.points.pop(),m(),d.push(c),n(1,c=null)):c.points.push(W)}else m(),n(13,N=!0),k=W}function P(M,W,A,Q){A[Q]=M,n(2,d)}function S(M){c=M,n(1,c)}function E(M){i=M,n(0,i)}function w(M){c=M,n(1,c)}function L(M){c=M,n(1,c)}function K(M){i=M,n(0,i)}function te(M,W){O[M?"unshift":"push"](()=>{g[W]=M,n(6,g)})}function ne(M,W){t.$$.not_equal(v[W],M)&&(v[W]=M,n(4,v))}function X(M){b=M,n(5,b)}function I(M){c=M,n(1,c)}function V(M){O[M?"unshift":"push"](()=>{b=M,n(5,b)})}return t.$$set=M=>{"currentTool"in M&&n(0,i=M.currentTool),"currentColor"in M&&n(11,u=M.currentColor),"currentShape"in M&&n(1,c=M.currentShape),"snapToGrid"in M&&n(12,h=M.snapToGrid),"shapes"in M&&n(2,d=M.shapes),"pushState"in M&&n(3,m=M.pushState),"$$scope"in M&&n(15,l=M.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16&&n(14,r=v.includes(!0)),t.$$.dirty[0]&24579&&n(7,o=i!==ee.SELECT?"crosshair":r?"grabbing":N&&c!==null?"move":"default")},[i,c,d,m,v,b,g,o,j,G,q,u,h,N,r,l,a,P,S,E,w,L,K,te,ne,X,I,V]}class ro extends qe{constructor(e){super(),Pe(this,e,so,to,Oe,{currentTool:0,currentColor:11,currentShape:1,snapToGrid:12,shapes:2,pushState:3},null,[-1,-1])}}var Ss;(t=>{function e(i){if(!i.name||typeof i.name!="string"||typeof i.editableColorIndex!="number"||typeof i.rotate!="boolean"||!Array.isArray(i.elements))return!1;for(const u of i.elements)if(!n(u))return!1;return!0}t.validateJSONShape=e;function n(i){switch(i.type){case fe.Type.LINE:return r(i);case fe.Type.CIRCLE:return o(i);case fe.Type.RECTANGLE:return a(i);case fe.Type.POLYGON:return l(i);default:return!1}}function r(i){return typeof i.x1=="number"&&typeof i.y1=="number"&&typeof i.x2=="number"&&typeof i.y2=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function o(i){return typeof i.x=="number"&&typeof i.y=="number"&&typeof i.diam=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function a(i){return typeof i.xmin=="number"&&typeof i.ymin=="number"&&typeof i.xmax=="number"&&typeof i.ymax=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function l(i){return Array.isArray(i.xcors)&&Array.isArray(i.ycors)&&i.xcors.length===i.ycors.length&&i.xcors.every(u=>typeof u=="number")&&i.ycors.every(u=>typeof u=="number")&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}})(Ss||(Ss={}));var ws;(t=>{function e(l){return`<line x1="${l.x1}" y1="${l.y1}" x2="${l.x2}" y2="${l.y2}" stroke="${l.color}" stroke-width="2" />`}function n(l){return`<circle cx="${l.x-l.diam/2}" cy="${l.y-l.diam/2}" r="${l.diam/2}" stroke="${l.color}" stroke-width="2" fill="${l.filled?l.color:"none"}" />`}function r(l){return`<rect x="${l.xmin}" y="${l.ymin}" width="${l.xmax-l.xmin}" height="${l.ymax-l.ymin}" stroke="${l.color}" stroke-width="2" fill="${l.filled?l.color:"none"}" />`}function o(l){return`<polygon points="${l.xcors.map((u,c)=>`${u},${l.ycors[c]}`).join(" ")}" stroke="${l.color}" stroke-width="2" fill="${l.filled?l.color:"none"}" />`}function a(l){return l.elements.map(u=>{switch(u.type){case fe.Type.LINE:return e(u);case fe.Type.CIRCLE:return n(u);case fe.Type.RECTANGLE:return r(u);case fe.Type.POLYGON:return o(u)}}).join(`
`)}t.toSVG=a})(ws||(ws={}));function lo(t){let e,n,r,o;const a=t[6].default,l=$t(a,t,t[5],null);return{c(){e=y("button"),l&&l.c(),s(e,"class","svelte-6kyli7")},m(i,u){J(i,e,u),l&&l.m(e,null),n=!0,r||(o=z(e,"click",t[0]),r=!0)},p(i,[u]){l&&l.p&&(!n||u&32)&&en(l,a,i,i[5],n?xt(a,i[5],u,null):tn(i[5]),null)},i(i){n||(U(l,i),n=!0)},o(i){Y(l,i),n=!1},d(i){i&&H(e),l&&l.d(i),r=!1,o()}}}function oo(t,e,n){let{$$slots:r={},$$scope:o}=e,{transformation:a}=e,{shapes:l}=e,{currentShape:i=null}=e,{pushState:u}=e;const c=d=>{d.points=d.points.map(a)},h=()=>{u(),i!==null?(c(i),n(2,i)):l.forEach(c),n(1,l)};return t.$$set=d=>{"transformation"in d&&n(3,a=d.transformation),"shapes"in d&&n(1,l=d.shapes),"currentShape"in d&&n(2,i=d.currentShape),"pushState"in d&&n(4,u=d.pushState),"$$scope"in d&&n(5,o=d.$$scope)},[h,l,i,a,u,o,r]}class Ln extends qe{constructor(e){super(),Pe(this,e,oo,lo,Oe,{transformation:3,shapes:1,currentShape:2,pushState:4})}}function io(t){let e,n,r,o;const a=t[6].default,l=$t(a,t,t[5],null);return{c(){e=y("button"),l&&l.c(),s(e,"class","svelte-16eij8w")},m(i,u){J(i,e,u),l&&l.m(e,null),n=!0,r||(o=z(e,"click",t[0]),r=!0)},p(i,[u]){l&&l.p&&(!n||u&32)&&en(l,a,i,i[5],n?xt(a,i[5],u,null):tn(i[5]),null)},i(i){n||(U(l,i),n=!0)},o(i){Y(l,i),n=!1},d(i){i&&H(e),l&&l.d(i),r=!1,o()}}}function ao(t,e,n){let{$$slots:r={},$$scope:o}=e,{stateChange:a}=e,{shapes:l}=e,{currentShape:i=null}=e,{pushState:u}=e;const c=()=>{u(),i!==null&&n(2,[i,l]=a(i,l),i,n(1,l))};return t.$$set=h=>{"stateChange"in h&&n(3,a=h.stateChange),"shapes"in h&&n(1,l=h.shapes),"currentShape"in h&&n(2,i=h.currentShape),"pushState"in h&&n(4,u=h.pushState),"$$scope"in h&&n(5,o=h.$$scope)},[c,l,i,a,u,o,r]}class In extends qe{constructor(e){super(),Pe(this,e,ao,io,Oe,{stateChange:3,shapes:1,currentShape:2,pushState:4})}}function uo(t){let e,n,r,o;const a=t[7].default,l=$t(a,t,t[6],null);return{c(){e=y("button"),l&&l.c(),s(e,"class","svelte-16eij8w")},m(i,u){J(i,e,u),l&&l.m(e,null),n=!0,r||(o=z(e,"click",t[0]),r=!0)},p(i,[u]){l&&l.p&&(!n||u&64)&&en(l,a,i,i[6],n?xt(a,i[6],u,null):tn(i[6]),null)},i(i){n||(U(l,i),n=!0)},o(i){Y(l,i),n=!1},d(i){i&&H(e),l&&l.d(i),r=!1,o()}}}function co(t,e,n){let{$$slots:r={},$$scope:o}=e,{historyChange:a}=e,{shapes:l}=e,{undoStack:i=[]}=e,{redoStack:u=[]}=e,{currentShape:c=null}=e;const h=()=>{n(2,[i,u,l]=a(i,u,l),i,n(3,u),n(1,l)),n(4,c=null)};return t.$$set=d=>{"historyChange"in d&&n(5,a=d.historyChange),"shapes"in d&&n(1,l=d.shapes),"undoStack"in d&&n(2,i=d.undoStack),"redoStack"in d&&n(3,u=d.redoStack),"currentShape"in d&&n(4,c=d.currentShape),"$$scope"in d&&n(6,o=d.$$scope)},[h,l,i,u,c,a,o,r]}class fr extends qe{constructor(e){super(),Pe(this,e,co,uo,Oe,{historyChange:5,shapes:1,undoStack:2,redoStack:3,currentShape:4})}}function pr(t,e,n){const r=t.slice();return r[3]=e[n],r[4]=e,r[5]=n,r}function hr(t){let e,n,r;function o(l){t[2](l,t[3],t[4],t[5])}let a={transform:"translate(150 150) rotate("+t[1]+") translate(-150 -150)"};return t[3]!==void 0&&(a.shape=t[3]),e=new Ls({props:a}),O.push(()=>R(e,"shape",o)),{c(){ue(e.$$.fragment)},m(l,i){ie(e,l,i),r=!0},p(l,i){t=l;const u={};i&2&&(u.transform="translate(150 150) rotate("+t[1]+") translate(-150 -150)"),!n&&i&1&&(n=!0,u.shape=t[3],D(()=>n=!1)),e.$set(u)},i(l){r||(U(e.$$.fragment,l),r=!0)},o(l){Y(e.$$.fragment,l),r=!1},d(l){ae(e,l)}}}function fo(t){let e,n,r=t[0],o=[];for(let l=0;l<r.length;l+=1)o[l]=hr(pr(t,r,l));const a=l=>Y(o[l],1,1,()=>{o[l]=null});return{c(){e=T("svg");for(let l=0;l<o.length;l+=1)o[l].c();s(e,"class","canvas-mirror svelte-1x58jn2"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 300 300")},m(l,i){J(l,e,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);n=!0},p(l,[i]){if(i&3){r=l[0];let u;for(u=0;u<r.length;u+=1){const c=pr(l,r,u);o[u]?(o[u].p(c,i),U(o[u],1)):(o[u]=hr(c),o[u].c(),U(o[u],1),o[u].m(e,null))}for(lt(),u=r.length;u<o.length;u+=1)a(u);ot()}},i(l){if(!n){for(let i=0;i<r.length;i+=1)U(o[i]);n=!0}},o(l){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)Y(o[i]);n=!1},d(l){l&&H(e),zt(o,l)}}}function po(t,e,n){let{shapes:r}=e,{rotate:o=0}=e;function a(l,i,u,c){u[c]=l,n(0,r)}return t.$$set=l=>{"shapes"in l&&n(0,r=l.shapes),"rotate"in l&&n(1,o=l.rotate)},[r,o,a]}class Vt extends qe{constructor(e){super(),Pe(this,e,po,fo,Oe,{shapes:0,rotate:1})}}function ho(t){let e,n;return{c(){e=T("svg"),n=T("polygon"),s(n,"points","4,15 8,10 14,10 4,1"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function _o(t){let e,n;return{c(){e=T("svg"),n=T("line"),s(n,"x1","1"),s(n,"y1","1"),s(n,"x2","15"),s(n,"y2","15"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function go(t){let e,n;return{c(){e=T("svg"),n=T("rect"),s(n,"x","1"),s(n,"y","1"),s(n,"rx","1"),s(n,"ry","1"),s(n,"width","14"),s(n,"height","14"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function mo(t){let e,n;return{c(){e=T("svg"),n=T("rect"),s(n,"x","1"),s(n,"y","1"),s(n,"rx","1"),s(n,"ry","1"),s(n,"width","14"),s(n,"height","14"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function bo(t){let e,n;return{c(){e=T("svg"),n=T("circle"),s(n,"cx","8"),s(n,"cy","8"),s(n,"r","7"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function vo(t){let e,n;return{c(){e=T("svg"),n=T("circle"),s(n,"cx","8"),s(n,"cy","8"),s(n,"r","7"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function yo(t){let e,n;return{c(){e=T("svg"),n=T("polygon"),s(n,"points","1,8 4.5,14.0622 11.5,14.0622 15,8 11.5,1.9378 4.5,1.9378"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function So(t){let e,n;return{c(){e=T("svg"),n=T("polygon"),s(n,"points","1,8 4.5,14.0622 11.5,14.0622 15,8 11.5,1.9378 4.5,1.9378"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,o){J(r,e,o),f(e,n)},p:x,d(r){r&&H(e)}}}function wo(t){let e,n,r,o,a,l,i;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("polygon"),l=T("circle"),i=T("polygon"),s(o,"x","0"),s(o,"y","0"),s(o,"width","16"),s(o,"height","16"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(a,"points","0,0 0,16 8,8"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","ccw-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(l,"cx","8"),s(l,"cy","8"),s(l,"r","7"),s(l,"fill-opacity","0"),s(l,"mask","url(#ccw-mask)"),s(l,"class","svelte-106cdxr"),s(i,"points","5,5 1,5 1,1"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){J(u,e,c),f(e,n),f(n,r),f(r,o),f(r,a),f(e,l),f(e,i)},p:x,d(u){u&&H(e)}}}function ko(t){let e,n,r,o,a,l,i;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("polygon"),l=T("circle"),i=T("polygon"),s(o,"x","0"),s(o,"y","0"),s(o,"width","16"),s(o,"height","16"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(a,"points","16,0 16,16 8,8"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","cw-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(l,"cx","8"),s(l,"cy","8"),s(l,"r","7"),s(l,"fill-opacity","0"),s(l,"mask","url(#cw-mask)"),s(l,"class","svelte-106cdxr"),s(i,"points","11,5 15,5 15,1"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){J(u,e,c),f(e,n),f(n,r),f(r,o),f(r,a),f(e,l),f(e,i)},p:x,d(u){u&&H(e)}}}function To(t){let e,n,r,o;return{c(){e=T("svg"),n=T("rect"),r=T("line"),o=T("rect"),s(n,"y","3"),s(n,"x","1"),s(n,"width","5"),s(n,"height","10"),s(n,"rx","1"),s(n,"ry","1"),s(n,"class","svelte-106cdxr"),s(r,"y1","1"),s(r,"x1","8"),s(r,"y2","15"),s(r,"x2","8"),s(r,"class","svelte-106cdxr"),s(o,"y","3"),s(o,"x","10"),s(o,"width","5"),s(o,"height","10"),s(o,"rx","1"),s(o,"ry","1"),s(o,"fill-opacity","0"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,l){J(a,e,l),f(e,n),f(e,r),f(e,o)},p:x,d(a){a&&H(e)}}}function Co(t){let e,n,r,o;return{c(){e=T("svg"),n=T("rect"),r=T("line"),o=T("rect"),s(n,"x","3"),s(n,"y","1"),s(n,"width","10"),s(n,"height","5"),s(n,"rx","1"),s(n,"ry","1"),s(n,"class","svelte-106cdxr"),s(r,"x1","1"),s(r,"y1","8"),s(r,"x2","15"),s(r,"y2","8"),s(r,"class","svelte-106cdxr"),s(o,"x","3"),s(o,"y","10"),s(o,"width","10"),s(o,"height","5"),s(o,"rx","1"),s(o,"ry","1"),s(o,"fill-opacity","0"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,l){J(a,e,l),f(e,n),f(e,r),f(e,o)},p:x,d(a){a&&H(e)}}}function Lo(t){let e,n,r,o,a,l;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("rect"),l=T("polygon"),s(o,"x","1"),s(o,"y","1"),s(o,"width","15"),s(o,"height","15"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(r,"id","undo-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(a,"x","-8"),s(a,"y","8"),s(a,"width","23"),s(a,"height","23"),s(a,"rx","2"),s(a,"ry","2"),s(a,"fill-opacity","0"),s(a,"mask","url(#undo-mask)"),s(a,"class","svelte-106cdxr"),s(l,"points","4,5 1,8 4,11"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){J(i,e,u),f(e,n),f(n,r),f(r,o),f(e,a),f(e,l)},p:x,d(i){i&&H(e)}}}function Io(t){let e,n,r,o,a,l;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("rect"),l=T("polygon"),s(o,"x","0"),s(o,"y","1"),s(o,"width","15"),s(o,"height","15"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(r,"id","redo-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(a,"x","1"),s(a,"y","8"),s(a,"width","23"),s(a,"height","23"),s(a,"rx","2"),s(a,"ry","2"),s(a,"fill-opacity","0"),s(a,"mask","url(#redo-mask)"),s(a,"class","svelte-106cdxr"),s(l,"points","12,5 15,8 12,11"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){J(i,e,u),f(e,n),f(n,r),f(r,o),f(e,a),f(e,l)},p:x,d(i){i&&H(e)}}}function Eo(t){let e,n,r,o,a,l,i,u,c;return{c(){e=y("div"),n=Fe(`
        Color that changes`),r=y("input"),o=B(),a=y("br"),l=Fe(`
        Rotatable `),i=y("input"),oe(e,"height","4.75em"),s(e,"class","svelte-106cdxr"),s(r,"type","color"),oe(r,"height","3em"),r.disabled=!0,s(i,"type","checkbox")},m(h,d){J(h,e,d),J(h,n,d),J(h,r,d),J(h,o,d),J(h,a,d),J(h,l,d),J(h,i,d),i.checked=t[3],u||(c=z(i,"change",t[71]),u=!0)},p(h,d){d[0]&8&&(i.checked=h[3])},i:x,o:x,d(h){h&&H(e),h&&H(n),h&&H(r),h&&H(o),h&&H(a),h&&H(l),h&&H(i),u=!1,c()}}}function Oo(t){let e,n,r,o,a,l,i,u,c,h,d,m,b,g,v,N,k;function j(I){t[63](I)}function G(I){t[64](I)}let q={stateChange:Et.remove,pushState:t[11],$$slots:{default:[No]},$$scope:{ctx:t}};t[6]!==void 0&&(q.currentShape=t[6]),t[5]!==void 0&&(q.shapes=t[5]),e=new In({props:q}),O.push(()=>R(e,"currentShape",j)),O.push(()=>R(e,"shapes",G));function P(I){t[65](I)}function S(I){t[66](I)}let E={stateChange:Et.duplicate,pushState:t[11],$$slots:{default:[Mo]},$$scope:{ctx:t}};t[6]!==void 0&&(E.currentShape=t[6]),t[5]!==void 0&&(E.shapes=t[5]),a=new In({props:E}),O.push(()=>R(a,"currentShape",P)),O.push(()=>R(a,"shapes",S));function w(I){t[67](I)}function L(I){t[68](I)}let K={stateChange:Et.moveToTop,pushState:t[11],$$slots:{default:[Bo]},$$scope:{ctx:t}};t[6]!==void 0&&(K.currentShape=t[6]),t[5]!==void 0&&(K.shapes=t[5]),h=new In({props:K}),O.push(()=>R(h,"currentShape",w)),O.push(()=>R(h,"shapes",L));function te(I){t[69](I)}function ne(I){t[70](I)}let X={stateChange:Et.moveToBottom,pushState:t[11],$$slots:{default:[Go]},$$scope:{ctx:t}};return t[6]!==void 0&&(X.currentShape=t[6]),t[5]!==void 0&&(X.shapes=t[5]),g=new In({props:X}),O.push(()=>R(g,"currentShape",te)),O.push(()=>R(g,"shapes",ne)),{c(){ue(e.$$.fragment),o=B(),ue(a.$$.fragment),u=B(),c=y("div"),ue(h.$$.fragment),b=B(),ue(g.$$.fragment),s(c,"class","svelte-106cdxr")},m(I,V){ie(e,I,V),J(I,o,V),ie(a,I,V),J(I,u,V),J(I,c,V),ie(h,c,null),f(c,b),ie(g,c,null),k=!0},p(I,V){const M={};V[2]&262144&&(M.$$scope={dirty:V,ctx:I}),!n&&V[0]&64&&(n=!0,M.currentShape=I[6],D(()=>n=!1)),!r&&V[0]&32&&(r=!0,M.shapes=I[5],D(()=>r=!1)),e.$set(M);const W={};V[2]&262144&&(W.$$scope={dirty:V,ctx:I}),!l&&V[0]&64&&(l=!0,W.currentShape=I[6],D(()=>l=!1)),!i&&V[0]&32&&(i=!0,W.shapes=I[5],D(()=>i=!1)),a.$set(W);const A={};V[2]&262144&&(A.$$scope={dirty:V,ctx:I}),!d&&V[0]&64&&(d=!0,A.currentShape=I[6],D(()=>d=!1)),!m&&V[0]&32&&(m=!0,A.shapes=I[5],D(()=>m=!1)),h.$set(A);const Q={};V[2]&262144&&(Q.$$scope={dirty:V,ctx:I}),!v&&V[0]&64&&(v=!0,Q.currentShape=I[6],D(()=>v=!1)),!N&&V[0]&32&&(N=!0,Q.shapes=I[5],D(()=>N=!1)),g.$set(Q)},i(I){k||(U(e.$$.fragment,I),U(a.$$.fragment,I),U(h.$$.fragment,I),U(g.$$.fragment,I),k=!0)},o(I){Y(e.$$.fragment,I),Y(a.$$.fragment,I),Y(h.$$.fragment,I),Y(g.$$.fragment,I),k=!1},d(I){ae(e,I),I&&H(o),ae(a,I),I&&H(u),I&&H(c),ae(h),ae(g)}}}function No(t){let e,n,r,o,a,l;return{c(){e=T("svg"),n=T("polyline"),r=T("line"),o=T("line"),a=T("line"),l=T("polyline"),s(n,"points","3,5 3,15 13,15 13,5"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(r,"x1","6"),s(r,"x2","6"),s(r,"y1","5"),s(r,"y2","13"),s(r,"class","svelte-106cdxr"),s(o,"x1","10"),s(o,"x2","10"),s(o,"y1","5"),s(o,"y2","13"),s(o,"class","svelte-106cdxr"),s(a,"x1","2"),s(a,"x2","14"),s(a,"y1","3"),s(a,"y2","3"),s(a,"class","svelte-106cdxr"),s(l,"points","5,3 5,1 11,1 11,3"),s(l,"fill-opacity","0"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){J(i,e,u),f(e,n),f(e,r),f(e,o),f(e,a),f(e,l)},p:x,d(i){i&&H(e)}}}function Mo(t){let e,n,r,o,a,l,i;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("rect"),l=T("rect"),i=T("rect"),s(o,"x","0"),s(o,"y","0"),s(o,"width","16"),s(o,"height","16"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(a,"x","1"),s(a,"y","1"),s(a,"width","11"),s(a,"height","11"),s(a,"rx","2"),s(a,"ry","2"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","copy-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(l,"x","4"),s(l,"y","4"),s(l,"width","11"),s(l,"height","11"),s(l,"rx","2"),s(l,"ry","2"),s(l,"fill-opacity","0"),s(l,"mask","url(#copy-mask)"),s(l,"class","svelte-106cdxr"),s(i,"x","1"),s(i,"y","1"),s(i,"width","11"),s(i,"height","11"),s(i,"rx","2"),s(i,"ry","2"),s(i,"fill-opacity","0"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){J(u,e,c),f(e,n),f(n,r),f(r,o),f(r,a),f(e,l),f(e,i)},p:x,d(u){u&&H(e)}}}function Bo(t){let e,n,r,o,a,l,i,u;return{c(){e=T("svg"),n=T("defs"),r=T("mask"),o=T("rect"),a=T("rect"),l=T("rect"),i=T("rect"),u=T("rect"),s(o,"x","0"),s(o,"y","0"),s(o,"width","16"),s(o,"height","16"),oe(o,"fill","white"),s(o,"stroke-opacity","0"),s(o,"class","svelte-106cdxr"),s(a,"x","4"),s(a,"y","4"),s(a,"width","8"),s(a,"height","8"),s(a,"rx","2"),s(a,"ry","2"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","top-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(l,"x","1"),s(l,"y","1"),s(l,"width","7"),s(l,"height","7"),s(l,"rx","2"),s(l,"ry","2"),s(l,"mask","url(#top-mask)"),s(l,"class","svelte-106cdxr"),s(i,"x","8"),s(i,"y","8"),s(i,"width","7"),s(i,"height","7"),s(i,"rx","2"),s(i,"ry","2"),s(i,"mask","url(#top-mask)"),s(i,"class","svelte-106cdxr"),s(u,"x","4"),s(u,"y","4"),s(u,"width","8"),s(u,"height","8"),s(u,"rx","2"),s(u,"ry","2"),s(u,"fill-opacity","0"),s(u,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(c,h){J(c,e,h),f(e,n),f(n,r),f(r,o),f(r,a),f(e,l),f(e,i),f(e,u)},p:x,d(c){c&&H(e)}}}function Go(t){let e,n,r,o;return{c(){e=T("svg"),n=T("rect"),r=T("rect"),o=T("rect"),s(n,"x","4"),s(n,"y","4"),s(n,"width","8"),s(n,"height","8"),s(n,"rx","2"),s(n,"ry","2"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(r,"x","1"),s(r,"y","1"),s(r,"width","7"),s(r,"height","7"),s(r,"rx","2"),s(r,"ry","2"),s(r,"class","svelte-106cdxr"),s(o,"x","8"),s(o,"y","8"),s(o,"width","7"),s(o,"height","7"),s(o,"rx","2"),s(o,"ry","2"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,l){J(a,e,l),f(e,n),f(e,r),f(e,o)},p:x,d(a){a&&H(e)}}}function Do(t){let e,n,r,o,a,l,i,u,c,h,d,m,b,g,v,N,k,j,G,q,P,S,E,w,L,K,te,ne,X,I,V,M,W,A,Q,ke,me,Ae,Ce,ze,be,Le,ge,Xe,he,F,Z,re,$,de,He,it,Qe,at,ce,pe,_e,Se,le,se,ve,Ne,Mt,Bt,nn,Me,Gt,Dt,sn,Be,Rt,Ut,rn,Ye,we,$e,ut,je,Ft,ln,pt,on,_,ct,xe,Gn,Is,an,Es,ht,Pt,et,Dn,Os,un,Ns,dt,qt,tt,Rn,Ms,cn,Bs,_t,At,nt,Un,Gs,fn,Ds,Ie,Fn,Pn,qn,An,Hn,Rs,Te,gt,Ge,Yn,jn,Jn,Vn,Us,De,zn,Xn,Wn,Kn,Fs,pn,Ps,Ee,Re,Zn,qs,As,mt,Ht,Qn,Hs;function Gr(p){t[20](p)}function Dr(p){t[21](p)}let $n={tool:ee.SELECT,$$slots:{default:[ho]},$$scope:{ctx:t}};t[6]!==void 0&&($n.currentShape=t[6]),t[1]!==void 0&&($n.currentTool=t[1]),k=new rt({props:$n}),O.push(()=>R(k,"currentShape",Gr)),O.push(()=>R(k,"currentTool",Dr));function Rr(p){t[22](p)}function Ur(p){t[23](p)}let xn={tool:ee.LINE,$$slots:{default:[_o]},$$scope:{ctx:t}};t[6]!==void 0&&(xn.currentShape=t[6]),t[1]!==void 0&&(xn.currentTool=t[1]),P=new rt({props:xn}),O.push(()=>R(P,"currentShape",Rr)),O.push(()=>R(P,"currentTool",Ur));function Fr(p){t[24](p)}function Pr(p){t[25](p)}let es={tool:ee.RECTANGLE,$$slots:{default:[go]},$$scope:{ctx:t}};t[6]!==void 0&&(es.currentShape=t[6]),t[1]!==void 0&&(es.currentTool=t[1]),L=new rt({props:es}),O.push(()=>R(L,"currentShape",Fr)),O.push(()=>R(L,"currentTool",Pr));function qr(p){t[26](p)}function Ar(p){t[27](p)}let ts={tool:ee.FILLED_RECTANGLE,$$slots:{default:[mo]},$$scope:{ctx:t}};t[6]!==void 0&&(ts.currentShape=t[6]),t[1]!==void 0&&(ts.currentTool=t[1]),X=new rt({props:ts}),O.push(()=>R(X,"currentShape",qr)),O.push(()=>R(X,"currentTool",Ar));function Hr(p){t[28](p)}function Yr(p){t[29](p)}let ns={tool:ee.CIRCLE,$$slots:{default:[bo]},$$scope:{ctx:t}};t[6]!==void 0&&(ns.currentShape=t[6]),t[1]!==void 0&&(ns.currentTool=t[1]),W=new rt({props:ns}),O.push(()=>R(W,"currentShape",Hr)),O.push(()=>R(W,"currentTool",Yr));function jr(p){t[30](p)}function Jr(p){t[31](p)}let ss={tool:ee.FILLED_CIRCLE,$$slots:{default:[vo]},$$scope:{ctx:t}};t[6]!==void 0&&(ss.currentShape=t[6]),t[1]!==void 0&&(ss.currentTool=t[1]),me=new rt({props:ss}),O.push(()=>R(me,"currentShape",jr)),O.push(()=>R(me,"currentTool",Jr));function Vr(p){t[32](p)}function zr(p){t[33](p)}let rs={tool:ee.POLYGON,$$slots:{default:[yo]},$$scope:{ctx:t}};t[6]!==void 0&&(rs.currentShape=t[6]),t[1]!==void 0&&(rs.currentTool=t[1]),be=new rt({props:rs}),O.push(()=>R(be,"currentShape",Vr)),O.push(()=>R(be,"currentTool",zr));function Xr(p){t[34](p)}function Wr(p){t[35](p)}let ls={tool:ee.FILLED_POLYGON,$$slots:{default:[So]},$$scope:{ctx:t}};t[6]!==void 0&&(ls.currentShape=t[6]),t[1]!==void 0&&(ls.currentTool=t[1]),he=new rt({props:ls}),O.push(()=>R(he,"currentShape",Xr)),O.push(()=>R(he,"currentTool",Wr));function Kr(p){t[37](p)}function Zr(p){t[38](p)}let os={transformation:It.rotateCCW,pushState:t[11],$$slots:{default:[wo]},$$scope:{ctx:t}};t[6]!==void 0&&(os.currentShape=t[6]),t[5]!==void 0&&(os.shapes=t[5]),Se=new Ln({props:os}),O.push(()=>R(Se,"currentShape",Kr)),O.push(()=>R(Se,"shapes",Zr));function Qr(p){t[39](p)}function $r(p){t[40](p)}let is={transformation:It.rotateCW,pushState:t[11],$$slots:{default:[ko]},$$scope:{ctx:t}};t[6]!==void 0&&(is.currentShape=t[6]),t[5]!==void 0&&(is.shapes=t[5]),Ne=new Ln({props:is}),O.push(()=>R(Ne,"currentShape",Qr)),O.push(()=>R(Ne,"shapes",$r));function xr(p){t[41](p)}function el(p){t[42](p)}let as={transformation:It.flipHorizontal,pushState:t[11],$$slots:{default:[To]},$$scope:{ctx:t}};t[6]!==void 0&&(as.currentShape=t[6]),t[5]!==void 0&&(as.shapes=t[5]),Me=new Ln({props:as}),O.push(()=>R(Me,"currentShape",xr)),O.push(()=>R(Me,"shapes",el));function tl(p){t[43](p)}function nl(p){t[44](p)}let us={transformation:It.flipVertical,pushState:t[11],$$slots:{default:[Co]},$$scope:{ctx:t}};t[6]!==void 0&&(us.currentShape=t[6]),t[5]!==void 0&&(us.shapes=t[5]),Be=new Ln({props:us}),O.push(()=>R(Be,"currentShape",tl)),O.push(()=>R(Be,"shapes",nl));function sl(p){t[45](p)}let Ys={rotate:t[3]?47.15:0};t[5]!==void 0&&(Ys.shapes=t[5]),je=new Vt({props:Ys}),O.push(()=>R(je,"shapes",sl));function rl(p){t[46](p)}let js={rotate:t[3]?300.82:0};t[5]!==void 0&&(js.shapes=t[5]),xe=new Vt({props:js}),O.push(()=>R(xe,"shapes",rl));function ll(p){t[47](p)}let Js={rotate:t[3]?216.39:0};t[5]!==void 0&&(Js.shapes=t[5]),et=new Vt({props:Js}),O.push(()=>R(et,"shapes",ll));function ol(p){t[48](p)}let Vs={rotate:t[3]?137.96:0};t[5]!==void 0&&(Vs.shapes=t[5]),tt=new Vt({props:Vs}),O.push(()=>R(tt,"shapes",ol));function il(p){t[49](p)}let zs={rotate:t[3]?90:0};t[5]!==void 0&&(zs.shapes=t[5]),nt=new Vt({props:zs}),O.push(()=>R(nt,"shapes",il));function al(p){t[50](p)}function ul(p){t[51](p)}function cl(p){t[52](p)}function fl(p){t[53](p)}function pl(p){t[54](p)}let bt={pushState:t[11]};t[1]!==void 0&&(bt.currentTool=t[1]),t[2]!==void 0&&(bt.currentColor=t[2]),t[6]!==void 0&&(bt.currentShape=t[6]),t[4]!==void 0&&(bt.snapToGrid=t[4]),t[5]!==void 0&&(bt.shapes=t[5]),Ie=new ro({props:bt}),O.push(()=>R(Ie,"currentTool",al)),O.push(()=>R(Ie,"currentColor",ul)),O.push(()=>R(Ie,"currentShape",cl)),O.push(()=>R(Ie,"snapToGrid",fl)),O.push(()=>R(Ie,"shapes",pl));function hl(p){t[55](p)}function dl(p){t[56](p)}function _l(p){t[57](p)}function gl(p){t[58](p)}let Yt={historyChange:Bn.undo,$$slots:{default:[Lo]},$$scope:{ctx:t}};t[7]!==void 0&&(Yt.undoStack=t[7]),t[8]!==void 0&&(Yt.redoStack=t[8]),t[5]!==void 0&&(Yt.shapes=t[5]),t[6]!==void 0&&(Yt.currentShape=t[6]),Ge=new fr({props:Yt}),O.push(()=>R(Ge,"undoStack",hl)),O.push(()=>R(Ge,"redoStack",dl)),O.push(()=>R(Ge,"shapes",_l)),O.push(()=>R(Ge,"currentShape",gl));function ml(p){t[59](p)}function bl(p){t[60](p)}function vl(p){t[61](p)}function yl(p){t[62](p)}let jt={historyChange:Bn.redo,$$slots:{default:[Io]},$$scope:{ctx:t}};t[7]!==void 0&&(jt.undoStack=t[7]),t[8]!==void 0&&(jt.redoStack=t[8]),t[5]!==void 0&&(jt.shapes=t[5]),t[6]!==void 0&&(jt.currentShape=t[6]),De=new fr({props:jt}),O.push(()=>R(De,"undoStack",ml)),O.push(()=>R(De,"redoStack",bl)),O.push(()=>R(De,"shapes",vl)),O.push(()=>R(De,"currentShape",yl));const Xs=[Oo,Eo],st=[];function Ws(p,C){return p[6]&&p[1]===ee.SELECT?0:1}return Ee=Ws(t),Re=st[Ee]=Xs[Ee](t),{c(){e=y("dialog"),n=y("div"),r=y("b"),r.textContent="Shape",o=B(),a=y("div"),l=y("p"),l.textContent="Name/",i=B(),u=y("b"),c=Fe(t[0]),h=B(),d=y("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="100%" height="100%" class="svelte-106cdxr"><line x1="1" y1="1" x2="15" y2="15" stroke="white" stroke-linecap="round" stroke-width="2" class="svelte-106cdxr"></line><line x1="1" y1="15" x2="15" y2="1" stroke="white" stroke-linecap="round" stroke-width="2" class="svelte-106cdxr"></line></svg>',m=B(),b=y("br"),g=B(),v=y("div"),N=y("div"),ue(k.$$.fragment),q=B(),ue(P.$$.fragment),w=B(),ue(L.$$.fragment),ne=B(),ue(X.$$.fragment),M=B(),ue(W.$$.fragment),ke=B(),ue(me.$$.fragment),ze=B(),ue(be.$$.fragment),Xe=B(),ue(he.$$.fragment),re=B(),$=y("div"),de=T("svg"),He=T("path"),it=B(),Qe=y("div"),at=B(),ce=y("input"),pe=B(),_e=y("div"),ue(Se.$$.fragment),ve=B(),ue(Ne.$$.fragment),nn=B(),ue(Me.$$.fragment),sn=B(),ue(Be.$$.fragment),rn=B(),Ye=y("div"),we=y("div"),$e=y("div"),ut=y("div"),ue(je.$$.fragment),ln=B(),pt=y("p"),pt.textContent="9",on=B(),_=y("div"),ct=y("div"),ue(xe.$$.fragment),Is=B(),an=y("p"),an.textContent="12",Es=B(),ht=y("div"),Pt=y("div"),ue(et.$$.fragment),Os=B(),un=y("p"),un.textContent="20",Ns=B(),dt=y("div"),qt=y("div"),ue(tt.$$.fragment),Ms=B(),cn=y("p"),cn.textContent="30",Bs=B(),_t=y("div"),At=y("div"),ue(nt.$$.fragment),Gs=B(),fn=y("p"),fn.textContent="50",Ds=B(),ue(Ie.$$.fragment),Rs=B(),Te=y("div"),gt=y("div"),ue(Ge.$$.fragment),Us=B(),ue(De.$$.fragment),Fs=B(),pn=y("div"),Ps=B(),Re.c(),Zn=B(),qs=y("br"),As=Fe(`
      Snap to Grid `),mt=y("input"),s(r,"class","svelte-106cdxr"),oe(l,"margin-right","0.25em"),s(l,"class","svelte-106cdxr"),s(u,"contenteditable","true"),oe(u,"margin-left","0"),s(u,"class","svelte-106cdxr"),t[0]===void 0&&Ze(()=>t[18].call(u)),s(a,"class","svelte-106cdxr"),s(d,"class","svelte-106cdxr"),s(n,"class","title-bar svelte-106cdxr"),s(N,"class","svelte-106cdxr"),s(He,"d","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"),s(He,"class","svelte-106cdxr"),s(de,"xmlns","http://www.w3.org/2000/svg"),s(de,"viewBox","0 0 512 512"),s(de,"class","icon svelte-106cdxr"),oe(Qe,"width","0.5em"),s(Qe,"class","svelte-106cdxr"),s(ce,"type","color"),oe($,"align-items","center"),s($,"class","svelte-106cdxr"),s(_e,"class","svelte-106cdxr"),s(v,"class","tool-bar svelte-106cdxr"),oe(ut,"width","9px"),s(ut,"class","svelte-106cdxr"),s(pt,"class","svelte-106cdxr"),s($e,"class","svelte-106cdxr"),oe(ct,"width","12px"),s(ct,"class","svelte-106cdxr"),s(an,"class","svelte-106cdxr"),s(_,"class","svelte-106cdxr"),oe(Pt,"width","20px"),s(Pt,"class","svelte-106cdxr"),s(un,"class","svelte-106cdxr"),s(ht,"class","svelte-106cdxr"),oe(qt,"width","30px"),s(qt,"class","svelte-106cdxr"),s(cn,"class","svelte-106cdxr"),s(dt,"class","svelte-106cdxr"),oe(At,"width","50px"),s(At,"class","svelte-106cdxr"),s(fn,"class","svelte-106cdxr"),s(_t,"class","svelte-106cdxr"),s(we,"class","tool-tray-left svelte-106cdxr"),s(gt,"class","svelte-106cdxr"),oe(pn,"height","3em"),s(pn,"class","svelte-106cdxr"),s(mt,"type","checkbox"),s(Te,"class","tool-tray-right svelte-106cdxr"),s(Ye,"class","middle svelte-106cdxr"),s(e,"class","editor svelte-106cdxr")},m(p,C){J(p,e,C),f(e,n),f(n,r),f(n,o),f(n,a),f(a,l),f(a,i),f(a,u),f(u,c),t[0]!==void 0&&(u.textContent=t[0]),f(n,h),f(n,d),t[19](n),f(e,m),f(e,b),f(e,g),f(e,v),f(v,N),ie(k,N,null),f(N,q),ie(P,N,null),f(N,w),ie(L,N,null),f(N,ne),ie(X,N,null),f(N,M),ie(W,N,null),f(N,ke),ie(me,N,null),f(N,ze),ie(be,N,null),f(N,Xe),ie(he,N,null),f(v,re),f(v,$),f($,de),f(de,He),f($,it),f($,Qe),f($,at),f($,ce),Zs(ce,t[2]),f(v,pe),f(v,_e),ie(Se,_e,null),f(_e,ve),ie(Ne,_e,null),f(_e,nn),ie(Me,_e,null),f(_e,sn),ie(Be,_e,null),f(e,rn),f(e,Ye),f(Ye,we),f(we,$e),f($e,ut),ie(je,ut,null),f($e,ln),f($e,pt),f(we,on),f(we,_),f(_,ct),ie(xe,ct,null),f(_,Is),f(_,an),f(we,Es),f(we,ht),f(ht,Pt),ie(et,Pt,null),f(ht,Os),f(ht,un),f(we,Ns),f(we,dt),f(dt,qt),ie(tt,qt,null),f(dt,Ms),f(dt,cn),f(we,Bs),f(we,_t),f(_t,At),ie(nt,At,null),f(_t,Gs),f(_t,fn),f(Ye,Ds),ie(Ie,Ye,null),f(Ye,Rs),f(Ye,Te),f(Te,gt),ie(Ge,gt,null),f(gt,Us),ie(De,gt,null),f(Te,Fs),f(Te,pn),f(Te,Ps),st[Ee].m(Te,null),f(Te,Zn),f(Te,qs),f(Te,As),f(Te,mt),mt.checked=t[4],t[73](e),Ht=!0,Qn||(Hs=[z(u,"input",t[18]),z(d,"click",t[12]),z(n,"mousedown",t[13]),z(n,"mouseup",t[14]),z(ce,"input",t[36]),z(mt,"change",t[72]),z(e,"mousemove",t[15])],Qn=!0)},p(p,C){(!Ht||C[0]&1)&&Il(c,p[0]),C[0]&1&&p[0]!==u.textContent&&(u.textContent=p[0]);const hn={};C[2]&262144&&(hn.$$scope={dirty:C,ctx:p}),!j&&C[0]&64&&(j=!0,hn.currentShape=p[6],D(()=>j=!1)),!G&&C[0]&2&&(G=!0,hn.currentTool=p[1],D(()=>G=!1)),k.$set(hn);const dn={};C[2]&262144&&(dn.$$scope={dirty:C,ctx:p}),!S&&C[0]&64&&(S=!0,dn.currentShape=p[6],D(()=>S=!1)),!E&&C[0]&2&&(E=!0,dn.currentTool=p[1],D(()=>E=!1)),P.$set(dn);const _n={};C[2]&262144&&(_n.$$scope={dirty:C,ctx:p}),!K&&C[0]&64&&(K=!0,_n.currentShape=p[6],D(()=>K=!1)),!te&&C[0]&2&&(te=!0,_n.currentTool=p[1],D(()=>te=!1)),L.$set(_n);const gn={};C[2]&262144&&(gn.$$scope={dirty:C,ctx:p}),!I&&C[0]&64&&(I=!0,gn.currentShape=p[6],D(()=>I=!1)),!V&&C[0]&2&&(V=!0,gn.currentTool=p[1],D(()=>V=!1)),X.$set(gn);const mn={};C[2]&262144&&(mn.$$scope={dirty:C,ctx:p}),!A&&C[0]&64&&(A=!0,mn.currentShape=p[6],D(()=>A=!1)),!Q&&C[0]&2&&(Q=!0,mn.currentTool=p[1],D(()=>Q=!1)),W.$set(mn);const bn={};C[2]&262144&&(bn.$$scope={dirty:C,ctx:p}),!Ae&&C[0]&64&&(Ae=!0,bn.currentShape=p[6],D(()=>Ae=!1)),!Ce&&C[0]&2&&(Ce=!0,bn.currentTool=p[1],D(()=>Ce=!1)),me.$set(bn);const vn={};C[2]&262144&&(vn.$$scope={dirty:C,ctx:p}),!Le&&C[0]&64&&(Le=!0,vn.currentShape=p[6],D(()=>Le=!1)),!ge&&C[0]&2&&(ge=!0,vn.currentTool=p[1],D(()=>ge=!1)),be.$set(vn);const yn={};C[2]&262144&&(yn.$$scope={dirty:C,ctx:p}),!F&&C[0]&64&&(F=!0,yn.currentShape=p[6],D(()=>F=!1)),!Z&&C[0]&2&&(Z=!0,yn.currentTool=p[1],D(()=>Z=!1)),he.$set(yn),C[0]&4&&Zs(ce,p[2]);const Sn={};C[2]&262144&&(Sn.$$scope={dirty:C,ctx:p}),!le&&C[0]&64&&(le=!0,Sn.currentShape=p[6],D(()=>le=!1)),!se&&C[0]&32&&(se=!0,Sn.shapes=p[5],D(()=>se=!1)),Se.$set(Sn);const wn={};C[2]&262144&&(wn.$$scope={dirty:C,ctx:p}),!Mt&&C[0]&64&&(Mt=!0,wn.currentShape=p[6],D(()=>Mt=!1)),!Bt&&C[0]&32&&(Bt=!0,wn.shapes=p[5],D(()=>Bt=!1)),Ne.$set(wn);const kn={};C[2]&262144&&(kn.$$scope={dirty:C,ctx:p}),!Gt&&C[0]&64&&(Gt=!0,kn.currentShape=p[6],D(()=>Gt=!1)),!Dt&&C[0]&32&&(Dt=!0,kn.shapes=p[5],D(()=>Dt=!1)),Me.$set(kn);const Tn={};C[2]&262144&&(Tn.$$scope={dirty:C,ctx:p}),!Rt&&C[0]&64&&(Rt=!0,Tn.currentShape=p[6],D(()=>Rt=!1)),!Ut&&C[0]&32&&(Ut=!0,Tn.shapes=p[5],D(()=>Ut=!1)),Be.$set(Tn);const cs={};C[0]&8&&(cs.rotate=p[3]?47.15:0),!Ft&&C[0]&32&&(Ft=!0,cs.shapes=p[5],D(()=>Ft=!1)),je.$set(cs);const fs={};C[0]&8&&(fs.rotate=p[3]?300.82:0),!Gn&&C[0]&32&&(Gn=!0,fs.shapes=p[5],D(()=>Gn=!1)),xe.$set(fs);const ps={};C[0]&8&&(ps.rotate=p[3]?216.39:0),!Dn&&C[0]&32&&(Dn=!0,ps.shapes=p[5],D(()=>Dn=!1)),et.$set(ps);const hs={};C[0]&8&&(hs.rotate=p[3]?137.96:0),!Rn&&C[0]&32&&(Rn=!0,hs.shapes=p[5],D(()=>Rn=!1)),tt.$set(hs);const ds={};C[0]&8&&(ds.rotate=p[3]?90:0),!Un&&C[0]&32&&(Un=!0,ds.shapes=p[5],D(()=>Un=!1)),nt.$set(ds);const vt={};!Fn&&C[0]&2&&(Fn=!0,vt.currentTool=p[1],D(()=>Fn=!1)),!Pn&&C[0]&4&&(Pn=!0,vt.currentColor=p[2],D(()=>Pn=!1)),!qn&&C[0]&64&&(qn=!0,vt.currentShape=p[6],D(()=>qn=!1)),!An&&C[0]&16&&(An=!0,vt.snapToGrid=p[4],D(()=>An=!1)),!Hn&&C[0]&32&&(Hn=!0,vt.shapes=p[5],D(()=>Hn=!1)),Ie.$set(vt);const yt={};C[2]&262144&&(yt.$$scope={dirty:C,ctx:p}),!Yn&&C[0]&128&&(Yn=!0,yt.undoStack=p[7],D(()=>Yn=!1)),!jn&&C[0]&256&&(jn=!0,yt.redoStack=p[8],D(()=>jn=!1)),!Jn&&C[0]&32&&(Jn=!0,yt.shapes=p[5],D(()=>Jn=!1)),!Vn&&C[0]&64&&(Vn=!0,yt.currentShape=p[6],D(()=>Vn=!1)),Ge.$set(yt);const St={};C[2]&262144&&(St.$$scope={dirty:C,ctx:p}),!zn&&C[0]&128&&(zn=!0,St.undoStack=p[7],D(()=>zn=!1)),!Xn&&C[0]&256&&(Xn=!0,St.redoStack=p[8],D(()=>Xn=!1)),!Wn&&C[0]&32&&(Wn=!0,St.shapes=p[5],D(()=>Wn=!1)),!Kn&&C[0]&64&&(Kn=!0,St.currentShape=p[6],D(()=>Kn=!1)),De.$set(St);let _s=Ee;Ee=Ws(p),Ee===_s?st[Ee].p(p,C):(lt(),Y(st[_s],1,1,()=>{st[_s]=null}),ot(),Re=st[Ee],Re?Re.p(p,C):(Re=st[Ee]=Xs[Ee](p),Re.c()),U(Re,1),Re.m(Te,Zn)),C[0]&16&&(mt.checked=p[4])},i(p){Ht||(U(k.$$.fragment,p),U(P.$$.fragment,p),U(L.$$.fragment,p),U(X.$$.fragment,p),U(W.$$.fragment,p),U(me.$$.fragment,p),U(be.$$.fragment,p),U(he.$$.fragment,p),U(Se.$$.fragment,p),U(Ne.$$.fragment,p),U(Me.$$.fragment,p),U(Be.$$.fragment,p),U(je.$$.fragment,p),U(xe.$$.fragment,p),U(et.$$.fragment,p),U(tt.$$.fragment,p),U(nt.$$.fragment,p),U(Ie.$$.fragment,p),U(Ge.$$.fragment,p),U(De.$$.fragment,p),U(Re),Ht=!0)},o(p){Y(k.$$.fragment,p),Y(P.$$.fragment,p),Y(L.$$.fragment,p),Y(X.$$.fragment,p),Y(W.$$.fragment,p),Y(me.$$.fragment,p),Y(be.$$.fragment,p),Y(he.$$.fragment,p),Y(Se.$$.fragment,p),Y(Ne.$$.fragment,p),Y(Me.$$.fragment,p),Y(Be.$$.fragment,p),Y(je.$$.fragment,p),Y(xe.$$.fragment,p),Y(et.$$.fragment,p),Y(tt.$$.fragment,p),Y(nt.$$.fragment,p),Y(Ie.$$.fragment,p),Y(Ge.$$.fragment,p),Y(De.$$.fragment,p),Y(Re),Ht=!1},d(p){p&&H(e),t[19](null),ae(k),ae(P),ae(L),ae(X),ae(W),ae(me),ae(be),ae(he),ae(Se),ae(Ne),ae(Me),ae(Be),ae(je),ae(xe),ae(et),ae(tt),ae(nt),ae(Ie),ae(Ge),ae(De),st[Ee].d(),t[73](null),Qn=!1,ye(Hs)}}}const dr="#ffffff";function Ro(t,e,n){let r="default",o=ee.SELECT,a=dr,l=0,i=!0,u=!1,c=[],h=null,d=[],m=[],b=!1,g,v,N;const k=()=>{const _=structuredClone(c);JSON.stringify(_)!=JSON.stringify(d.at(-1))&&(d.push(_),n(8,m=[]))},j=()=>{n(0,r="default"),n(1,o=ee.SELECT),n(2,a=dr),l=0,n(3,i=!0),n(5,c=[]),n(6,h=null),n(7,d=[]),n(8,m=[])},G=_=>{if(!Ss.validateJSONShape(_))throw new Error("Invalid shape.");n(0,r=_.name),l=_.editableColorIndex,n(3,i=_.rotate);for(var ct of _.elements)c.push(fe.fromJSON(ct));n(5,c)};let{closeHook:q}=e;const P=_=>{_&&G(_),g.showModal()},S=()=>({name:r,elements:c.map(_=>fe.toJSON(_)),editableColorIndex:l,rotate:i}),E=()=>{q(S()),j(),g.close()};function w(_){_.target===N&&(b=!0,v={x:_.clientX,y:_.clientY})}function L(_){b=!1}function K(_){b&&(n(9,g.style.left=`${g.offsetLeft+_.clientX-v.x}px`,g),n(9,g.style.top=`${g.offsetTop+_.clientY-v.y}px`,g),v={x:_.clientX,y:_.clientY})}function te(){r=this.textContent,n(0,r)}function ne(_){O[_?"unshift":"push"](()=>{N=_,n(10,N)})}function X(_){h=_,n(6,h)}function I(_){o=_,n(1,o)}function V(_){h=_,n(6,h)}function M(_){o=_,n(1,o)}function W(_){h=_,n(6,h)}function A(_){o=_,n(1,o)}function Q(_){h=_,n(6,h)}function ke(_){o=_,n(1,o)}function me(_){h=_,n(6,h)}function Ae(_){o=_,n(1,o)}function Ce(_){h=_,n(6,h)}function ze(_){o=_,n(1,o)}function be(_){h=_,n(6,h)}function Le(_){o=_,n(1,o)}function ge(_){h=_,n(6,h)}function Xe(_){o=_,n(1,o)}function he(){a=this.value,n(2,a)}function F(_){h=_,n(6,h)}function Z(_){c=_,n(5,c)}function re(_){h=_,n(6,h)}function $(_){c=_,n(5,c)}function de(_){h=_,n(6,h)}function He(_){c=_,n(5,c)}function it(_){h=_,n(6,h)}function Qe(_){c=_,n(5,c)}function at(_){c=_,n(5,c)}function ce(_){c=_,n(5,c)}function pe(_){c=_,n(5,c)}function _e(_){c=_,n(5,c)}function Se(_){c=_,n(5,c)}function le(_){o=_,n(1,o)}function se(_){a=_,n(2,a)}function ve(_){h=_,n(6,h)}function Ne(_){u=_,n(4,u)}function Mt(_){c=_,n(5,c)}function Bt(_){d=_,n(7,d)}function nn(_){m=_,n(8,m)}function Me(_){c=_,n(5,c)}function Gt(_){h=_,n(6,h)}function Dt(_){d=_,n(7,d)}function sn(_){m=_,n(8,m)}function Be(_){c=_,n(5,c)}function Rt(_){h=_,n(6,h)}function Ut(_){h=_,n(6,h)}function rn(_){c=_,n(5,c)}function Ye(_){h=_,n(6,h)}function we(_){c=_,n(5,c)}function $e(_){h=_,n(6,h)}function ut(_){c=_,n(5,c)}function je(_){h=_,n(6,h)}function Ft(_){c=_,n(5,c)}function ln(){i=this.checked,n(3,i)}function pt(){u=this.checked,n(4,u)}function on(_){O[_?"unshift":"push"](()=>{g=_,n(9,g)})}return t.$$set=_=>{"closeHook"in _&&n(16,q=_.closeHook)},[r,o,a,i,u,c,h,d,m,g,N,k,E,w,L,K,q,P,te,ne,X,I,V,M,W,A,Q,ke,me,Ae,Ce,ze,be,Le,ge,Xe,he,F,Z,re,$,de,He,it,Qe,at,ce,pe,_e,Se,le,se,ve,Ne,Mt,Bt,nn,Me,Gt,Dt,sn,Be,Rt,Ut,rn,Ye,we,$e,ut,je,Ft,ln,pt,on]}class Uo extends qe{constructor(e){super(),Pe(this,e,Ro,Do,Oe,{closeHook:16,open:17},null,[-1,-1,-1])}get open(){return this.$$.ctx[17]}}function _r(t,e,n){const r=t.slice();return r[45]=e[n],r[46]=e,r[47]=n,r}function gr(t){let e,n;return e=new jl({props:{closeLibrary:t[13],addNewShapes:t[14]}}),{c(){ue(e.$$.fragment)},m(r,o){ie(e,r,o),n=!0},p(r,o){const a={};o[0]&8192&&(a.closeLibrary=r[13]),o[0]&16384&&(a.addNewShapes=r[14]),e.$set(a)},i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){ae(e,r)}}}function mr(t){let e,n,r,o,a,l,i,u;return{c(){e=y("div"),n=y("button"),n.innerHTML='<img class="button-image-left svelte-1o39pry" src="icons/library-icon.png" alt="library"/>Library',r=B(),o=y("button"),o.innerHTML='<img class="button-image-left svelte-1o39pry" src="icons/model-icon.png" alt="model"/>Model',s(n,"class","dropdown-button library-button svelte-1o39pry"),s(o,"class","dropdown-button model-button svelte-1o39pry"),s(e,"class","dropdown-content svelte-1o39pry")},m(c,h){J(c,e,h),f(e,n),f(e,r),f(e,o),l=!0,i||(u=[z(n,"click",function(){Ve(t[0].openLibrary())&&t[0].openLibrary().apply(this,arguments)}),z(o,"click",t[23])],i=!0)},p(c,h){t=c},i(c){l||(Ze(()=>{l&&(a||(a=Mn(e,Zt,{duration:500},!0)),a.run(1))}),l=!0)},o(c){a||(a=Mn(e,Zt,{duration:500},!1)),a.run(0),l=!1},d(c){c&&H(e),c&&a&&a.end(),i=!1,ye(u)}}}function br(t,e){let n,r,o,a,l,i,u,c,h,d,m,b,g,v,N=e[45].name+"",k,j,G,q,P,S,E,w;function L(...A){return e[25](e[45],...A)}function K(...A){return e[26](e[45],...A)}function te(...A){return e[27](e[45],...A)}function ne(...A){return e[28](e[45],...A)}function X(){return e[29](e[45],e[46],e[47])}function I(){return e[30](e[45],e[46],e[47])}function V(){return e[31](e[45],e[46],e[47])}function M(){return e[32](e[45],e[46],e[47])}function W(){return e[33](e[45])}return{key:t,first:null,c(){n=y("button"),r=y("div"),o=y("button"),a=B(),l=y("button"),c=B(),h=y("div"),d=y("div"),m=y("img"),g=B(),v=y("div"),k=Fe(N),G=B(),s(o,"aria-label","Duplicate shape"),s(o,"class","duplicate-icon svelte-1o39pry"),oe(o,"display",e[45].hover?"block":"none"),oe(o,"background-image","url('icons/duplicate-icon.png')"),s(l,"aria-label","Delete shape"),s(l,"class",i="delete-icon "+(e[45].deletable?"":"button-disabled")+" svelte-1o39pry"),oe(l,"display",e[45].hover?"block":"none"),oe(l,"background-image","url('icons/delete-icon.png')"),l.disabled=u=!e[45].deletable,s(r,"class","shape-selector-item-buttons svelte-1o39pry"),s(m,"class","shape-selector-item-image svelte-1o39pry"),ft(m.src,b=e[45].image)||s(m,"src",b),s(m,"alt",""),s(d,"class","shape-selector-item-image-div svelte-1o39pry"),s(v,"class",j="shape-selector-item-name "+(e[45].id===e[8]?"font-selected":"")+" svelte-1o39pry"),s(h,"class","shape-selector-details svelte-1o39pry"),s(n,"class",q="shape-selector-item "+(e[45].id===e[8]?"selected":"")+" "+(e[9].includes(e[45].id)?"recently-imported":"")+" "+(e[45].isDeleting?"is-deleting":"")+" svelte-1o39pry"),this.first=n},m(A,Q){J(A,n,Q),f(n,r),f(r,o),f(r,a),f(r,l),f(n,c),f(n,h),f(h,d),f(d,m),f(h,g),f(h,v),f(v,k),f(n,G),E||(w=[z(o,"click",L),z(o,"keydown",K),z(l,"click",te),z(l,"keydown",ne),kl(P=e[17].call(null,n,e[9].includes(e[45].id))),z(n,"mouseenter",X),z(n,"mouseleave",I),z(n,"focus",V),z(n,"blur",M),z(n,"click",W)],E=!0)},p(A,Q){e=A,Q[0]&128&&oe(o,"display",e[45].hover?"block":"none"),Q[0]&128&&i!==(i="delete-icon "+(e[45].deletable?"":"button-disabled")+" svelte-1o39pry")&&s(l,"class",i),Q[0]&128&&oe(l,"display",e[45].hover?"block":"none"),Q[0]&128&&u!==(u=!e[45].deletable)&&(l.disabled=u),Q[0]&128&&!ft(m.src,b=e[45].image)&&s(m,"src",b),Q[0]&128&&N!==(N=e[45].name+"")&&Lr(k,N),Q[0]&384&&j!==(j="shape-selector-item-name "+(e[45].id===e[8]?"font-selected":"")+" svelte-1o39pry")&&s(v,"class",j),Q[0]&896&&q!==(q="shape-selector-item "+(e[45].id===e[8]?"selected":"")+" "+(e[9].includes(e[45].id)?"recently-imported":"")+" "+(e[45].isDeleting?"is-deleting":"")+" svelte-1o39pry")&&s(n,"class",q),P&&Ve(P.update)&&Q[0]&640&&P.update.call(null,e[9].includes(e[45].id))},i(A){S||Ze(()=>{S=Fl(n,Zt,{}),S.start()})},o:x,d(A){A&&H(n),E=!1,ye(w)}}}function Fo(t){let e,n,r,o,a,l,i,u,c,h,d,m,b,g,v,N,k,j,G,q,P,S,E,w,L,K,te,ne,X,I,V,M,W,A,Q,ke,me,Ae,Ce,ze,be,Le,ge,Xe,he,F,Z,re=[],$=new Map,de,He,it;function Qe(le){t[18](le)}let at={closeHook:t[16]};t[1]!==void 0&&(at.open=t[1]),e=new Uo({props:at}),O.push(()=>R(e,"open",Qe));let ce=t[12]&&gr(t),pe=t[11]&&mr(t),_e=t[7];const Se=le=>le[45].id;for(let le=0;le<_e.length;le+=1){let se=_r(t,_e,le),ve=Se(se);$.set(ve,re[le]=br(ve,se))}return{c(){ue(e.$$.fragment),r=B(),o=y("div"),ce&&ce.c(),a=B(),l=y("div"),i=y("div"),u=y("div"),c=y("div"),c.innerHTML=`<img src="icons/header-logo.png" alt="header logo" class="svelte-1o39pry"/> 
          <h2 class="svelte-1o39pry">Shape Editor</h2>`,h=B(),d=y("button"),d.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-1o39pry"/>',m=B(),b=y("div"),g=y("div"),v=y("h3"),v.textContent="Selection Mode",N=B(),k=y("div"),j=y("div"),G=y("button"),q=y("img"),S=Fe("Turtle"),w=B(),L=y("button"),K=y("img"),ne=Fe("Link"),I=B(),V=y("div"),M=y("button"),M.innerHTML='<img class="button-image-right svelte-1o39pry" src="icons/create-new-icon.png" alt="create new"/>Create New',W=B(),A=y("div"),Q=y("button"),ke=y("img"),Ae=Fe("Import From..."),ze=B(),pe&&pe.c(),be=B(),Le=y("div"),ge=y("input"),Xe=B(),he=y("div"),F=y("div"),Z=y("div");for(let le=0;le<re.length;le+=1)re[le].c();s(c,"class","shape-selector-header-logo svelte-1o39pry"),s(d,"class","close-button svelte-1o39pry"),s(u,"class","shape-selector-header svelte-1o39pry"),s(v,"class","svelte-1o39pry"),s(q,"class","button-image-left svelte-1o39pry"),ft(q.src,P="icons/turtle-icon.png")||s(q,"src",P),s(q,"alt","turtle button"),s(G,"class",E="turtle-button "+(t[6]==="turtle"?"selected-button":"unselected-button")+" svelte-1o39pry"),s(K,"class","button-image-left svelte-1o39pry"),ft(K.src,te="icons/link-icon.png")||s(K,"src",te),s(K,"alt","link button"),s(L,"class",X="link-button "+(t[6]==="link"?"selected-button":"unselected-button")+" svelte-1o39pry"),s(j,"class","mode-selector-buttons svelte-1o39pry"),s(M,"class","create-new-button svelte-1o39pry"),s(ke,"class","button-image-right svelte-1o39pry"),ft(ke.src,me="icons/import-icon.png")||s(ke,"src",me),s(ke,"alt","import"),s(Q,"class",Ce="import-shapes-button "+(t[11]?"clicked":"")+" svelte-1o39pry"),s(A,"class","dropdown svelte-1o39pry"),s(V,"class","shape-selector-buttons svelte-1o39pry"),s(k,"class","selector-buttons svelte-1o39pry"),s(g,"class","mode-selector svelte-1o39pry"),ge.value=t[5],s(ge,"placeholder","Search"),oe(ge,"background-image","url('icons/search-icon.png')"),s(ge,"class","svelte-1o39pry"),s(Le,"class","shape-selector-search svelte-1o39pry"),s(Z,"class","shape-selector-grid-inner svelte-1o39pry"),s(F,"class","scrollbar-wrapper svelte-1o39pry"),s(he,"class","shape-selector-grid svelte-1o39pry"),s(b,"class","inner-container svelte-1o39pry"),s(i,"class","shape-selector svelte-1o39pry"),s(l,"class","shape-selector-dialog svelte-1o39pry"),oe(l,"display",t[10]?"block":"none",1)},m(le,se){ie(e,le,se),J(le,r,se),J(le,o,se),ce&&ce.m(o,null),f(o,a),f(o,l),f(l,i),f(i,u),f(u,c),f(u,h),f(u,d),t[20](u),f(i,m),f(i,b),f(b,g),f(g,v),f(g,N),f(g,k),f(k,j),f(j,G),f(G,q),f(G,S),f(j,w),f(j,L),f(L,K),f(L,ne),f(k,I),f(k,V),f(V,M),f(V,W),f(V,A),f(A,Q),f(Q,ke),f(Q,Ae),f(A,ze),pe&&pe.m(A,null),f(b,be),f(b,Le),f(Le,ge),f(b,Xe),f(b,he),f(he,F),f(F,Z);for(let ve=0;ve<re.length;ve+=1)re[ve]&&re[ve].m(Z,null);t[34](Z),t[35](l),de=!0,He||(it=[z(d,"click",t[19]),z(G,"click",t[21]),z(L,"click",t[22]),z(M,"click",t[15]()),z(Q,"click",function(){Ve(t[0].importShapes())&&t[0].importShapes().apply(this,arguments)}),z(ge,"input",t[24])],He=!0)},p(le,se){t=le;const ve={};!n&&se[0]&2&&(n=!0,ve.open=t[1],D(()=>n=!1)),e.$set(ve),t[12]?ce?(ce.p(t,se),se[0]&4096&&U(ce,1)):(ce=gr(t),ce.c(),U(ce,1),ce.m(o,a)):ce&&(lt(),Y(ce,1,1,()=>{ce=null}),ot()),(!de||se[0]&64&&E!==(E="turtle-button "+(t[6]==="turtle"?"selected-button":"unselected-button")+" svelte-1o39pry"))&&s(G,"class",E),(!de||se[0]&64&&X!==(X="link-button "+(t[6]==="link"?"selected-button":"unselected-button")+" svelte-1o39pry"))&&s(L,"class",X),(!de||se[0]&2048&&Ce!==(Ce="import-shapes-button "+(t[11]?"clicked":"")+" svelte-1o39pry"))&&s(Q,"class",Ce),t[11]?pe?(pe.p(t,se),se[0]&2048&&U(pe,1)):(pe=mr(t),pe.c(),U(pe,1),pe.m(A,null)):pe&&(lt(),Y(pe,1,1,()=>{pe=null}),ot()),(!de||se[0]&32&&ge.value!==t[5])&&(ge.value=t[5]),se[0]&897&&(_e=t[7],re=Br(re,se,Se,1,t,_e,$,Z,Mr,br,null,_r)),(!de||se[0]&1024)&&oe(l,"display",t[10]?"block":"none",1)},i(le){if(!de){U(e.$$.fragment,le),U(ce),U(pe);for(let se=0;se<_e.length;se+=1)U(re[se]);de=!0}},o(le){Y(e.$$.fragment,le),Y(ce),Y(pe),de=!1},d(le){ae(e,le),le&&H(r),le&&H(o),ce&&ce.d(),t[20](null),pe&&pe.d();for(let se=0;se<re.length;se+=1)re[se].d();t[34](null),t[35](null),He=!1,ye(it)}}}function Po(t,e,n){let r;const o=F=>F?()=>{try{r(F)}catch(Z){console.error(Z)}}:()=>{r()};function a(F){c.createSVGShape(F.name,ws.toSVG(F))}let l,i,u,c,h,d,m=[],b=null,g=[],v=!0,N=!1,k=!1,j,G;const q=Ue([]),P=Ue([]),S=Ue(null),E=Ue([]),w=Ue(!0),L=Ue(!1),K=Ue(!1);Ir(()=>{const F={onUpdateShapes:$=>{q.set($)},onUpdateFilteredShapes:$=>{P.set($)},onUpdateSelectedItemId:$=>{S.set($)},onUpdateDialogOpen:$=>{w.set($)},onUpdateImportButtonSelected:$=>{L.set($)},onUpdateLibraryOpen:$=>{K.set($)},onUpdateRecentlyImportedShapes:$=>{E.set($)}};n(0,c=new ql(document.getElementById("Container"),F));let Z=!1,re=[0,0];n(13,j=()=>{c.closeLibrary()}),n(14,G=$=>{c.addNewShapes($)}),i.addEventListener("mousedown",$=>{Z=!0,re=[l.offsetLeft-$.clientX,l.offsetTop-$.clientY]},!0),document.addEventListener("mouseup",()=>{Z=!1},!0),document.addEventListener("mousemove",$=>{$.preventDefault(),Z&&(n(2,l.style.left=$.clientX+re[0]+"px",l),n(2,l.style.top=$.clientY+re[1]+"px",l))},!0)});function te(F,Z){if(Z){let re=F.offsetTop-u.offsetTop;(re<u.scrollTop||re>u.scrollTop+u.offsetHeight)&&n(4,u.scrollTop=re,u)}}q.subscribe(F=>{}),P.subscribe(F=>{n(7,m=F)}),S.subscribe(F=>{n(8,b=F)}),w.subscribe(F=>{n(10,v=F)}),L.subscribe(F=>{n(11,N=F)}),K.subscribe(F=>{n(12,k=F)}),E.subscribe(F=>{n(9,g=F)});function ne(F){r=F,n(1,r)}const X=()=>c.toggleDialog();function I(F){O[F?"unshift":"push"](()=>{i=F,n(3,i)})}const V=()=>{n(6,d="turtle"),c.filterShapes("turtle")},M=()=>{n(6,d="link"),c.filterShapes("link")},W=()=>console.log("model"),A=F=>c.handleSearch(F.target),Q=(F,Z)=>{Z.stopPropagation(),c.duplicateShape(F.id)},ke=(F,Z)=>{Z.key==="Enter"&&(Z.stopPropagation(),c.duplicateShape(F.id))},me=(F,Z)=>{Z.stopPropagation(),c.deleteShape(F.id)},Ae=(F,Z)=>{Z.key==="Enter"&&(Z.stopPropagation(),c.deleteShape(F.id))},Ce=(F,Z,re)=>n(7,Z[re].hover=!0,m),ze=(F,Z,re)=>n(7,Z[re].hover=!1,m),be=(F,Z,re)=>n(7,Z[re].hover=!0,m),Le=(F,Z,re)=>n(7,Z[re].hover=!1,m),ge=F=>c.setSelectedItemId(F.id);function Xe(F){O[F?"unshift":"push"](()=>{u=F,n(4,u)})}function he(F){O[F?"unshift":"push"](()=>{l=F,n(2,l)})}return t.$$.update=()=>{t.$$.dirty[0]&1&&c&&(n(5,h=c.searchTerm),n(6,d=c.currentType),n(7,m=c.filteredShapes),c.shapes,n(8,b=c.selectedItemId),n(9,g=c.recentlyImportedShapeIds),n(10,v=c.dialogOpen),n(11,N=c.importButtonSelected),n(12,k=c.libraryOpen))},[c,r,l,i,u,h,d,m,b,g,v,N,k,j,G,o,a,te,ne,X,I,V,M,W,A,Q,ke,me,Ae,Ce,ze,be,Le,ge,Xe,he]}class qo extends qe{constructor(e){super(),Pe(this,e,Po,Fo,Oe,{},null,[-1,-1])}}new qo({target:document.getElementById("app")});
