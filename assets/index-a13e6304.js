(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function Z(){}const bs=t=>t;function cl(t,e){for(const n in e)t[n]=e[n];return t}function ur(t){return t()}function js(){return Object.create(null)}function ye(t){t.forEach(ur)}function Je(t){return typeof t=="function"}function Ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let wn;function ct(t,e){return wn||(wn=document.createElement("a")),wn.href=e,t===wn.href}function fl(t){return Object.keys(t).length===0}function Zt(t,e,n,r){if(t){const l=cr(t,e,n,r);return t[0](l)}}function cr(t,e,n,r){return t[1]&&r?cl(n.ctx.slice(),t[1](r(e))):n.ctx}function $t(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const a=[],o=Math.max(e.dirty.length,l.length);for(let i=0;i<o;i+=1)a[i]=e.dirty[i]|l[i];return a}return e.dirty|l}return e.dirty}function xt(t,e,n,r,l,a){if(l){const o=cr(e,n,r,a);t.p(o,l)}}function en(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function pl(t){return t&&Je(t.destroy)?t.destroy:Z}const fr=typeof window<"u";let pr=fr?()=>window.performance.now():()=>Date.now(),vs=fr?t=>requestAnimationFrame(t):Z;const Lt=new Set;function hr(t){Lt.forEach(e=>{e.c(t)||(Lt.delete(e),e.f())}),Lt.size!==0&&vs(hr)}function dr(t){let e;return Lt.size===0&&vs(hr),{promise:new Promise(n=>{Lt.add(e={c:t,f:n})}),abort(){Lt.delete(e)}}}function f(t,e){t.appendChild(e)}function _r(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function hl(t){const e=v("style");return dl(_r(t),e),e.sheet}function dl(t,e){return f(t.head||t,e),e.sheet}function j(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function zt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function je(t){return document.createTextNode(t)}function R(){return je(" ")}function ys(){return je("")}function J(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _l(t){return Array.from(t.childNodes)}function gr(t,e){e=""+e,t.data!==e&&(t.data=e)}function gl(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Js(t,e){t.value=e??""}function oe(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Vs(t,e,n){t.classList[n?"add":"remove"](e)}function ml(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,r,e),l}const Ln=new Map;let In=0;function bl(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function vl(t,e){const n={stylesheet:hl(e),rules:{}};return Ln.set(t,n),n}function ps(t,e,n,r,l,a,o,i=0){const u=16.666/r;let c=`{
`;for(let k=0;k<=1;k+=u){const L=e+(n-e)*a(k);c+=k*100+`%{${o(L,1-L)}}
`}const h=c+`100% {${o(n,1-n)}}
}`,d=`__svelte_${bl(h)}_${i}`,b=_r(t),{stylesheet:g,rules:m}=Ln.get(b)||vl(b,t);m[d]||(m[d]=!0,g.insertRule(`@keyframes ${d} ${h}`,g.cssRules.length));const T=t.style.animation||"";return t.style.animation=`${T?`${T}, `:""}${d} ${r}ms linear ${l}ms 1 both`,In+=1,d}function hs(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?a=>a.indexOf(e)<0:a=>a.indexOf("__svelte")===-1),l=n.length-r.length;l&&(t.style.animation=r.join(", "),In-=l,In||yl())}function yl(){vs(()=>{In||(Ln.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&A(e)}),Ln.clear())})}let Kt;function Xt(t){Kt=t}function Sl(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function mr(t){Sl().$$.on_mount.push(t)}const wt=[],O=[];let It=[];const ds=[],wl=Promise.resolve();let _s=!1;function kl(){_s||(_s=!0,wl.then(br))}function Qe(t){It.push(t)}function F(t){ds.push(t)}const fs=new Set;let vt=0;function br(){if(vt!==0)return;const t=Kt;do{try{for(;vt<wt.length;){const e=wt[vt];vt++,Xt(e),Tl(e.$$)}}catch(e){throw wt.length=0,vt=0,e}for(Xt(null),wt.length=0,vt=0;O.length;)O.pop()();for(let e=0;e<It.length;e+=1){const n=It[e];fs.has(n)||(fs.add(n),n())}It.length=0}while(wt.length);for(;ds.length;)ds.pop()();_s=!1,fs.clear(),Xt(t)}function Tl(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Qe)}}function Cl(t){const e=[],n=[];It.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),It=e}let Jt;function vr(){return Jt||(Jt=Promise.resolve(),Jt.then(()=>{Jt=null})),Jt}function Wt(t,e,n){t.dispatchEvent(ml(`${e?"intro":"outro"}${n}`))}const Cn=new Set;let We;function lt(){We={r:0,c:[],p:We}}function ot(){We.r||ye(We.c),We=We.p}function G(t,e){t&&t.i&&(Cn.delete(t),t.i(e))}function H(t,e,n,r){if(t&&t.o){if(Cn.has(t))return;Cn.add(t),We.c.push(()=>{Cn.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const yr={duration:0};function Ll(t,e,n){const r={direction:"in"};let l=e(t,n,r),a=!1,o,i,u=0;function c(){o&&hs(t,o)}function h(){const{delay:b=0,duration:g=300,easing:m=bs,tick:T=Z,css:k}=l||yr;k&&(o=ps(t,0,1,g,b,m,k,u++)),T(0,1);const L=pr()+b,D=L+g;i&&i.abort(),a=!0,Qe(()=>Wt(t,!0,"start")),i=dr(B=>{if(a){if(B>=D)return T(1,0),Wt(t,!0,"end"),c(),a=!1;if(B>=L){const Y=m((B-L)/g);T(Y,1-Y)}}return a})}let d=!1;return{start(){d||(d=!0,hs(t),Je(l)?(l=l(r),vr().then(h)):h())},invalidate(){d=!1},end(){a&&(c(),a=!1)}}}function En(t,e,n,r){const l={direction:"both"};let a=e(t,n,l),o=r?0:1,i=null,u=null,c=null;function h(){c&&hs(t,c)}function d(g,m){const T=g.b-o;return m*=Math.abs(T),{a:o,b:g.b,d:T,duration:m,start:g.start,end:g.start+m,group:g.group}}function b(g){const{delay:m=0,duration:T=300,easing:k=bs,tick:L=Z,css:D}=a||yr,B={start:pr()+m,b:g};g||(B.group=We,We.r+=1),i||u?u=B:(D&&(h(),c=ps(t,o,g,T,m,k,D)),g&&L(0,1),i=d(B,T),Qe(()=>Wt(t,g,"start")),dr(Y=>{if(u&&Y>u.start&&(i=d(u,T),u=null,Wt(t,i.b,"start"),D&&(h(),c=ps(t,o,i.b,i.duration,0,k,a.css))),i){if(Y>=i.end)L(o=i.b,1-o),Wt(t,i.b,"end"),u||(i.b?h():--i.group.r||ye(i.group.c)),i=null;else if(Y>=i.start){const q=Y-i.start;o=i.a+i.d*k(q/i.duration),L(o,1-o)}}return!!(i||u)}))}return{run(g){Je(a)?vr().then(()=>{a=a(l),b(g)}):b(g)},end(){h(),i=u=null}}}function Sr(t,e){t.d(1),e.delete(t.key)}function wr(t,e,n,r,l,a,o,i,u,c,h,d){let b=t.length,g=a.length,m=b;const T={};for(;m--;)T[t[m].key]=m;const k=[],L=new Map,D=new Map,B=[];for(m=g;m--;){const N=d(l,a,m),M=n(N);let E=o.get(M);E?r&&B.push(()=>E.p(N,e)):(E=c(M,N),E.c()),L.set(M,k[m]=E),M in T&&D.set(M,Math.abs(m-T[M]))}const Y=new Set,q=new Set;function y(N){G(N,1),N.m(i,h),o.set(N.key,N),h=N.first,g--}for(;b&&g;){const N=k[g-1],M=t[b-1],E=N.key,z=M.key;N===M?(h=N.first,b--,g--):L.has(z)?!o.has(E)||Y.has(E)?y(N):q.has(z)?b--:D.get(E)>D.get(z)?(q.add(E),y(N)):(Y.add(z),b--):(u(M,o),b--)}for(;b--;){const N=t[b];L.has(N.key)||u(N,o)}for(;g;)y(k[g-1]);return ye(B),k}function P(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function ue(t){t&&t.c()}function ie(t,e,n,r){const{fragment:l,after_update:a}=t.$$;l&&l.m(e,n),r||Qe(()=>{const o=t.$$.on_mount.map(ur).filter(Je);t.$$.on_destroy?t.$$.on_destroy.push(...o):ye(o),t.$$.on_mount=[]}),a.forEach(Qe)}function ae(t,e){const n=t.$$;n.fragment!==null&&(Cl(n.after_update),ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Il(t,e){t.$$.dirty[0]===-1&&(wt.push(t),kl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ue(t,e,n,r,l,a,o,i=[-1]){const u=Kt;Xt(t);const c=t.$$={fragment:null,ctx:[],props:a,update:Z,not_equal:l,bound:js(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:js(),dirty:i,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},(d,b,...g)=>{const m=g.length?g[0]:b;return c.ctx&&l(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),h&&Il(t,d)),b}):[],c.update(),h=!0,ye(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const d=_l(e.target);c.fragment&&c.fragment.l(d),d.forEach(A)}else c.fragment&&c.fragment.c();e.intro&&G(t.$$.fragment),ie(t,e.target,e.anchor,e.customElement),br()}Xt(u)}class Fe{$destroy(){ae(this,1),this.$destroy=Z}$on(e,n){if(!Je(n))return Z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!fl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class El{constructor(e,n){this.shapes=[],this.filteredShapes=[],this.selectedItemId=null,this.recentlyImportedShapeIds=[],this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!1,isDeleting:!1},{id:2,name:"default",image:"shapes/down-arrow.png",type:"link",hover:!1,deletable:!1,isDeleting:!1}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=n,this.filterShapes(this.currentType),this.dialogOpen=!0,this.importButtonSelected=!1,this.libraryOpen=!1}toggleDialog(){this.dialogOpen=!this.dialogOpen,this.config.onUpdateDialogOpen(this.dialogOpen)}openLibrary(){this.libraryOpen=!0,this.importButtonSelected=!1,this.config.onUpdateLibraryOpen(this.libraryOpen),this.config.onUpdateImportButtonSelected(this.importButtonSelected)}closeLibrary(){console.log("close library"),this.libraryOpen=!1,this.config.onUpdateLibraryOpen(this.libraryOpen)}createShape(){this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds);const e={id:Math.max(...this.shapes.map(n=>n.id))+1,name:"new default",image:"shapes/down-arrow.png",type:this.currentType,hover:!1,deletable:!0,isDeleting:!1};this.shapes.unshift(e),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}createSVGShape(e,n){const r="data:image/svg+xml;base64,"+btoa(`<svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">${n}</svg>`);this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds);const l={id:Math.max(...this.shapes.map(a=>a.id))+1,name:e,image:r,type:this.currentType,hover:!1,deletable:!0,isDeleting:!1};this.shapes.unshift(l),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}importShapes(){this.importButtonSelected=!this.importButtonSelected,this.config.onUpdateImportButtonSelected(this.importButtonSelected)}duplicateShape(e){const n=this.shapes.find(r=>r.id===e);if(n){const{name:r}=n,l=r.match(/^(.*?)(\s(\d+))?$/);if(l){const a=l[1],o=[];for(const g of this.shapes)if(g.name.indexOf(a)===0){const m=g.name.match(/^.*\s(\d+)$/);m&&o.push(Number(m[1]))}let i=-1;for(let g=0;g<this.shapes.length;g++)if(this.shapes[g].id===e){i=g;break}let u=i;if(o.length>=1){const g=Math.max(...o);for(let m=0;m<this.shapes.length;m++)if(this.shapes[m].name===`${a} ${g}`){u=m;break}}const c=o.length?Math.max(...o)+1:1,h=`${a} ${c}`,d={...n,name:h,hover:!1,deletable:!0},b=Math.max(...this.shapes.map(g=>g.id))+1;d.id=b,this.shapes.splice(u+1,0,d),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)}}}addNewShapes(e){this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds),e.forEach(n=>{n.id=Math.max(...this.shapes.map(r=>r.id))+1,n.type=this.currentType,n.hover=!1,n.deletable=!0,n.name==="default"&&(n.deletable=!1),this.shapes.push(n),this.recentlyImportedShapeIds.push(n.id)}),this.shapes.sort((n,r)=>n.name==="default"?-1:r.name==="default"?1:n.name.localeCompare(r.name)),this.shapes=[...this.shapes],this.config.onUpdateShapes(this.shapes),this.filterShapes(this.currentType),this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds)}deleteShape(e){console.log("delete shape");let n=-1,r=-1;for(let l=0;l<this.shapes.length;l++)this.shapes[l].id===e&&(n=l);for(let l=0;l<this.filteredShapes.length;l++)this.filteredShapes[l].id===e&&(r=l);n!==-1&&r!==-1&&(this.shapes[n].isDeleting=!0,this.filteredShapes[r].isDeleting=!0,this.shapes=[...this.shapes],this.filteredShapes=[...this.filteredShapes],this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes),setTimeout(()=>{this.shapes.splice(n,1),this.shapes=[...this.shapes],this.handleSearch(this.searchTerm),this.config.onUpdateShapes(this.shapes),this.config.onUpdateFilteredShapes(this.filteredShapes)},500))}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let n=0;n<this.shapes.length;n++){const r=this.shapes[n];r.type===this.currentType&&r.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())!==-1&&this.filteredShapes.push(r)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){this.selectedItemId===e?this.selectedItemId=null:this.selectedItemId=e,console.log(this.shapes.find(n=>n.id===this.selectedItemId)),this.recentlyImportedShapeIds=[],this.config.onUpdateRecentlyImportedShapes(this.recentlyImportedShapeIds),this.config.onUpdateSelectedItemId(this.selectedItemId)}}class Ol{constructor(e,n){this.shapes=[],this.filteredShapes=[],this.selectedItemIds=[],this.parent=e,this.shapes=[{id:1,name:"default",image:"shapes/down-arrow.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:2,name:"ghost",image:"shapes/ghost.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:3,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:4,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:5,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:6,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:7,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:8,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:9,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1},{id:10,name:"turtle",image:"shapes/cute-turtle.png",type:"turtle",hover:!1,deletable:!0,isDeleting:!1}],this.searchTerm="",this.filteredShapes=this.shapes,this.currentType="turtle",this.config=n,this.filterShapes(this.currentType),this.dialogOpen=!0}filterShapes(e){this.currentType=e,this.filteredShapes=[];for(let n=0;n<this.shapes.length;n++){const r=this.shapes[n];r.type===this.currentType&&r.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())!==-1&&this.filteredShapes.push(r)}this.config.onUpdateFilteredShapes(this.filteredShapes)}handleSearch(e){this.searchTerm=e,this.filterShapes(this.currentType),this.config.onUpdateFilteredShapes(this.filteredShapes)}setSelectedItemId(e){const n=this.selectedItemIds.indexOf(e);n>-1?this.selectedItemIds.splice(n,1):this.selectedItemIds.push(e),console.log(this.selectedItemIds.map(r=>this.shapes.find(l=>l.id===r))),this.config.onUpdateSelectedItemIds([...this.selectedItemIds])}}const yt=[];function Ge(t,e=Z){let n;const r=new Set;function l(i){if(Ie(t,i)&&(t=i,n)){const u=!yt.length;for(const c of r)c[1](),yt.push(c,t);if(u){for(let c=0;c<yt.length;c+=2)yt[c][0](yt[c+1]);yt.length=0}}}function a(i){l(i(t))}function o(i,u=Z){const c=[i,u];return r.add(c),r.size===1&&(n=e(l)||Z),i(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:l,update:a,subscribe:o}}function Qt(t,{delay:e=0,duration:n=400,easing:r=bs}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:a=>`opacity: ${a*l}`}}function zs(t,e,n){const r=t.slice();return r[23]=e[n],r[24]=e,r[25]=n,r}function Xs(t,e){let n,r,l,a,o,i,u,c=e[23].name+"",h,d,b,g,m,T;function k(){return e[11](e[23],e[24],e[25])}function L(){return e[12](e[23],e[24],e[25])}function D(){return e[13](e[23],e[24],e[25])}function B(){return e[14](e[23],e[24],e[25])}function Y(){return e[15](e[23])}return{key:t,first:null,c(){n=v("button"),r=v("div"),l=v("div"),a=v("img"),i=R(),u=v("div"),h=je(c),b=R(),s(a,"class","shape-selector-item-image svelte-i5xq7v"),ct(a.src,o=e[23].image)||s(a,"src",o),s(a,"alt",""),s(l,"class","shape-selector-item-image-div svelte-i5xq7v"),s(u,"class",d="shape-selector-item-name "+(e[8].includes(e[23].id)?"font-selected":"")+" svelte-i5xq7v"),s(r,"class","shape-selector-details svelte-i5xq7v"),s(n,"class",g="shape-selector-item "+(e[8].includes(e[23].id)?"selected":"")+" svelte-i5xq7v"),this.first=n},m(q,y){j(q,n,y),f(n,r),f(r,l),f(l,a),f(r,i),f(r,u),f(u,h),f(n,b),m||(T=[J(n,"mouseenter",k),J(n,"mouseleave",L),J(n,"focus",D),J(n,"blur",B),J(n,"click",Y)],m=!0)},p(q,y){e=q,y&64&&!ct(a.src,o=e[23].image)&&s(a,"src",o),y&64&&c!==(c=e[23].name+"")&&gr(h,c),y&320&&d!==(d="shape-selector-item-name "+(e[8].includes(e[23].id)?"font-selected":"")+" svelte-i5xq7v")&&s(u,"class",d),y&320&&g!==(g="shape-selector-item "+(e[8].includes(e[23].id)?"selected":"")+" svelte-i5xq7v")&&s(n,"class",g)},d(q){q&&A(n),m=!1,ye(T)}}}function Nl(t){let e,n,r,l,a,o,i,u,c,h,d,b,g,m,T=[],k=new Map,L,D,B,Y,q,y,N,M,E,z,ee=t[6];const te=V=>V[23].id;for(let V=0;V<ee.length;V+=1){let I=zs(t,ee,V),S=te(I);k.set(S,T[V]=Xs(S,I))}return{c(){e=v("div"),n=v("div"),r=v("div"),l=v("h2"),l.textContent="Library",a=R(),o=v("button"),o.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-i5xq7v"/>',i=R(),u=v("div"),c=v("div"),h=v("input"),d=R(),b=v("div"),g=v("div"),m=v("div");for(let V=0;V<T.length;V+=1)T[V].c();L=R(),D=v("div"),B=v("div"),Y=v("button"),Y.textContent="Import",q=R(),y=v("button"),y.textContent="Cancel",s(l,"class","svelte-i5xq7v"),s(o,"class","close-button svelte-i5xq7v"),s(r,"class","shape-selector-header svelte-i5xq7v"),h.value=t[5],s(h,"placeholder","Search"),oe(h,"background-image","url('icons/search-icon.png')"),s(h,"class","svelte-i5xq7v"),s(c,"class","shape-selector-search svelte-i5xq7v"),s(m,"class","shape-selector-grid-inner svelte-i5xq7v"),s(g,"class","scrollbar-wrapper svelte-i5xq7v"),s(b,"class","shape-selector-grid svelte-i5xq7v"),s(u,"class","inner-container svelte-i5xq7v"),s(Y,"class","import-button svelte-i5xq7v"),s(y,"class","cancel-button svelte-i5xq7v"),s(B,"class","import-cancel-buttons svelte-i5xq7v"),s(D,"class","import-cancel-buttons-container svelte-i5xq7v"),s(n,"class","shape-selector-library svelte-i5xq7v"),s(e,"class","shape-selector-library-dialog svelte-i5xq7v")},m(V,I){j(V,e,I),f(e,n),f(n,r),f(r,l),f(r,a),f(r,o),t[9](r),f(n,i),f(n,u),f(u,c),f(c,h),f(u,d),f(u,b),f(b,g),f(g,m);for(let S=0;S<T.length;S+=1)T[S]&&T[S].m(m,null);f(n,L),f(n,D),f(D,B),f(B,Y),f(B,q),f(B,y),t[17](e),M=!0,E||(z=[J(o,"click",function(){Je(t[0])&&t[0].apply(this,arguments)}),J(h,"input",t[10]),J(Y,"click",t[16]),J(y,"click",function(){Je(t[0])&&t[0].apply(this,arguments)})],E=!0)},p(V,[I]){t=V,(!M||I&32&&h.value!==t[5])&&(h.value=t[5]),I&324&&(ee=t[6],T=wr(T,I,te,1,t,ee,k,m,Sr,Xs,null,zs))},i(V){M||(Qe(()=>{M&&(N||(N=En(e,Qt,{duration:500},!0)),N.run(1))}),M=!0)},o(V){N||(N=En(e,Qt,{duration:500},!1)),N.run(0),M=!1},d(V){V&&A(e),t[9](null);for(let I=0;I<T.length;I+=1)T[I].d();t[17](null),V&&N&&N.end(),E=!1,ye(z)}}}function Ml(t,e,n){let r,l,a,o,i=[],u=[],c=[],{closeLibrary:h}=e,{addNewShapes:d}=e;const b=Ge([]),g=Ge([]),m=Ge([]),T=Ge(!1);mr(()=>{const E={onUpdateShapes:te=>{b.set(te)},onUpdateFilteredShapes:te=>{g.set(te)},onUpdateSelectedItemIds:te=>{m.set(te)},onUpdateImportButtonSelected:te=>{T.set(te)}};n(2,a=new Ol(document.getElementById("Container"),E));let z=!1,ee=[0,0];l.addEventListener("mousedown",te=>{z=!0,ee=[r.offsetLeft-te.clientX,r.offsetTop-te.clientY]},!0),document.addEventListener("mouseup",()=>{z=!1},!0),document.addEventListener("mousemove",te=>{te.preventDefault(),z&&(n(3,r.style.left=te.clientX+ee[0]+"px",r),n(3,r.style.top=te.clientY+ee[1]+"px",r))},!0)}),b.subscribe(E=>{n(7,u=E)}),g.subscribe(E=>{n(6,i=E)}),m.subscribe(E=>{n(8,c=E)});function k(E){O[E?"unshift":"push"](()=>{l=E,n(4,l)})}const L=E=>a.handleSearch(E.target.value),D=(E,z,ee)=>n(6,z[ee].hover=!0,i),B=(E,z,ee)=>n(6,z[ee].hover=!1,i),Y=(E,z,ee)=>n(6,z[ee].hover=!0,i),q=(E,z,ee)=>n(6,z[ee].hover=!1,i),y=E=>a.setSelectedItemId(E.id),N=()=>{c.length>0&&(d(u.filter(E=>c.includes(E.id))),h())};function M(E){O[E?"unshift":"push"](()=>{r=E,n(3,r)})}return t.$$set=E=>{"closeLibrary"in E&&n(0,h=E.closeLibrary),"addNewShapes"in E&&n(1,d=E.addNewShapes)},t.$$.update=()=>{t.$$.dirty&4&&a&&(n(5,o=a.searchTerm),a.currentType,n(6,i=a.filteredShapes),n(7,u=a.shapes),n(8,c=a.selectedItemIds))},[h,d,a,r,l,o,i,u,c,k,L,D,B,Y,q,y,N,M]}class Bl extends Fe{constructor(e){super(),Ue(this,e,Ml,Nl,Ie,{closeLibrary:0,addNewShapes:1})}}const kt=300,Ye=100;var Ke;(t=>{function e(r,l){const a=r.getBoundingClientRect();return{x:Math.round(Ye*kt*(l.clientX-a.left)/a.width)/Ye,y:Math.round(Ye*kt*(l.clientY-a.top)/a.height)/Ye}}t.fromMouse=e;function n(r,l){return Math.round(Ye*Math.sqrt((r.x-l.x)**2+(r.y-l.y)**2))/Ye}t.l2=n})(Ke||(Ke={}));var fe;(t=>{function e(r){let l;switch(r.type){case t.Type.LINE:const a=r;l=[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2}];break;case t.Type.CIRCLE:const o=r,i=o.diam/2;l=[{x:o.x+i,y:o.y+i},{x:o.x+i,y:o.y}];break;case t.Type.RECTANGLE:const u=r;l=[{x:u.xmin,y:u.ymin},{x:u.xmax,y:u.ymax}];break;case t.Type.POLYGON:const c=r;l=c.xcors.map((h,d)=>({x:h,y:c.ycors[d]}));break}return{points:l,color:r.color,type:r.type,filled:r.filled}}t.fromJSON=e;function n(r){let l={type:r.type,color:r.color,filled:r.filled,marked:!1};switch(r.points=r.points.map(a=>({x:Math.round(Ye*a.x)/Ye,y:Math.round(Ye*a.y)/Ye})),r.type){case t.Type.LINE:return{...l,x1:r.points[0].x,y1:r.points[0].y,x2:r.points[1].x,y2:r.points[1].y};case t.Type.CIRCLE:const a=Ke.l2(r.points[0],r.points[1]);return{...l,x:r.points[0].x+a,y:r.points[0].y+a,diam:a*2};case t.Type.RECTANGLE:return{...l,xmin:Math.min(r.points[0].x,r.points[1].x),ymin:Math.min(r.points[0].y,r.points[1].y),xmax:Math.max(r.points[0].x,r.points[1].x),ymax:Math.max(r.points[0].y,r.points[1].y)};case t.Type.POLYGON:return{...l,xcors:r.points.map(o=>o.x),ycors:r.points.map(o=>o.y)}}}t.toJSON=n})(fe||(fe={}));(t=>{(e=>{e.LINE="line",e.CIRCLE="circle",e.RECTANGLE="rectangle",e.POLYGON="polygon"})(t.Type||(t.Type={}))})(fe||(fe={}));var Tt;(t=>{function e(o){return{x:kt-o.x,y:o.y}}t.flipHorizontal=e;function n(o){return{x:o.x,y:kt-o.y}}t.flipVertical=n;function r(o){return{x:kt-o.y,y:o.x}}t.rotateCW=r;function l(o){return{x:o.y,y:kt-o.x}}t.rotateCCW=l;function a(o,i){return{x:o.x+i.x,y:o.y+i.y}}t.translate=a})(Tt||(Tt={}));var x=(t=>(t[t.SELECT=0]="SELECT",t[t.LINE=1]="LINE",t[t.FILLED_RECTANGLE=2]="FILLED_RECTANGLE",t[t.RECTANGLE=3]="RECTANGLE",t[t.FILLED_CIRCLE=4]="FILLED_CIRCLE",t[t.CIRCLE=5]="CIRCLE",t[t.FILLED_POLYGON=6]="FILLED_POLYGON",t[t.POLYGON=7]="POLYGON",t))(x||{});(t=>{function e(r){switch(r){case 1:return fe.Type.LINE;case 2:case 3:return fe.Type.RECTANGLE;case 4:case 5:return fe.Type.CIRCLE;case 6:case 7:return fe.Type.POLYGON;default:return null}}t.shapeType=e;function n(r){switch(r){case 2:case 4:case 6:return!0;default:return!1}}t.isFilled=n})(x||(x={}));var Ct;(t=>{function e(a,o){return[null,o.filter(i=>i!==a)]}t.remove=e;function n(a,o){return[a,o.filter(i=>i!==a).concat(a)]}t.moveToTop=n;function r(a,o){return[a,[a].concat(o.filter(i=>i!==a))]}t.moveToBottom=r;function l(a,o){const i=structuredClone(a);return[i,o.concat(i)]}t.duplicate=l})(Ct||(Ct={}));var On;(t=>{function e(r,l,a){return r.length===0?[r,l,a]:(l.push(a),[r,l,r.pop()])}t.undo=e;function n(r,l,a){return l.length===0?[r,l,a]:(r.push(a),[r,l,l.pop()])}t.redo=n})(On||(On={}));function Dl(t){let e,n,r,l;const a=t[5].default,o=Zt(a,t,t[4],null);return{c(){e=v("button"),o&&o.c(),s(e,"class","svelte-o6ti3e"),Vs(e,"selected",t[0]===t[1])},m(i,u){j(i,e,u),o&&o.m(e,null),n=!0,r||(l=J(e,"click",t[2]),r=!0)},p(i,[u]){o&&o.p&&(!n||u&16)&&xt(o,a,i,i[4],n?$t(a,i[4],u,null):en(i[4]),null),(!n||u&3)&&Vs(e,"selected",i[0]===i[1])},i(i){n||(G(o,i),n=!0)},o(i){H(o,i),n=!1},d(i){i&&A(e),o&&o.d(i),r=!1,l()}}}function Rl(t,e,n){let{$$slots:r={},$$scope:l}=e,{currentShape:a=null}=e,{currentTool:o=x.SELECT}=e,{tool:i=x.SELECT}=e;const u=()=>{o===x.SELECT&&n(3,a=null),n(0,o=i)};return t.$$set=c=>{"currentShape"in c&&n(3,a=c.currentShape),"currentTool"in c&&n(0,o=c.currentTool),"tool"in c&&n(1,i=c.tool),"$$scope"in c&&n(4,l=c.$$scope)},[o,i,u,a,l,r]}class rt extends Fe{constructor(e){super(),Ue(this,e,Rl,Dl,Ie,{currentShape:3,currentTool:0,tool:1})}}function Gl(t){let e,n,r,l,a;return{c(){e=w("rect"),s(e,"x",n=t[2]-St/2),s(e,"y",r=t[1]-St/2),s(e,"width",St),s(e,"height",St),s(e,"cursor",t[0])},m(o,i){j(o,e,i),l||(a=[J(e,"mousedown",t[3]),J(e,"mousemove",t[4]),J(e,"mouseup",t[5])],l=!0)},p(o,[i]){i&4&&n!==(n=o[2]-St/2)&&s(e,"x",n),i&2&&r!==(r=o[1]-St/2)&&s(e,"y",r),i&1&&s(e,"cursor",o[0])},i:Z,o:Z,d(o){o&&A(e),l=!1,ye(a)}}}const St=6;function Ul(t,e,n){let r,l,a,{shape:o}=e,{index:i}=e,{canvas:u}=e,{grabbed:c=!1}=e,{pushState:h}=e;function d(m){h(),n(7,c=!0)}function b(m){c&&n(6,o.points[i]=Ke.fromMouse(u,m),o)}function g(m){n(7,c=!1)}return t.$$set=m=>{"shape"in m&&n(6,o=m.shape),"index"in m&&n(8,i=m.index),"canvas"in m&&n(9,u=m.canvas),"grabbed"in m&&n(7,c=m.grabbed),"pushState"in m&&n(10,h=m.pushState)},t.$$.update=()=>{t.$$.dirty&320&&n(2,r=o.points[i].x),t.$$.dirty&320&&n(1,l=o.points[i].y),t.$$.dirty&128&&n(0,a=c?"grabbing":"grab")},[a,l,r,d,b,g,o,c,i,u,h]}class Fl extends Fe{constructor(e){super(),Ue(this,e,Ul,Gl,Ie,{shape:6,index:8,canvas:9,grabbed:7,pushState:10})}}function Pl(t){let e,n,r,l,a,o,i;return{c(){e=w("rect"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"x",n=Math.min(t[0].points[0].x,t[0].points[1].x)),s(e,"y",r=Math.min(t[0].points[0].y,t[0].points[1].y)),s(e,"width",l=Math.abs(t[0].points[1].x-t[0].points[0].x)),s(e,"height",a=Math.abs(t[0].points[1].y-t[0].points[0].y)),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(u,c){j(u,e,c),t[13](e),o||(i=J(e,"mousedown",t[7]),o=!0)},p(u,c){c&64&&s(e,"stroke-width",u[6]),c&16&&s(e,"stroke",u[4]),c&32&&s(e,"fill",u[5]),c&1&&n!==(n=Math.min(u[0].points[0].x,u[0].points[1].x))&&s(e,"x",n),c&1&&r!==(r=Math.min(u[0].points[0].y,u[0].points[1].y))&&s(e,"y",r),c&1&&l!==(l=Math.abs(u[0].points[1].x-u[0].points[0].x))&&s(e,"width",l),c&1&&a!==(a=Math.abs(u[0].points[1].y-u[0].points[0].y))&&s(e,"height",a),c&2&&s(e,"transform",u[1]),c&8&&s(e,"cursor",u[3])},d(u){u&&A(e),t[13](null),o=!1,i()}}}function ql(t){let e,n,r,l;return{c(){e=w("polygon"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"points",n=t[0].points.map(Ws).join(" ")),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(a,o){j(a,e,o),t[12](e),r||(l=J(e,"mousedown",t[7]),r=!0)},p(a,o){o&64&&s(e,"stroke-width",a[6]),o&16&&s(e,"stroke",a[4]),o&32&&s(e,"fill",a[5]),o&1&&n!==(n=a[0].points.map(Ws).join(" "))&&s(e,"points",n),o&2&&s(e,"transform",a[1]),o&8&&s(e,"cursor",a[3])},d(a){a&&A(e),t[12](null),r=!1,l()}}}function Al(t){let e,n,r,l,a,o,i;return{c(){e=w("line"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"x1",n=t[0].points[0].x),s(e,"y1",r=t[0].points[0].y),s(e,"x2",l=t[0].points[1].x),s(e,"y2",a=t[0].points[1].y),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(u,c){j(u,e,c),t[11](e),o||(i=J(e,"mousedown",t[7]),o=!0)},p(u,c){c&64&&s(e,"stroke-width",u[6]),c&16&&s(e,"stroke",u[4]),c&32&&s(e,"fill",u[5]),c&1&&n!==(n=u[0].points[0].x)&&s(e,"x1",n),c&1&&r!==(r=u[0].points[0].y)&&s(e,"y1",r),c&1&&l!==(l=u[0].points[1].x)&&s(e,"x2",l),c&1&&a!==(a=u[0].points[1].y)&&s(e,"y2",a),c&2&&s(e,"transform",u[1]),c&8&&s(e,"cursor",u[3])},d(u){u&&A(e),t[11](null),o=!1,i()}}}function Hl(t){let e,n,r,l,a,o;return{c(){e=w("circle"),s(e,"stroke-width",t[6]),s(e,"stroke",t[4]),s(e,"fill",t[5]),s(e,"cx",n=t[0].points[0].x),s(e,"cy",r=t[0].points[0].y),s(e,"r",l=Ke.l2(t[0].points[0],t[0].points[1])),s(e,"transform",t[1]),s(e,"cursor",t[3]),s(e,"class","svelte-hfk3jn")},m(i,u){j(i,e,u),t[10](e),a||(o=J(e,"mousedown",t[7]),a=!0)},p(i,u){u&64&&s(e,"stroke-width",i[6]),u&16&&s(e,"stroke",i[4]),u&32&&s(e,"fill",i[5]),u&1&&n!==(n=i[0].points[0].x)&&s(e,"cx",n),u&1&&r!==(r=i[0].points[0].y)&&s(e,"cy",r),u&1&&l!==(l=Ke.l2(i[0].points[0],i[0].points[1]))&&s(e,"r",l),u&2&&s(e,"transform",i[1]),u&8&&s(e,"cursor",i[3])},d(i){i&&A(e),t[10](null),a=!1,o()}}}function Yl(t){let e;function n(a,o){if(a[0].type===fe.Type.CIRCLE)return Hl;if(a[0].type===fe.Type.LINE)return Al;if(a[0].type===fe.Type.POLYGON)return ql;if(a[0].type===fe.Type.RECTANGLE)return Pl}let r=n(t),l=r&&r(t);return{c(){l&&l.c(),e=ys()},m(a,o){l&&l.m(a,o),j(a,e,o)},p(a,[o]){r===(r=n(a))&&l?l.p(a,o):(l&&l.d(1),l=r&&r(a),l&&(l.c(),l.m(e.parentNode,e)))},i:Z,o:Z,d(a){l&&l.d(a),a&&A(e)}}}const Ws=t=>`${t.x},${t.y}`;function jl(t,e,n){let r,l,a,o,{shape:i}=e,u,{transform:c=""}=e,{currentShape:h=null}=e,{currentTool:d=x.SELECT}=e;function b(L){d===x.SELECT&&n(8,h=i)}function g(L){O[L?"unshift":"push"](()=>{u=L,n(2,u)})}function m(L){O[L?"unshift":"push"](()=>{u=L,n(2,u)})}function T(L){O[L?"unshift":"push"](()=>{u=L,n(2,u)})}function k(L){O[L?"unshift":"push"](()=>{u=L,n(2,u)})}return t.$$set=L=>{"shape"in L&&n(0,i=L.shape),"transform"in L&&n(1,c=L.transform),"currentShape"in L&&n(8,h=L.currentShape),"currentTool"in L&&n(9,d=L.currentTool)},t.$$.update=()=>{t.$$.dirty&1&&n(6,r=i.filled?1:2),t.$$.dirty&1&&n(5,l=i.filled?i.color:"none"),t.$$.dirty&1&&n(4,a=i.color),t.$$.dirty&769&&n(3,o=d!==x.SELECT?"crosshair":h===i?"move":"pointer")},[i,c,u,o,a,l,r,b,h,d,g,m,T,k]}class Ss extends Fe{constructor(e){super(),Ue(this,e,jl,Yl,Ie,{shape:0,transform:1,currentShape:8,currentTool:9})}}function Ks(t,e,n){const r=t.slice();return r[28]=e[n],r[29]=e,r[30]=n,r}function Qs(t,e,n){const r=t.slice();return r[31]=e[n],r[32]=e,r[33]=n,r}function Jl(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function Vl(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function zl(t){let e;return{c(){e=w("line"),s(e,"x1",t[30]*15),s(e,"y1","0"),s(e,"x2",t[30]*15),s(e,"y2","300")},m(n,r){j(n,e,r)},p:Z,d(n){n&&A(e)}}}function Xl(t){let e;return{c(){e=w("line"),s(e,"x1","0"),s(e,"y1",t[30]*15),s(e,"x2","300"),s(e,"y2",t[30]*15)},m(n,r){j(n,e,r)},p:Z,d(n){n&&A(e)}}}function Zs(t){let e,n,r,l,a;function o(h){t[16](h,t[31],t[32],t[33])}function i(h){t[17](h)}function u(h){t[18](h)}let c={};return t[31]!==void 0&&(c.shape=t[31]),t[1]!==void 0&&(c.currentShape=t[1]),t[0]!==void 0&&(c.currentTool=t[0]),e=new Ss({props:c}),O.push(()=>P(e,"shape",o)),O.push(()=>P(e,"currentShape",i)),O.push(()=>P(e,"currentTool",u)),{c(){ue(e.$$.fragment)},m(h,d){ie(e,h,d),a=!0},p(h,d){t=h;const b={};!n&&d[0]&4&&(n=!0,b.shape=t[31],F(()=>n=!1)),!r&&d[0]&2&&(r=!0,b.currentShape=t[1],F(()=>r=!1)),!l&&d[0]&1&&(l=!0,b.currentTool=t[0],F(()=>l=!1)),e.$set(b)},i(h){a||(G(e.$$.fragment,h),a=!0)},o(h){H(e.$$.fragment,h),a=!1},d(h){ae(e,h)}}}function $s(t){let e,n,r,l,a;function o(h){t[19](h)}function i(h){t[20](h)}function u(h){t[21](h)}let c={};return t[1]!==void 0&&(c.shape=t[1]),t[1]!==void 0&&(c.currentShape=t[1]),t[0]!==void 0&&(c.currentTool=t[0]),e=new Ss({props:c}),O.push(()=>P(e,"shape",o)),O.push(()=>P(e,"currentShape",i)),O.push(()=>P(e,"currentTool",u)),{c(){ue(e.$$.fragment)},m(h,d){ie(e,h,d),a=!0},p(h,d){const b={};!n&&d[0]&2&&(n=!0,b.shape=h[1],F(()=>n=!1)),!r&&d[0]&2&&(r=!0,b.currentShape=h[1],F(()=>r=!1)),!l&&d[0]&1&&(l=!0,b.currentTool=h[0],F(()=>l=!1)),e.$set(b)},i(h){a||(G(e.$$.fragment,h),a=!0)},o(h){H(e.$$.fragment,h),a=!1},d(h){ae(e,h)}}}function xs(t){let e,n,r=t[1].points,l=[];for(let o=0;o<r.length;o+=1)l[o]=er(Ks(t,r,o));const a=o=>H(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ys()},m(o,i){for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(o,i);j(o,e,i),n=!0},p(o,i){if(i[0]&122){r=o[1].points;let u;for(u=0;u<r.length;u+=1){const c=Ks(o,r,u);l[u]?(l[u].p(c,i),G(l[u],1)):(l[u]=er(c),l[u].c(),G(l[u],1),l[u].m(e.parentNode,e))}for(lt(),u=r.length;u<l.length;u+=1)a(u);ot()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)G(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)H(l[i]);n=!1},d(o){zt(l,o),o&&A(e)}}}function er(t){let e,n=t[30],r,l,a,o;const i=()=>t[22](e,n),u=()=>t[22](null,n);function c(g){t[23](g,t[30])}function h(g){t[24](g)}function d(g){t[25](g)}let b={pushState:t[3],index:t[30]};return t[4][t[30]]!==void 0&&(b.grabbed=t[4][t[30]]),t[5]!==void 0&&(b.canvas=t[5]),t[1]!==void 0&&(b.shape=t[1]),e=new Fl({props:b}),i(),O.push(()=>P(e,"grabbed",c)),O.push(()=>P(e,"canvas",h)),O.push(()=>P(e,"shape",d)),{c(){ue(e.$$.fragment)},m(g,m){ie(e,g,m),o=!0},p(g,m){t=g,n!==t[30]&&(u(),n=t[30],i());const T={};m[0]&8&&(T.pushState=t[3]),!r&&m[0]&16&&(r=!0,T.grabbed=t[4][t[30]],F(()=>r=!1)),!l&&m[0]&32&&(l=!0,T.canvas=t[5],F(()=>l=!1)),!a&&m[0]&2&&(a=!0,T.shape=t[1],F(()=>a=!1)),e.$set(T)},i(g){o||(G(e.$$.fragment,g),o=!0)},o(g){H(e.$$.fragment,g),o=!1},d(g){u(),ae(e,g)}}}function Wl(t){let e,n,r,l,a,o,i,u,c,h,d={length:21},b=[];for(let y=0;y<d.length;y+=1)b[y]=zl(Vl(t,d,y));let g={length:21},m=[];for(let y=0;y<g.length;y+=1)m[y]=Xl(Jl(t,g,y));let T=t[2],k=[];for(let y=0;y<T.length;y+=1)k[y]=Zs(Qs(t,T,y));const L=y=>H(k[y],1,1,()=>{k[y]=null});let D=t[1]!=null&&t[0]!=x.SELECT&&$s(t),B=t[1]!=null&&t[0]===x.SELECT&&xs(t);const Y=t[15].default,q=Zt(Y,t,t[14],null);return{c(){e=w("svg"),n=w("g");for(let y=0;y<b.length;y+=1)b[y].c();r=w("line");for(let y=0;y<m.length;y+=1)m[y].c();l=w("line"),a=w("g");for(let y=0;y<k.length;y+=1)k[y].c();o=ys(),D&&D.c(),i=w("g"),B&&B.c(),q&&q.c(),s(r,"x1","150"),s(r,"y1","0"),s(r,"x2","150"),s(r,"y2","300"),s(l,"x1","0"),s(l,"y1","150"),s(l,"x2","300"),s(l,"y2","150"),s(n,"id","grid"),s(n,"stroke","rgba(255, 255, 255, 0.3)"),s(n,"stroke-width","0.5"),s(a,"id","shape"),s(i,"id","handles"),s(i,"fill","white"),s(i,"stroke","black"),s(i,"stroke-width","1"),s(e,"class","canvas svelte-19kwhnv"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 300 300"),s(e,"cursor",t[7])},m(y,N){j(y,e,N),f(e,n);for(let M=0;M<b.length;M+=1)b[M]&&b[M].m(n,null);f(n,r);for(let M=0;M<m.length;M+=1)m[M]&&m[M].m(n,null);f(n,l),f(e,a);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(a,null);f(a,o),D&&D.m(a,null),f(e,i),B&&B.m(i,null),q&&q.m(e,null),t[26](e),u=!0,c||(h=[J(e,"mousemove",t[8]),J(e,"mousedown",t[10]),J(e,"mouseup",t[9])],c=!0)},p(y,N){if(N[0]&7){T=y[2];let M;for(M=0;M<T.length;M+=1){const E=Qs(y,T,M);k[M]?(k[M].p(E,N),G(k[M],1)):(k[M]=Zs(E),k[M].c(),G(k[M],1),k[M].m(a,o))}for(lt(),M=T.length;M<k.length;M+=1)L(M);ot()}y[1]!=null&&y[0]!=x.SELECT?D?(D.p(y,N),N[0]&3&&G(D,1)):(D=$s(y),D.c(),G(D,1),D.m(a,null)):D&&(lt(),H(D,1,1,()=>{D=null}),ot()),y[1]!=null&&y[0]===x.SELECT?B?(B.p(y,N),N[0]&3&&G(B,1)):(B=xs(y),B.c(),G(B,1),B.m(i,null)):B&&(lt(),H(B,1,1,()=>{B=null}),ot()),q&&q.p&&(!u||N[0]&16384)&&xt(q,Y,y,y[14],u?$t(Y,y[14],N,null):en(y[14]),null),(!u||N[0]&128)&&s(e,"cursor",y[7])},i(y){if(!u){for(let N=0;N<T.length;N+=1)G(k[N]);G(D),G(B),G(q,y),u=!0}},o(y){k=k.filter(Boolean);for(let N=0;N<k.length;N+=1)H(k[N]);H(D),H(B),H(q,y),u=!1},d(y){y&&A(e),zt(b,y),zt(m,y),zt(k,y),D&&D.d(),B&&B.d(),q&&q.d(y),t[26](null),c=!1,ye(h)}}}const Kl="#FFFFFF";function Ql(t,e,n){let r,l,{$$slots:a={},$$scope:o}=e,{currentTool:i=x.SELECT}=e,{currentColor:u=Kl}=e,{currentShape:c=null}=e,{shapes:h=[]}=e,{pushState:d}=e,b,g=[],m=[],T=!1,k;function L(S){if(!c)return;const X=Ke.fromMouse(b,S);if(i!==x.SELECT)n(1,c.points[c.points.length-1]=X,c);else{T&&!r&&(n(1,c.points=c.points.map($=>({x:$.x+X.x-k.x,y:$.y+X.y-k.y})),c),k=X);for(let $=0;$<g.length;$++)m[$]&&n(1,c.points[$]=X,c)}n(2,h)}function D(S){let X=Ke.fromMouse(b,S);n(12,T=!1),c&&(X.x==c.points[0].x&&X.y==c.points[0].y||x.shapeType(i)!=fe.Type.POLYGON&&i!==x.SELECT&&B(S))}function B(S){i===x.SELECT&&S.target===b&&n(1,c=null);let X=Ke.fromMouse(b,S);if(i!==x.SELECT)if(!c)n(1,c={points:[X,X],color:u,type:x.shapeType(i),filled:x.isFilled(i)});else if(n(1,c.points[c.points.length-1]=X,c),c.points.length==2&&x.shapeType(i)!=fe.Type.POLYGON)d(),h.push(c),n(1,c=null);else{const $=c.points.at(-2),W=X;W.x==$.x&&W.y==$.y?(c.points.pop(),d(),h.push(c),n(1,c=null)):c.points.push(X)}else d(),n(12,T=!0),k=X}function Y(S,X,$,W){$[W]=S,n(2,h)}function q(S){c=S,n(1,c)}function y(S){i=S,n(0,i)}function N(S){c=S,n(1,c)}function M(S){c=S,n(1,c)}function E(S){i=S,n(0,i)}function z(S,X){O[S?"unshift":"push"](()=>{g[X]=S,n(6,g)})}function ee(S,X){t.$$.not_equal(m[X],S)&&(m[X]=S,n(4,m))}function te(S){b=S,n(5,b)}function V(S){c=S,n(1,c)}function I(S){O[S?"unshift":"push"](()=>{b=S,n(5,b)})}return t.$$set=S=>{"currentTool"in S&&n(0,i=S.currentTool),"currentColor"in S&&n(11,u=S.currentColor),"currentShape"in S&&n(1,c=S.currentShape),"shapes"in S&&n(2,h=S.shapes),"pushState"in S&&n(3,d=S.pushState),"$$scope"in S&&n(14,o=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16&&n(13,r=m.includes(!0)),t.$$.dirty[0]&12291&&n(7,l=i!==x.SELECT?"crosshair":r?"grabbed":T&&c!==null?"move":"default")},[i,c,h,d,m,b,g,l,L,D,B,u,T,r,o,a,Y,q,y,N,M,E,z,ee,te,V,I]}class Zl extends Fe{constructor(e){super(),Ue(this,e,Ql,Wl,Ie,{currentTool:0,currentColor:11,currentShape:1,shapes:2,pushState:3},null,[-1,-1])}}var gs;(t=>{function e(i){if(!i.name||typeof i.name!="string"||typeof i.editableColorIndex!="number"||typeof i.rotate!="boolean"||!Array.isArray(i.elements))return!1;for(const u of i.elements)if(!n(u))return!1;return!0}t.validateJSONShape=e;function n(i){switch(i.type){case fe.Type.LINE:return r(i);case fe.Type.CIRCLE:return l(i);case fe.Type.RECTANGLE:return a(i);case fe.Type.POLYGON:return o(i);default:return!1}}function r(i){return typeof i.x1=="number"&&typeof i.y1=="number"&&typeof i.x2=="number"&&typeof i.y2=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function l(i){return typeof i.x=="number"&&typeof i.y=="number"&&typeof i.diam=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function a(i){return typeof i.xmin=="number"&&typeof i.ymin=="number"&&typeof i.xmax=="number"&&typeof i.ymax=="number"&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}function o(i){return Array.isArray(i.xcors)&&Array.isArray(i.ycors)&&i.xcors.length===i.ycors.length&&i.xcors.every(u=>typeof u=="number")&&i.ycors.every(u=>typeof u=="number")&&typeof i.color=="string"&&typeof i.filled=="boolean"&&typeof i.marked=="boolean"}})(gs||(gs={}));var ms;(t=>{function e(o){return`<line x1="${o.x1}" y1="${o.y1}" x2="${o.x2}" y2="${o.y2}" stroke="${o.color}" stroke-width="2" />`}function n(o){return`<circle cx="${o.x-o.diam/2}" cy="${o.y-o.diam/2}" r="${o.diam/2}" stroke="${o.color}" stroke-width="2" fill="${o.filled?o.color:"none"}" />`}function r(o){return`<rect x="${o.xmin}" y="${o.ymin}" width="${o.xmax-o.xmin}" height="${o.ymax-o.ymin}" stroke="${o.color}" stroke-width="2" fill="${o.filled?o.color:"none"}" />`}function l(o){return`<polygon points="${o.xcors.map((u,c)=>`${u},${o.ycors[c]}`).join(" ")}" stroke="${o.color}" stroke-width="2" fill="${o.filled?o.color:"none"}" />`}function a(o){return o.elements.map(u=>{switch(u.type){case fe.Type.LINE:return e(u);case fe.Type.CIRCLE:return n(u);case fe.Type.RECTANGLE:return r(u);case fe.Type.POLYGON:return l(u)}}).join(`
`)}t.toSVG=a})(ms||(ms={}));function $l(t){let e,n,r,l;const a=t[6].default,o=Zt(a,t,t[5],null);return{c(){e=v("button"),o&&o.c(),s(e,"class","svelte-6kyli7")},m(i,u){j(i,e,u),o&&o.m(e,null),n=!0,r||(l=J(e,"click",t[0]),r=!0)},p(i,[u]){o&&o.p&&(!n||u&32)&&xt(o,a,i,i[5],n?$t(a,i[5],u,null):en(i[5]),null)},i(i){n||(G(o,i),n=!0)},o(i){H(o,i),n=!1},d(i){i&&A(e),o&&o.d(i),r=!1,l()}}}function xl(t,e,n){let{$$slots:r={},$$scope:l}=e,{transformation:a}=e,{shapes:o}=e,{currentShape:i=null}=e,{pushState:u}=e;const c=d=>{d.points=d.points.map(a)},h=()=>{u(),i!==null?(c(i),n(2,i)):o.forEach(c),n(1,o)};return t.$$set=d=>{"transformation"in d&&n(3,a=d.transformation),"shapes"in d&&n(1,o=d.shapes),"currentShape"in d&&n(2,i=d.currentShape),"pushState"in d&&n(4,u=d.pushState),"$$scope"in d&&n(5,l=d.$$scope)},[h,o,i,a,u,l,r]}class kn extends Fe{constructor(e){super(),Ue(this,e,xl,$l,Ie,{transformation:3,shapes:1,currentShape:2,pushState:4})}}function eo(t){let e,n,r,l;const a=t[6].default,o=Zt(a,t,t[5],null);return{c(){e=v("button"),o&&o.c(),s(e,"class","svelte-16eij8w")},m(i,u){j(i,e,u),o&&o.m(e,null),n=!0,r||(l=J(e,"click",t[0]),r=!0)},p(i,[u]){o&&o.p&&(!n||u&32)&&xt(o,a,i,i[5],n?$t(a,i[5],u,null):en(i[5]),null)},i(i){n||(G(o,i),n=!0)},o(i){H(o,i),n=!1},d(i){i&&A(e),o&&o.d(i),r=!1,l()}}}function to(t,e,n){let{$$slots:r={},$$scope:l}=e,{stateChange:a}=e,{shapes:o}=e,{currentShape:i=null}=e,{pushState:u}=e;const c=()=>{u(),i!==null&&n(2,[i,o]=a(i,o),i,n(1,o))};return t.$$set=h=>{"stateChange"in h&&n(3,a=h.stateChange),"shapes"in h&&n(1,o=h.shapes),"currentShape"in h&&n(2,i=h.currentShape),"pushState"in h&&n(4,u=h.pushState),"$$scope"in h&&n(5,l=h.$$scope)},[c,o,i,a,u,l,r]}class Tn extends Fe{constructor(e){super(),Ue(this,e,to,eo,Ie,{stateChange:3,shapes:1,currentShape:2,pushState:4})}}function no(t){let e,n,r,l;const a=t[7].default,o=Zt(a,t,t[6],null);return{c(){e=v("button"),o&&o.c(),s(e,"class","svelte-16eij8w")},m(i,u){j(i,e,u),o&&o.m(e,null),n=!0,r||(l=J(e,"click",t[0]),r=!0)},p(i,[u]){o&&o.p&&(!n||u&64)&&xt(o,a,i,i[6],n?$t(a,i[6],u,null):en(i[6]),null)},i(i){n||(G(o,i),n=!0)},o(i){H(o,i),n=!1},d(i){i&&A(e),o&&o.d(i),r=!1,l()}}}function so(t,e,n){let{$$slots:r={},$$scope:l}=e,{historyChange:a}=e,{shapes:o}=e,{undoStack:i=[]}=e,{redoStack:u=[]}=e,{currentShape:c=null}=e;const h=()=>{n(2,[i,u,o]=a(i,u,o),i,n(3,u),n(1,o)),n(4,c=null)};return t.$$set=d=>{"historyChange"in d&&n(5,a=d.historyChange),"shapes"in d&&n(1,o=d.shapes),"undoStack"in d&&n(2,i=d.undoStack),"redoStack"in d&&n(3,u=d.redoStack),"currentShape"in d&&n(4,c=d.currentShape),"$$scope"in d&&n(6,l=d.$$scope)},[h,o,i,u,c,a,l,r]}class tr extends Fe{constructor(e){super(),Ue(this,e,so,no,Ie,{historyChange:5,shapes:1,undoStack:2,redoStack:3,currentShape:4})}}function nr(t,e,n){const r=t.slice();return r[3]=e[n],r[4]=e,r[5]=n,r}function sr(t){let e,n,r;function l(o){t[2](o,t[3],t[4],t[5])}let a={transform:"translate(150 150) rotate("+t[1]+") translate(-150 -150)"};return t[3]!==void 0&&(a.shape=t[3]),e=new Ss({props:a}),O.push(()=>P(e,"shape",l)),{c(){ue(e.$$.fragment)},m(o,i){ie(e,o,i),r=!0},p(o,i){t=o;const u={};i&2&&(u.transform="translate(150 150) rotate("+t[1]+") translate(-150 -150)"),!n&&i&1&&(n=!0,u.shape=t[3],F(()=>n=!1)),e.$set(u)},i(o){r||(G(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){ae(e,o)}}}function ro(t){let e,n,r=t[0],l=[];for(let o=0;o<r.length;o+=1)l[o]=sr(nr(t,r,o));const a=o=>H(l[o],1,1,()=>{l[o]=null});return{c(){e=w("svg");for(let o=0;o<l.length;o+=1)l[o].c();s(e,"class","canvas-mirror svelte-1x58jn2"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 300 300")},m(o,i){j(o,e,i);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);n=!0},p(o,[i]){if(i&3){r=o[0];let u;for(u=0;u<r.length;u+=1){const c=nr(o,r,u);l[u]?(l[u].p(c,i),G(l[u],1)):(l[u]=sr(c),l[u].c(),G(l[u],1),l[u].m(e,null))}for(lt(),u=r.length;u<l.length;u+=1)a(u);ot()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)G(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)H(l[i]);n=!1},d(o){o&&A(e),zt(l,o)}}}function lo(t,e,n){let{shapes:r}=e,{rotate:l=0}=e;function a(o,i,u,c){u[c]=o,n(0,r)}return t.$$set=o=>{"shapes"in o&&n(0,r=o.shapes),"rotate"in o&&n(1,l=o.rotate)},[r,l,a]}class Vt extends Fe{constructor(e){super(),Ue(this,e,lo,ro,Ie,{shapes:0,rotate:1})}}function oo(t){let e,n;return{c(){e=w("svg"),n=w("polygon"),s(n,"points","4,15 8,10 14,10 4,1"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function io(t){let e,n;return{c(){e=w("svg"),n=w("line"),s(n,"x1","1"),s(n,"y1","1"),s(n,"x2","15"),s(n,"y2","15"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function ao(t){let e,n;return{c(){e=w("svg"),n=w("rect"),s(n,"x","1"),s(n,"y","1"),s(n,"rx","1"),s(n,"ry","1"),s(n,"width","14"),s(n,"height","14"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function uo(t){let e,n;return{c(){e=w("svg"),n=w("rect"),s(n,"x","1"),s(n,"y","1"),s(n,"rx","1"),s(n,"ry","1"),s(n,"width","14"),s(n,"height","14"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function co(t){let e,n;return{c(){e=w("svg"),n=w("circle"),s(n,"cx","8"),s(n,"cy","8"),s(n,"r","7"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function fo(t){let e,n;return{c(){e=w("svg"),n=w("circle"),s(n,"cx","8"),s(n,"cy","8"),s(n,"r","7"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function po(t){let e,n;return{c(){e=w("svg"),n=w("polygon"),s(n,"points","1,8 4.5,14.0622 11.5,14.0622 15,8 11.5,1.9378 4.5,1.9378"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function ho(t){let e,n;return{c(){e=w("svg"),n=w("polygon"),s(n,"points","1,8 4.5,14.0622 11.5,14.0622 15,8 11.5,1.9378 4.5,1.9378"),s(n,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(r,l){j(r,e,l),f(e,n)},p:Z,d(r){r&&A(e)}}}function _o(t){let e,n,r,l,a,o,i;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("polygon"),o=w("circle"),i=w("polygon"),s(l,"x","0"),s(l,"y","0"),s(l,"width","16"),s(l,"height","16"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(a,"points","0,0 0,16 8,8"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","ccw-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(o,"cx","8"),s(o,"cy","8"),s(o,"r","7"),s(o,"fill-opacity","0"),s(o,"mask","url(#ccw-mask)"),s(o,"class","svelte-106cdxr"),s(i,"points","5,5 1,5 1,1"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){j(u,e,c),f(e,n),f(n,r),f(r,l),f(r,a),f(e,o),f(e,i)},p:Z,d(u){u&&A(e)}}}function go(t){let e,n,r,l,a,o,i;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("polygon"),o=w("circle"),i=w("polygon"),s(l,"x","0"),s(l,"y","0"),s(l,"width","16"),s(l,"height","16"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(a,"points","16,0 16,16 8,8"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","cw-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(o,"cx","8"),s(o,"cy","8"),s(o,"r","7"),s(o,"fill-opacity","0"),s(o,"mask","url(#cw-mask)"),s(o,"class","svelte-106cdxr"),s(i,"points","11,5 15,5 15,1"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){j(u,e,c),f(e,n),f(n,r),f(r,l),f(r,a),f(e,o),f(e,i)},p:Z,d(u){u&&A(e)}}}function mo(t){let e,n,r,l;return{c(){e=w("svg"),n=w("rect"),r=w("line"),l=w("rect"),s(n,"y","3"),s(n,"x","1"),s(n,"width","5"),s(n,"height","10"),s(n,"rx","1"),s(n,"ry","1"),s(n,"class","svelte-106cdxr"),s(r,"y1","1"),s(r,"x1","8"),s(r,"y2","15"),s(r,"x2","8"),s(r,"class","svelte-106cdxr"),s(l,"y","3"),s(l,"x","10"),s(l,"width","5"),s(l,"height","10"),s(l,"rx","1"),s(l,"ry","1"),s(l,"fill-opacity","0"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,o){j(a,e,o),f(e,n),f(e,r),f(e,l)},p:Z,d(a){a&&A(e)}}}function bo(t){let e,n,r,l;return{c(){e=w("svg"),n=w("rect"),r=w("line"),l=w("rect"),s(n,"x","3"),s(n,"y","1"),s(n,"width","10"),s(n,"height","5"),s(n,"rx","1"),s(n,"ry","1"),s(n,"class","svelte-106cdxr"),s(r,"x1","1"),s(r,"y1","8"),s(r,"x2","15"),s(r,"y2","8"),s(r,"class","svelte-106cdxr"),s(l,"x","3"),s(l,"y","10"),s(l,"width","10"),s(l,"height","5"),s(l,"rx","1"),s(l,"ry","1"),s(l,"fill-opacity","0"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,o){j(a,e,o),f(e,n),f(e,r),f(e,l)},p:Z,d(a){a&&A(e)}}}function vo(t){let e,n,r,l,a,o;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("rect"),o=w("polygon"),s(l,"x","1"),s(l,"y","1"),s(l,"width","15"),s(l,"height","15"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(r,"id","undo-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(a,"x","-8"),s(a,"y","8"),s(a,"width","23"),s(a,"height","23"),s(a,"rx","2"),s(a,"ry","2"),s(a,"fill-opacity","0"),s(a,"mask","url(#undo-mask)"),s(a,"class","svelte-106cdxr"),s(o,"points","4,5 1,8 4,11"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){j(i,e,u),f(e,n),f(n,r),f(r,l),f(e,a),f(e,o)},p:Z,d(i){i&&A(e)}}}function yo(t){let e,n,r,l,a,o;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("rect"),o=w("polygon"),s(l,"x","0"),s(l,"y","1"),s(l,"width","15"),s(l,"height","15"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(r,"id","redo-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(a,"x","1"),s(a,"y","8"),s(a,"width","23"),s(a,"height","23"),s(a,"rx","2"),s(a,"ry","2"),s(a,"fill-opacity","0"),s(a,"mask","url(#redo-mask)"),s(a,"class","svelte-106cdxr"),s(o,"points","12,5 15,8 12,11"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){j(i,e,u),f(e,n),f(n,r),f(r,l),f(e,a),f(e,o)},p:Z,d(i){i&&A(e)}}}function So(t){let e,n,r,l,a,o,i,u,c;return{c(){e=v("div"),n=je(`
        Color that changes`),r=v("input"),l=R(),a=v("br"),o=je(`
        Rotatable `),i=v("input"),oe(e,"height","4.75em"),s(e,"class","svelte-106cdxr"),s(r,"type","color"),oe(r,"height","3em"),r.disabled=!0,s(i,"type","checkbox")},m(h,d){j(h,e,d),j(h,n,d),j(h,r,d),j(h,l,d),j(h,a,d),j(h,o,d),j(h,i,d),i.checked=t[3],u||(c=J(i,"change",t[69]),u=!0)},p(h,d){d[0]&8&&(i.checked=h[3])},i:Z,o:Z,d(h){h&&A(e),h&&A(n),h&&A(r),h&&A(l),h&&A(a),h&&A(o),h&&A(i),u=!1,c()}}}function wo(t){let e,n,r,l,a,o,i,u,c,h,d,b,g,m,T,k,L;function D(I){t[61](I)}function B(I){t[62](I)}let Y={stateChange:Ct.remove,pushState:t[10],$$slots:{default:[ko]},$$scope:{ctx:t}};t[5]!==void 0&&(Y.currentShape=t[5]),t[4]!==void 0&&(Y.shapes=t[4]),e=new Tn({props:Y}),O.push(()=>P(e,"currentShape",D)),O.push(()=>P(e,"shapes",B));function q(I){t[63](I)}function y(I){t[64](I)}let N={stateChange:Ct.duplicate,pushState:t[10],$$slots:{default:[To]},$$scope:{ctx:t}};t[5]!==void 0&&(N.currentShape=t[5]),t[4]!==void 0&&(N.shapes=t[4]),a=new Tn({props:N}),O.push(()=>P(a,"currentShape",q)),O.push(()=>P(a,"shapes",y));function M(I){t[65](I)}function E(I){t[66](I)}let z={stateChange:Ct.moveToTop,pushState:t[10],$$slots:{default:[Co]},$$scope:{ctx:t}};t[5]!==void 0&&(z.currentShape=t[5]),t[4]!==void 0&&(z.shapes=t[4]),h=new Tn({props:z}),O.push(()=>P(h,"currentShape",M)),O.push(()=>P(h,"shapes",E));function ee(I){t[67](I)}function te(I){t[68](I)}let V={stateChange:Ct.moveToBottom,pushState:t[10],$$slots:{default:[Lo]},$$scope:{ctx:t}};return t[5]!==void 0&&(V.currentShape=t[5]),t[4]!==void 0&&(V.shapes=t[4]),m=new Tn({props:V}),O.push(()=>P(m,"currentShape",ee)),O.push(()=>P(m,"shapes",te)),{c(){ue(e.$$.fragment),l=R(),ue(a.$$.fragment),u=R(),c=v("div"),ue(h.$$.fragment),g=R(),ue(m.$$.fragment),s(c,"class","svelte-106cdxr")},m(I,S){ie(e,I,S),j(I,l,S),ie(a,I,S),j(I,u,S),j(I,c,S),ie(h,c,null),f(c,g),ie(m,c,null),L=!0},p(I,S){const X={};S[2]&32768&&(X.$$scope={dirty:S,ctx:I}),!n&&S[0]&32&&(n=!0,X.currentShape=I[5],F(()=>n=!1)),!r&&S[0]&16&&(r=!0,X.shapes=I[4],F(()=>r=!1)),e.$set(X);const $={};S[2]&32768&&($.$$scope={dirty:S,ctx:I}),!o&&S[0]&32&&(o=!0,$.currentShape=I[5],F(()=>o=!1)),!i&&S[0]&16&&(i=!0,$.shapes=I[4],F(()=>i=!1)),a.$set($);const W={};S[2]&32768&&(W.$$scope={dirty:S,ctx:I}),!d&&S[0]&32&&(d=!0,W.currentShape=I[5],F(()=>d=!1)),!b&&S[0]&16&&(b=!0,W.shapes=I[4],F(()=>b=!1)),h.$set(W);const se={};S[2]&32768&&(se.$$scope={dirty:S,ctx:I}),!T&&S[0]&32&&(T=!0,se.currentShape=I[5],F(()=>T=!1)),!k&&S[0]&16&&(k=!0,se.shapes=I[4],F(()=>k=!1)),m.$set(se)},i(I){L||(G(e.$$.fragment,I),G(a.$$.fragment,I),G(h.$$.fragment,I),G(m.$$.fragment,I),L=!0)},o(I){H(e.$$.fragment,I),H(a.$$.fragment,I),H(h.$$.fragment,I),H(m.$$.fragment,I),L=!1},d(I){ae(e,I),I&&A(l),ae(a,I),I&&A(u),I&&A(c),ae(h),ae(m)}}}function ko(t){let e,n,r,l,a,o;return{c(){e=w("svg"),n=w("polyline"),r=w("line"),l=w("line"),a=w("line"),o=w("polyline"),s(n,"points","3,5 3,15 13,15 13,5"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(r,"x1","6"),s(r,"x2","6"),s(r,"y1","5"),s(r,"y2","13"),s(r,"class","svelte-106cdxr"),s(l,"x1","10"),s(l,"x2","10"),s(l,"y1","5"),s(l,"y2","13"),s(l,"class","svelte-106cdxr"),s(a,"x1","2"),s(a,"x2","14"),s(a,"y1","3"),s(a,"y2","3"),s(a,"class","svelte-106cdxr"),s(o,"points","5,3 5,1 11,1 11,3"),s(o,"fill-opacity","0"),s(o,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(i,u){j(i,e,u),f(e,n),f(e,r),f(e,l),f(e,a),f(e,o)},p:Z,d(i){i&&A(e)}}}function To(t){let e,n,r,l,a,o,i;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("rect"),o=w("rect"),i=w("rect"),s(l,"x","0"),s(l,"y","0"),s(l,"width","16"),s(l,"height","16"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(a,"x","1"),s(a,"y","1"),s(a,"width","11"),s(a,"height","11"),s(a,"rx","2"),s(a,"ry","2"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","copy-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(o,"x","4"),s(o,"y","4"),s(o,"width","11"),s(o,"height","11"),s(o,"rx","2"),s(o,"ry","2"),s(o,"fill-opacity","0"),s(o,"mask","url(#copy-mask)"),s(o,"class","svelte-106cdxr"),s(i,"x","1"),s(i,"y","1"),s(i,"width","11"),s(i,"height","11"),s(i,"rx","2"),s(i,"ry","2"),s(i,"fill-opacity","0"),s(i,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(u,c){j(u,e,c),f(e,n),f(n,r),f(r,l),f(r,a),f(e,o),f(e,i)},p:Z,d(u){u&&A(e)}}}function Co(t){let e,n,r,l,a,o,i,u;return{c(){e=w("svg"),n=w("defs"),r=w("mask"),l=w("rect"),a=w("rect"),o=w("rect"),i=w("rect"),u=w("rect"),s(l,"x","0"),s(l,"y","0"),s(l,"width","16"),s(l,"height","16"),oe(l,"fill","white"),s(l,"stroke-opacity","0"),s(l,"class","svelte-106cdxr"),s(a,"x","4"),s(a,"y","4"),s(a,"width","8"),s(a,"height","8"),s(a,"rx","2"),s(a,"ry","2"),oe(a,"fill","black"),s(a,"stroke-opacity","0"),s(a,"class","svelte-106cdxr"),s(r,"id","top-mask"),s(r,"class","svelte-106cdxr"),s(n,"class","svelte-106cdxr"),s(o,"x","1"),s(o,"y","1"),s(o,"width","7"),s(o,"height","7"),s(o,"rx","2"),s(o,"ry","2"),s(o,"mask","url(#top-mask)"),s(o,"class","svelte-106cdxr"),s(i,"x","8"),s(i,"y","8"),s(i,"width","7"),s(i,"height","7"),s(i,"rx","2"),s(i,"ry","2"),s(i,"mask","url(#top-mask)"),s(i,"class","svelte-106cdxr"),s(u,"x","4"),s(u,"y","4"),s(u,"width","8"),s(u,"height","8"),s(u,"rx","2"),s(u,"ry","2"),s(u,"fill-opacity","0"),s(u,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(c,h){j(c,e,h),f(e,n),f(n,r),f(r,l),f(r,a),f(e,o),f(e,i),f(e,u)},p:Z,d(c){c&&A(e)}}}function Lo(t){let e,n,r,l;return{c(){e=w("svg"),n=w("rect"),r=w("rect"),l=w("rect"),s(n,"x","4"),s(n,"y","4"),s(n,"width","8"),s(n,"height","8"),s(n,"rx","2"),s(n,"ry","2"),s(n,"fill-opacity","0"),s(n,"class","svelte-106cdxr"),s(r,"x","1"),s(r,"y","1"),s(r,"width","7"),s(r,"height","7"),s(r,"rx","2"),s(r,"ry","2"),s(r,"class","svelte-106cdxr"),s(l,"x","8"),s(l,"y","8"),s(l,"width","7"),s(l,"height","7"),s(l,"rx","2"),s(l,"ry","2"),s(l,"class","svelte-106cdxr"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"class","icon svelte-106cdxr")},m(a,o){j(a,e,o),f(e,n),f(e,r),f(e,l)},p:Z,d(a){a&&A(e)}}}function Io(t){let e,n,r,l,a,o,i,u,c,h,d,b,g,m,T,k,L,D,B,Y,q,y,N,M,E,z,ee,te,V,I,S,X,$,W,se,ke,me,Pe,Te,Ve,be,Ce,ge,ze,he,U,K,re,Q,de,qe,it,Ze,at,ce,pe,_e,Se,le,ne,ve,Ee,Et,Ot,tn,Oe,Nt,Mt,nn,Ne,Bt,Dt,sn,Ae,we,$e,ut,He,Rt,_,ft,ws,pt,Gt,xe,Nn,ks,rn,Ts,ht,Ut,et,Mn,Cs,ln,Ls,dt,Ft,tt,Bn,Is,on,Es,_t,Pt,nt,Dn,Os,an,Ns,Me,Rn,Gn,Un,Fn,Ms,Xe,gt,Be,Pn,qn,An,Hn,Bs,De,Yn,jn,Jn,Vn,Ds,un,Rs,Le,Re,qt,zn,Gs;function kr(p){t[19](p)}function Tr(p){t[20](p)}let Xn={tool:x.SELECT,$$slots:{default:[oo]},$$scope:{ctx:t}};t[5]!==void 0&&(Xn.currentShape=t[5]),t[1]!==void 0&&(Xn.currentTool=t[1]),L=new rt({props:Xn}),O.push(()=>P(L,"currentShape",kr)),O.push(()=>P(L,"currentTool",Tr));function Cr(p){t[21](p)}function Lr(p){t[22](p)}let Wn={tool:x.LINE,$$slots:{default:[io]},$$scope:{ctx:t}};t[5]!==void 0&&(Wn.currentShape=t[5]),t[1]!==void 0&&(Wn.currentTool=t[1]),q=new rt({props:Wn}),O.push(()=>P(q,"currentShape",Cr)),O.push(()=>P(q,"currentTool",Lr));function Ir(p){t[23](p)}function Er(p){t[24](p)}let Kn={tool:x.RECTANGLE,$$slots:{default:[ao]},$$scope:{ctx:t}};t[5]!==void 0&&(Kn.currentShape=t[5]),t[1]!==void 0&&(Kn.currentTool=t[1]),E=new rt({props:Kn}),O.push(()=>P(E,"currentShape",Ir)),O.push(()=>P(E,"currentTool",Er));function Or(p){t[25](p)}function Nr(p){t[26](p)}let Qn={tool:x.FILLED_RECTANGLE,$$slots:{default:[uo]},$$scope:{ctx:t}};t[5]!==void 0&&(Qn.currentShape=t[5]),t[1]!==void 0&&(Qn.currentTool=t[1]),V=new rt({props:Qn}),O.push(()=>P(V,"currentShape",Or)),O.push(()=>P(V,"currentTool",Nr));function Mr(p){t[27](p)}function Br(p){t[28](p)}let Zn={tool:x.CIRCLE,$$slots:{default:[co]},$$scope:{ctx:t}};t[5]!==void 0&&(Zn.currentShape=t[5]),t[1]!==void 0&&(Zn.currentTool=t[1]),$=new rt({props:Zn}),O.push(()=>P($,"currentShape",Mr)),O.push(()=>P($,"currentTool",Br));function Dr(p){t[29](p)}function Rr(p){t[30](p)}let $n={tool:x.FILLED_CIRCLE,$$slots:{default:[fo]},$$scope:{ctx:t}};t[5]!==void 0&&($n.currentShape=t[5]),t[1]!==void 0&&($n.currentTool=t[1]),me=new rt({props:$n}),O.push(()=>P(me,"currentShape",Dr)),O.push(()=>P(me,"currentTool",Rr));function Gr(p){t[31](p)}function Ur(p){t[32](p)}let xn={tool:x.POLYGON,$$slots:{default:[po]},$$scope:{ctx:t}};t[5]!==void 0&&(xn.currentShape=t[5]),t[1]!==void 0&&(xn.currentTool=t[1]),be=new rt({props:xn}),O.push(()=>P(be,"currentShape",Gr)),O.push(()=>P(be,"currentTool",Ur));function Fr(p){t[33](p)}function Pr(p){t[34](p)}let es={tool:x.FILLED_POLYGON,$$slots:{default:[ho]},$$scope:{ctx:t}};t[5]!==void 0&&(es.currentShape=t[5]),t[1]!==void 0&&(es.currentTool=t[1]),he=new rt({props:es}),O.push(()=>P(he,"currentShape",Fr)),O.push(()=>P(he,"currentTool",Pr));function qr(p){t[36](p)}function Ar(p){t[37](p)}let ts={transformation:Tt.rotateCCW,pushState:t[10],$$slots:{default:[_o]},$$scope:{ctx:t}};t[5]!==void 0&&(ts.currentShape=t[5]),t[4]!==void 0&&(ts.shapes=t[4]),Se=new kn({props:ts}),O.push(()=>P(Se,"currentShape",qr)),O.push(()=>P(Se,"shapes",Ar));function Hr(p){t[38](p)}function Yr(p){t[39](p)}let ns={transformation:Tt.rotateCW,pushState:t[10],$$slots:{default:[go]},$$scope:{ctx:t}};t[5]!==void 0&&(ns.currentShape=t[5]),t[4]!==void 0&&(ns.shapes=t[4]),Ee=new kn({props:ns}),O.push(()=>P(Ee,"currentShape",Hr)),O.push(()=>P(Ee,"shapes",Yr));function jr(p){t[40](p)}function Jr(p){t[41](p)}let ss={transformation:Tt.flipHorizontal,pushState:t[10],$$slots:{default:[mo]},$$scope:{ctx:t}};t[5]!==void 0&&(ss.currentShape=t[5]),t[4]!==void 0&&(ss.shapes=t[4]),Oe=new kn({props:ss}),O.push(()=>P(Oe,"currentShape",jr)),O.push(()=>P(Oe,"shapes",Jr));function Vr(p){t[42](p)}function zr(p){t[43](p)}let rs={transformation:Tt.flipVertical,pushState:t[10],$$slots:{default:[bo]},$$scope:{ctx:t}};t[5]!==void 0&&(rs.currentShape=t[5]),t[4]!==void 0&&(rs.shapes=t[4]),Ne=new kn({props:rs}),O.push(()=>P(Ne,"currentShape",Vr)),O.push(()=>P(Ne,"shapes",zr));function Xr(p){t[44](p)}let Us={rotate:t[3]?47.15:0};t[4]!==void 0&&(Us.shapes=t[4]),He=new Vt({props:Us}),O.push(()=>P(He,"shapes",Xr));function Wr(p){t[45](p)}let Fs={rotate:t[3]?300.82:0};t[4]!==void 0&&(Fs.shapes=t[4]),xe=new Vt({props:Fs}),O.push(()=>P(xe,"shapes",Wr));function Kr(p){t[46](p)}let Ps={rotate:t[3]?216.39:0};t[4]!==void 0&&(Ps.shapes=t[4]),et=new Vt({props:Ps}),O.push(()=>P(et,"shapes",Kr));function Qr(p){t[47](p)}let qs={rotate:t[3]?137.96:0};t[4]!==void 0&&(qs.shapes=t[4]),tt=new Vt({props:qs}),O.push(()=>P(tt,"shapes",Qr));function Zr(p){t[48](p)}let As={rotate:t[3]?90:0};t[4]!==void 0&&(As.shapes=t[4]),nt=new Vt({props:As}),O.push(()=>P(nt,"shapes",Zr));function $r(p){t[49](p)}function xr(p){t[50](p)}function el(p){t[51](p)}function tl(p){t[52](p)}let At={pushState:t[10]};t[1]!==void 0&&(At.currentTool=t[1]),t[2]!==void 0&&(At.currentColor=t[2]),t[4]!==void 0&&(At.shapes=t[4]),t[5]!==void 0&&(At.currentShape=t[5]),Me=new Zl({props:At}),O.push(()=>P(Me,"currentTool",$r)),O.push(()=>P(Me,"currentColor",xr)),O.push(()=>P(Me,"shapes",el)),O.push(()=>P(Me,"currentShape",tl));function nl(p){t[53](p)}function sl(p){t[54](p)}function rl(p){t[55](p)}function ll(p){t[56](p)}let Ht={historyChange:On.undo,$$slots:{default:[vo]},$$scope:{ctx:t}};t[6]!==void 0&&(Ht.undoStack=t[6]),t[7]!==void 0&&(Ht.redoStack=t[7]),t[4]!==void 0&&(Ht.shapes=t[4]),t[5]!==void 0&&(Ht.currentShape=t[5]),Be=new tr({props:Ht}),O.push(()=>P(Be,"undoStack",nl)),O.push(()=>P(Be,"redoStack",sl)),O.push(()=>P(Be,"shapes",rl)),O.push(()=>P(Be,"currentShape",ll));function ol(p){t[57](p)}function il(p){t[58](p)}function al(p){t[59](p)}function ul(p){t[60](p)}let Yt={historyChange:On.redo,$$slots:{default:[yo]},$$scope:{ctx:t}};t[6]!==void 0&&(Yt.undoStack=t[6]),t[7]!==void 0&&(Yt.redoStack=t[7]),t[4]!==void 0&&(Yt.shapes=t[4]),t[5]!==void 0&&(Yt.currentShape=t[5]),De=new tr({props:Yt}),O.push(()=>P(De,"undoStack",ol)),O.push(()=>P(De,"redoStack",il)),O.push(()=>P(De,"shapes",al)),O.push(()=>P(De,"currentShape",ul));const Hs=[wo,So],st=[];function Ys(p,C){return p[5]&&p[1]===x.SELECT?0:1}return Le=Ys(t),Re=st[Le]=Hs[Le](t),{c(){e=v("dialog"),n=v("div"),r=v("b"),r.textContent="Shape",l=R(),a=v("div"),o=v("p"),o.textContent="Name/",i=R(),u=v("b"),c=je(t[0]),h=R(),d=v("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="100%" height="100%" class="svelte-106cdxr"><line x1="1" y1="1" x2="15" y2="15" stroke="white" stroke-linecap="round" stroke-width="2" class="svelte-106cdxr"></line><line x1="1" y1="15" x2="15" y2="1" stroke="white" stroke-linecap="round" stroke-width="2" class="svelte-106cdxr"></line></svg>',b=R(),g=v("br"),m=R(),T=v("div"),k=v("div"),ue(L.$$.fragment),Y=R(),ue(q.$$.fragment),M=R(),ue(E.$$.fragment),te=R(),ue(V.$$.fragment),X=R(),ue($.$$.fragment),ke=R(),ue(me.$$.fragment),Ve=R(),ue(be.$$.fragment),ze=R(),ue(he.$$.fragment),re=R(),Q=v("div"),de=w("svg"),qe=w("path"),it=R(),Ze=v("div"),at=R(),ce=v("input"),pe=R(),_e=v("div"),ue(Se.$$.fragment),ve=R(),ue(Ee.$$.fragment),tn=R(),ue(Oe.$$.fragment),nn=R(),ue(Ne.$$.fragment),sn=R(),Ae=v("div"),we=v("div"),$e=v("div"),ut=v("div"),ue(He.$$.fragment),_=R(),ft=v("p"),ft.textContent="9",ws=R(),pt=v("div"),Gt=v("div"),ue(xe.$$.fragment),ks=R(),rn=v("p"),rn.textContent="12",Ts=R(),ht=v("div"),Ut=v("div"),ue(et.$$.fragment),Cs=R(),ln=v("p"),ln.textContent="20",Ls=R(),dt=v("div"),Ft=v("div"),ue(tt.$$.fragment),Is=R(),on=v("p"),on.textContent="30",Es=R(),_t=v("div"),Pt=v("div"),ue(nt.$$.fragment),Os=R(),an=v("p"),an.textContent="50",Ns=R(),ue(Me.$$.fragment),Ms=R(),Xe=v("div"),gt=v("div"),ue(Be.$$.fragment),Bs=R(),ue(De.$$.fragment),Ds=R(),un=v("div"),Rs=R(),Re.c(),s(r,"class","svelte-106cdxr"),oe(o,"margin-right","0.25em"),s(o,"class","svelte-106cdxr"),s(u,"contenteditable","true"),oe(u,"margin-left","0"),s(u,"class","svelte-106cdxr"),t[0]===void 0&&Qe(()=>t[17].call(u)),s(a,"class","svelte-106cdxr"),s(d,"class","svelte-106cdxr"),s(n,"class","title-bar svelte-106cdxr"),s(k,"class","svelte-106cdxr"),s(qe,"d","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"),s(qe,"class","svelte-106cdxr"),s(de,"xmlns","http://www.w3.org/2000/svg"),s(de,"viewBox","0 0 512 512"),s(de,"class","icon svelte-106cdxr"),oe(Ze,"width","0.5em"),s(Ze,"class","svelte-106cdxr"),s(ce,"type","color"),oe(Q,"align-items","center"),s(Q,"class","svelte-106cdxr"),s(_e,"class","svelte-106cdxr"),s(T,"class","tool-bar svelte-106cdxr"),oe(ut,"width","9px"),s(ut,"class","svelte-106cdxr"),s(ft,"class","svelte-106cdxr"),s($e,"class","svelte-106cdxr"),oe(Gt,"width","12px"),s(Gt,"class","svelte-106cdxr"),s(rn,"class","svelte-106cdxr"),s(pt,"class","svelte-106cdxr"),oe(Ut,"width","20px"),s(Ut,"class","svelte-106cdxr"),s(ln,"class","svelte-106cdxr"),s(ht,"class","svelte-106cdxr"),oe(Ft,"width","30px"),s(Ft,"class","svelte-106cdxr"),s(on,"class","svelte-106cdxr"),s(dt,"class","svelte-106cdxr"),oe(Pt,"width","50px"),s(Pt,"class","svelte-106cdxr"),s(an,"class","svelte-106cdxr"),s(_t,"class","svelte-106cdxr"),s(we,"class","tool-tray-left svelte-106cdxr"),s(gt,"class","svelte-106cdxr"),oe(un,"height","3em"),s(un,"class","svelte-106cdxr"),s(Xe,"class","tool-tray-right svelte-106cdxr"),s(Ae,"class","middle svelte-106cdxr"),s(e,"class","editor svelte-106cdxr")},m(p,C){j(p,e,C),f(e,n),f(n,r),f(n,l),f(n,a),f(a,o),f(a,i),f(a,u),f(u,c),t[0]!==void 0&&(u.textContent=t[0]),f(n,h),f(n,d),t[18](n),f(e,b),f(e,g),f(e,m),f(e,T),f(T,k),ie(L,k,null),f(k,Y),ie(q,k,null),f(k,M),ie(E,k,null),f(k,te),ie(V,k,null),f(k,X),ie($,k,null),f(k,ke),ie(me,k,null),f(k,Ve),ie(be,k,null),f(k,ze),ie(he,k,null),f(T,re),f(T,Q),f(Q,de),f(de,qe),f(Q,it),f(Q,Ze),f(Q,at),f(Q,ce),Js(ce,t[2]),f(T,pe),f(T,_e),ie(Se,_e,null),f(_e,ve),ie(Ee,_e,null),f(_e,tn),ie(Oe,_e,null),f(_e,nn),ie(Ne,_e,null),f(e,sn),f(e,Ae),f(Ae,we),f(we,$e),f($e,ut),ie(He,ut,null),f($e,_),f($e,ft),f(we,ws),f(we,pt),f(pt,Gt),ie(xe,Gt,null),f(pt,ks),f(pt,rn),f(we,Ts),f(we,ht),f(ht,Ut),ie(et,Ut,null),f(ht,Cs),f(ht,ln),f(we,Ls),f(we,dt),f(dt,Ft),ie(tt,Ft,null),f(dt,Is),f(dt,on),f(we,Es),f(we,_t),f(_t,Pt),ie(nt,Pt,null),f(_t,Os),f(_t,an),f(Ae,Ns),ie(Me,Ae,null),f(Ae,Ms),f(Ae,Xe),f(Xe,gt),ie(Be,gt,null),f(gt,Bs),ie(De,gt,null),f(Xe,Ds),f(Xe,un),f(Xe,Rs),st[Le].m(Xe,null),t[70](e),qt=!0,zn||(Gs=[J(u,"input",t[17]),J(d,"click",t[11]),J(n,"mousedown",t[12]),J(n,"mouseup",t[13]),J(ce,"input",t[35]),J(e,"mousemove",t[14])],zn=!0)},p(p,C){(!qt||C[0]&1)&&gl(c,p[0]),C[0]&1&&p[0]!==u.textContent&&(u.textContent=p[0]);const cn={};C[2]&32768&&(cn.$$scope={dirty:C,ctx:p}),!D&&C[0]&32&&(D=!0,cn.currentShape=p[5],F(()=>D=!1)),!B&&C[0]&2&&(B=!0,cn.currentTool=p[1],F(()=>B=!1)),L.$set(cn);const fn={};C[2]&32768&&(fn.$$scope={dirty:C,ctx:p}),!y&&C[0]&32&&(y=!0,fn.currentShape=p[5],F(()=>y=!1)),!N&&C[0]&2&&(N=!0,fn.currentTool=p[1],F(()=>N=!1)),q.$set(fn);const pn={};C[2]&32768&&(pn.$$scope={dirty:C,ctx:p}),!z&&C[0]&32&&(z=!0,pn.currentShape=p[5],F(()=>z=!1)),!ee&&C[0]&2&&(ee=!0,pn.currentTool=p[1],F(()=>ee=!1)),E.$set(pn);const hn={};C[2]&32768&&(hn.$$scope={dirty:C,ctx:p}),!I&&C[0]&32&&(I=!0,hn.currentShape=p[5],F(()=>I=!1)),!S&&C[0]&2&&(S=!0,hn.currentTool=p[1],F(()=>S=!1)),V.$set(hn);const dn={};C[2]&32768&&(dn.$$scope={dirty:C,ctx:p}),!W&&C[0]&32&&(W=!0,dn.currentShape=p[5],F(()=>W=!1)),!se&&C[0]&2&&(se=!0,dn.currentTool=p[1],F(()=>se=!1)),$.$set(dn);const _n={};C[2]&32768&&(_n.$$scope={dirty:C,ctx:p}),!Pe&&C[0]&32&&(Pe=!0,_n.currentShape=p[5],F(()=>Pe=!1)),!Te&&C[0]&2&&(Te=!0,_n.currentTool=p[1],F(()=>Te=!1)),me.$set(_n);const gn={};C[2]&32768&&(gn.$$scope={dirty:C,ctx:p}),!Ce&&C[0]&32&&(Ce=!0,gn.currentShape=p[5],F(()=>Ce=!1)),!ge&&C[0]&2&&(ge=!0,gn.currentTool=p[1],F(()=>ge=!1)),be.$set(gn);const mn={};C[2]&32768&&(mn.$$scope={dirty:C,ctx:p}),!U&&C[0]&32&&(U=!0,mn.currentShape=p[5],F(()=>U=!1)),!K&&C[0]&2&&(K=!0,mn.currentTool=p[1],F(()=>K=!1)),he.$set(mn),C[0]&4&&Js(ce,p[2]);const bn={};C[2]&32768&&(bn.$$scope={dirty:C,ctx:p}),!le&&C[0]&32&&(le=!0,bn.currentShape=p[5],F(()=>le=!1)),!ne&&C[0]&16&&(ne=!0,bn.shapes=p[4],F(()=>ne=!1)),Se.$set(bn);const vn={};C[2]&32768&&(vn.$$scope={dirty:C,ctx:p}),!Et&&C[0]&32&&(Et=!0,vn.currentShape=p[5],F(()=>Et=!1)),!Ot&&C[0]&16&&(Ot=!0,vn.shapes=p[4],F(()=>Ot=!1)),Ee.$set(vn);const yn={};C[2]&32768&&(yn.$$scope={dirty:C,ctx:p}),!Nt&&C[0]&32&&(Nt=!0,yn.currentShape=p[5],F(()=>Nt=!1)),!Mt&&C[0]&16&&(Mt=!0,yn.shapes=p[4],F(()=>Mt=!1)),Oe.$set(yn);const Sn={};C[2]&32768&&(Sn.$$scope={dirty:C,ctx:p}),!Bt&&C[0]&32&&(Bt=!0,Sn.currentShape=p[5],F(()=>Bt=!1)),!Dt&&C[0]&16&&(Dt=!0,Sn.shapes=p[4],F(()=>Dt=!1)),Ne.$set(Sn);const ls={};C[0]&8&&(ls.rotate=p[3]?47.15:0),!Rt&&C[0]&16&&(Rt=!0,ls.shapes=p[4],F(()=>Rt=!1)),He.$set(ls);const os={};C[0]&8&&(os.rotate=p[3]?300.82:0),!Nn&&C[0]&16&&(Nn=!0,os.shapes=p[4],F(()=>Nn=!1)),xe.$set(os);const is={};C[0]&8&&(is.rotate=p[3]?216.39:0),!Mn&&C[0]&16&&(Mn=!0,is.shapes=p[4],F(()=>Mn=!1)),et.$set(is);const as={};C[0]&8&&(as.rotate=p[3]?137.96:0),!Bn&&C[0]&16&&(Bn=!0,as.shapes=p[4],F(()=>Bn=!1)),tt.$set(as);const us={};C[0]&8&&(us.rotate=p[3]?90:0),!Dn&&C[0]&16&&(Dn=!0,us.shapes=p[4],F(()=>Dn=!1)),nt.$set(us);const jt={};!Rn&&C[0]&2&&(Rn=!0,jt.currentTool=p[1],F(()=>Rn=!1)),!Gn&&C[0]&4&&(Gn=!0,jt.currentColor=p[2],F(()=>Gn=!1)),!Un&&C[0]&16&&(Un=!0,jt.shapes=p[4],F(()=>Un=!1)),!Fn&&C[0]&32&&(Fn=!0,jt.currentShape=p[5],F(()=>Fn=!1)),Me.$set(jt);const mt={};C[2]&32768&&(mt.$$scope={dirty:C,ctx:p}),!Pn&&C[0]&64&&(Pn=!0,mt.undoStack=p[6],F(()=>Pn=!1)),!qn&&C[0]&128&&(qn=!0,mt.redoStack=p[7],F(()=>qn=!1)),!An&&C[0]&16&&(An=!0,mt.shapes=p[4],F(()=>An=!1)),!Hn&&C[0]&32&&(Hn=!0,mt.currentShape=p[5],F(()=>Hn=!1)),Be.$set(mt);const bt={};C[2]&32768&&(bt.$$scope={dirty:C,ctx:p}),!Yn&&C[0]&64&&(Yn=!0,bt.undoStack=p[6],F(()=>Yn=!1)),!jn&&C[0]&128&&(jn=!0,bt.redoStack=p[7],F(()=>jn=!1)),!Jn&&C[0]&16&&(Jn=!0,bt.shapes=p[4],F(()=>Jn=!1)),!Vn&&C[0]&32&&(Vn=!0,bt.currentShape=p[5],F(()=>Vn=!1)),De.$set(bt);let cs=Le;Le=Ys(p),Le===cs?st[Le].p(p,C):(lt(),H(st[cs],1,1,()=>{st[cs]=null}),ot(),Re=st[Le],Re?Re.p(p,C):(Re=st[Le]=Hs[Le](p),Re.c()),G(Re,1),Re.m(Xe,null))},i(p){qt||(G(L.$$.fragment,p),G(q.$$.fragment,p),G(E.$$.fragment,p),G(V.$$.fragment,p),G($.$$.fragment,p),G(me.$$.fragment,p),G(be.$$.fragment,p),G(he.$$.fragment,p),G(Se.$$.fragment,p),G(Ee.$$.fragment,p),G(Oe.$$.fragment,p),G(Ne.$$.fragment,p),G(He.$$.fragment,p),G(xe.$$.fragment,p),G(et.$$.fragment,p),G(tt.$$.fragment,p),G(nt.$$.fragment,p),G(Me.$$.fragment,p),G(Be.$$.fragment,p),G(De.$$.fragment,p),G(Re),qt=!0)},o(p){H(L.$$.fragment,p),H(q.$$.fragment,p),H(E.$$.fragment,p),H(V.$$.fragment,p),H($.$$.fragment,p),H(me.$$.fragment,p),H(be.$$.fragment,p),H(he.$$.fragment,p),H(Se.$$.fragment,p),H(Ee.$$.fragment,p),H(Oe.$$.fragment,p),H(Ne.$$.fragment,p),H(He.$$.fragment,p),H(xe.$$.fragment,p),H(et.$$.fragment,p),H(tt.$$.fragment,p),H(nt.$$.fragment,p),H(Me.$$.fragment,p),H(Be.$$.fragment,p),H(De.$$.fragment,p),H(Re),qt=!1},d(p){p&&A(e),t[18](null),ae(L),ae(q),ae(E),ae(V),ae($),ae(me),ae(be),ae(he),ae(Se),ae(Ee),ae(Oe),ae(Ne),ae(He),ae(xe),ae(et),ae(tt),ae(nt),ae(Me),ae(Be),ae(De),st[Le].d(),t[70](null),zn=!1,ye(Gs)}}}const rr="#ffffff";function Eo(t,e,n){let r="default",l=x.SELECT,a=rr,o=0,i=!0,u=[],c=null,h=[],d=[],b=!1,g,m,T;const k=()=>{const _=structuredClone(u);JSON.stringify(_)!=JSON.stringify(h.at(-1))&&(h.push(_),n(7,d=[]))},L=()=>{n(0,r="default"),n(1,l=x.SELECT),n(2,a=rr),o=0,n(3,i=!0),n(4,u=[]),n(5,c=null),n(6,h=[]),n(7,d=[])},D=_=>{if(!gs.validateJSONShape(_))throw new Error("Invalid shape.");n(0,r=_.name),o=_.editableColorIndex,n(3,i=_.rotate);for(var ft of _.elements)u.push(fe.fromJSON(ft));n(4,u)};let{closeHook:B}=e;const Y=_=>{_&&D(_),g.showModal()},q=()=>({name:r,elements:u.map(_=>fe.toJSON(_)),editableColorIndex:o,rotate:i}),y=()=>{B(q()),L(),g.close()};function N(_){_.target===T&&(b=!0,m={x:_.clientX,y:_.clientY})}function M(_){b=!1}function E(_){b&&(n(8,g.style.left=`${g.offsetLeft+_.clientX-m.x}px`,g),n(8,g.style.top=`${g.offsetTop+_.clientY-m.y}px`,g),m={x:_.clientX,y:_.clientY})}function z(){r=this.textContent,n(0,r)}function ee(_){O[_?"unshift":"push"](()=>{T=_,n(9,T)})}function te(_){c=_,n(5,c)}function V(_){l=_,n(1,l)}function I(_){c=_,n(5,c)}function S(_){l=_,n(1,l)}function X(_){c=_,n(5,c)}function $(_){l=_,n(1,l)}function W(_){c=_,n(5,c)}function se(_){l=_,n(1,l)}function ke(_){c=_,n(5,c)}function me(_){l=_,n(1,l)}function Pe(_){c=_,n(5,c)}function Te(_){l=_,n(1,l)}function Ve(_){c=_,n(5,c)}function be(_){l=_,n(1,l)}function Ce(_){c=_,n(5,c)}function ge(_){l=_,n(1,l)}function ze(){a=this.value,n(2,a)}function he(_){c=_,n(5,c)}function U(_){u=_,n(4,u)}function K(_){c=_,n(5,c)}function re(_){u=_,n(4,u)}function Q(_){c=_,n(5,c)}function de(_){u=_,n(4,u)}function qe(_){c=_,n(5,c)}function it(_){u=_,n(4,u)}function Ze(_){u=_,n(4,u)}function at(_){u=_,n(4,u)}function ce(_){u=_,n(4,u)}function pe(_){u=_,n(4,u)}function _e(_){u=_,n(4,u)}function Se(_){l=_,n(1,l)}function le(_){a=_,n(2,a)}function ne(_){u=_,n(4,u)}function ve(_){c=_,n(5,c)}function Ee(_){h=_,n(6,h)}function Et(_){d=_,n(7,d)}function Ot(_){u=_,n(4,u)}function tn(_){c=_,n(5,c)}function Oe(_){h=_,n(6,h)}function Nt(_){d=_,n(7,d)}function Mt(_){u=_,n(4,u)}function nn(_){c=_,n(5,c)}function Ne(_){c=_,n(5,c)}function Bt(_){u=_,n(4,u)}function Dt(_){c=_,n(5,c)}function sn(_){u=_,n(4,u)}function Ae(_){c=_,n(5,c)}function we(_){u=_,n(4,u)}function $e(_){c=_,n(5,c)}function ut(_){u=_,n(4,u)}function He(){i=this.checked,n(3,i)}function Rt(_){O[_?"unshift":"push"](()=>{g=_,n(8,g)})}return t.$$set=_=>{"closeHook"in _&&n(15,B=_.closeHook)},[r,l,a,i,u,c,h,d,g,T,k,y,N,M,E,B,Y,z,ee,te,V,I,S,X,$,W,se,ke,me,Pe,Te,Ve,be,Ce,ge,ze,he,U,K,re,Q,de,qe,it,Ze,at,ce,pe,_e,Se,le,ne,ve,Ee,Et,Ot,tn,Oe,Nt,Mt,nn,Ne,Bt,Dt,sn,Ae,we,$e,ut,He,Rt]}class Oo extends Fe{constructor(e){super(),Ue(this,e,Eo,Io,Ie,{closeHook:15,open:16},null,[-1,-1,-1])}get open(){return this.$$.ctx[16]}}function lr(t,e,n){const r=t.slice();return r[45]=e[n],r[46]=e,r[47]=n,r}function or(t){let e,n;return e=new Bl({props:{closeLibrary:t[13],addNewShapes:t[14]}}),{c(){ue(e.$$.fragment)},m(r,l){ie(e,r,l),n=!0},p(r,l){const a={};l[0]&8192&&(a.closeLibrary=r[13]),l[0]&16384&&(a.addNewShapes=r[14]),e.$set(a)},i(r){n||(G(e.$$.fragment,r),n=!0)},o(r){H(e.$$.fragment,r),n=!1},d(r){ae(e,r)}}}function ir(t){let e,n,r,l,a,o,i,u;return{c(){e=v("div"),n=v("button"),n.innerHTML='<img class="button-image-left svelte-1o39pry" src="icons/library-icon.png" alt="library"/>Library',r=R(),l=v("button"),l.innerHTML='<img class="button-image-left svelte-1o39pry" src="icons/model-icon.png" alt="model"/>Model',s(n,"class","dropdown-button library-button svelte-1o39pry"),s(l,"class","dropdown-button model-button svelte-1o39pry"),s(e,"class","dropdown-content svelte-1o39pry")},m(c,h){j(c,e,h),f(e,n),f(e,r),f(e,l),o=!0,i||(u=[J(n,"click",function(){Je(t[0].openLibrary())&&t[0].openLibrary().apply(this,arguments)}),J(l,"click",t[23])],i=!0)},p(c,h){t=c},i(c){o||(Qe(()=>{o&&(a||(a=En(e,Qt,{duration:500},!0)),a.run(1))}),o=!0)},o(c){a||(a=En(e,Qt,{duration:500},!1)),a.run(0),o=!1},d(c){c&&A(e),c&&a&&a.end(),i=!1,ye(u)}}}function ar(t,e){let n,r,l,a,o,i,u,c,h,d,b,g,m,T,k=e[45].name+"",L,D,B,Y,q,y,N,M;function E(...W){return e[25](e[45],...W)}function z(...W){return e[26](e[45],...W)}function ee(...W){return e[27](e[45],...W)}function te(...W){return e[28](e[45],...W)}function V(){return e[29](e[45],e[46],e[47])}function I(){return e[30](e[45],e[46],e[47])}function S(){return e[31](e[45],e[46],e[47])}function X(){return e[32](e[45],e[46],e[47])}function $(){return e[33](e[45])}return{key:t,first:null,c(){n=v("button"),r=v("div"),l=v("button"),a=R(),o=v("button"),c=R(),h=v("div"),d=v("div"),b=v("img"),m=R(),T=v("div"),L=je(k),B=R(),s(l,"aria-label","Duplicate shape"),s(l,"class","duplicate-icon svelte-1o39pry"),oe(l,"display",e[45].hover?"block":"none"),oe(l,"background-image","url('icons/duplicate-icon.png')"),s(o,"aria-label","Delete shape"),s(o,"class",i="delete-icon "+(e[45].deletable?"":"button-disabled")+" svelte-1o39pry"),oe(o,"display",e[45].hover?"block":"none"),oe(o,"background-image","url('icons/delete-icon.png')"),o.disabled=u=!e[45].deletable,s(r,"class","shape-selector-item-buttons svelte-1o39pry"),s(b,"class","shape-selector-item-image svelte-1o39pry"),ct(b.src,g=e[45].image)||s(b,"src",g),s(b,"alt",""),s(d,"class","shape-selector-item-image-div svelte-1o39pry"),s(T,"class",D="shape-selector-item-name "+(e[45].id===e[8]?"font-selected":"")+" svelte-1o39pry"),s(h,"class","shape-selector-details svelte-1o39pry"),s(n,"class",Y="shape-selector-item "+(e[45].id===e[8]?"selected":"")+" "+(e[9].includes(e[45].id)?"recently-imported":"")+" "+(e[45].isDeleting?"is-deleting":"")+" svelte-1o39pry"),this.first=n},m(W,se){j(W,n,se),f(n,r),f(r,l),f(r,a),f(r,o),f(n,c),f(n,h),f(h,d),f(d,b),f(h,m),f(h,T),f(T,L),f(n,B),N||(M=[J(l,"click",E),J(l,"keydown",z),J(o,"click",ee),J(o,"keydown",te),pl(q=e[17].call(null,n,e[9].includes(e[45].id))),J(n,"mouseenter",V),J(n,"mouseleave",I),J(n,"focus",S),J(n,"blur",X),J(n,"click",$)],N=!0)},p(W,se){e=W,se[0]&128&&oe(l,"display",e[45].hover?"block":"none"),se[0]&128&&i!==(i="delete-icon "+(e[45].deletable?"":"button-disabled")+" svelte-1o39pry")&&s(o,"class",i),se[0]&128&&oe(o,"display",e[45].hover?"block":"none"),se[0]&128&&u!==(u=!e[45].deletable)&&(o.disabled=u),se[0]&128&&!ct(b.src,g=e[45].image)&&s(b,"src",g),se[0]&128&&k!==(k=e[45].name+"")&&gr(L,k),se[0]&384&&D!==(D="shape-selector-item-name "+(e[45].id===e[8]?"font-selected":"")+" svelte-1o39pry")&&s(T,"class",D),se[0]&896&&Y!==(Y="shape-selector-item "+(e[45].id===e[8]?"selected":"")+" "+(e[9].includes(e[45].id)?"recently-imported":"")+" "+(e[45].isDeleting?"is-deleting":"")+" svelte-1o39pry")&&s(n,"class",Y),q&&Je(q.update)&&se[0]&640&&q.update.call(null,e[9].includes(e[45].id))},i(W){y||Qe(()=>{y=Ll(n,Qt,{}),y.start()})},o:Z,d(W){W&&A(n),N=!1,ye(M)}}}function No(t){let e,n,r,l,a,o,i,u,c,h,d,b,g,m,T,k,L,D,B,Y,q,y,N,M,E,z,ee,te,V,I,S,X,$,W,se,ke,me,Pe,Te,Ve,be,Ce,ge,ze,he,U,K,re=[],Q=new Map,de,qe,it;function Ze(le){t[18](le)}let at={closeHook:t[16]};t[1]!==void 0&&(at.open=t[1]),e=new Oo({props:at}),O.push(()=>P(e,"open",Ze));let ce=t[12]&&or(t),pe=t[11]&&ir(t),_e=t[7];const Se=le=>le[45].id;for(let le=0;le<_e.length;le+=1){let ne=lr(t,_e,le),ve=Se(ne);Q.set(ve,re[le]=ar(ve,ne))}return{c(){ue(e.$$.fragment),r=R(),l=v("div"),ce&&ce.c(),a=R(),o=v("div"),i=v("div"),u=v("div"),c=v("div"),c.innerHTML=`<img src="icons/header-logo.png" alt="header logo" class="svelte-1o39pry"/> 
          <h2 class="svelte-1o39pry">Shape Editor</h2>`,h=R(),d=v("button"),d.innerHTML='<img src="icons/close-button.png" alt="X" class="svelte-1o39pry"/>',b=R(),g=v("div"),m=v("div"),T=v("h3"),T.textContent="Selection Mode",k=R(),L=v("div"),D=v("div"),B=v("button"),Y=v("img"),y=je("Turtle"),M=R(),E=v("button"),z=v("img"),te=je("Link"),I=R(),S=v("div"),X=v("button"),X.innerHTML='<img class="button-image-right svelte-1o39pry" src="icons/create-new-icon.png" alt="create new"/>Create New',$=R(),W=v("div"),se=v("button"),ke=v("img"),Pe=je("Import From..."),Ve=R(),pe&&pe.c(),be=R(),Ce=v("div"),ge=v("input"),ze=R(),he=v("div"),U=v("div"),K=v("div");for(let le=0;le<re.length;le+=1)re[le].c();s(c,"class","shape-selector-header-logo svelte-1o39pry"),s(d,"class","close-button svelte-1o39pry"),s(u,"class","shape-selector-header svelte-1o39pry"),s(T,"class","svelte-1o39pry"),s(Y,"class","button-image-left svelte-1o39pry"),ct(Y.src,q="icons/turtle-icon.png")||s(Y,"src",q),s(Y,"alt","turtle button"),s(B,"class",N="turtle-button "+(t[6]==="turtle"?"selected-button":"unselected-button")+" svelte-1o39pry"),s(z,"class","button-image-left svelte-1o39pry"),ct(z.src,ee="icons/link-icon.png")||s(z,"src",ee),s(z,"alt","link button"),s(E,"class",V="link-button "+(t[6]==="link"?"selected-button":"unselected-button")+" svelte-1o39pry"),s(D,"class","mode-selector-buttons svelte-1o39pry"),s(X,"class","create-new-button svelte-1o39pry"),s(ke,"class","button-image-right svelte-1o39pry"),ct(ke.src,me="icons/import-icon.png")||s(ke,"src",me),s(ke,"alt","import"),s(se,"class",Te="import-shapes-button "+(t[11]?"clicked":"")+" svelte-1o39pry"),s(W,"class","dropdown svelte-1o39pry"),s(S,"class","shape-selector-buttons svelte-1o39pry"),s(L,"class","selector-buttons svelte-1o39pry"),s(m,"class","mode-selector svelte-1o39pry"),ge.value=t[5],s(ge,"placeholder","Search"),oe(ge,"background-image","url('icons/search-icon.png')"),s(ge,"class","svelte-1o39pry"),s(Ce,"class","shape-selector-search svelte-1o39pry"),s(K,"class","shape-selector-grid-inner svelte-1o39pry"),s(U,"class","scrollbar-wrapper svelte-1o39pry"),s(he,"class","shape-selector-grid svelte-1o39pry"),s(g,"class","inner-container svelte-1o39pry"),s(i,"class","shape-selector svelte-1o39pry"),s(o,"class","shape-selector-dialog svelte-1o39pry"),oe(o,"display",t[10]?"block":"none",1)},m(le,ne){ie(e,le,ne),j(le,r,ne),j(le,l,ne),ce&&ce.m(l,null),f(l,a),f(l,o),f(o,i),f(i,u),f(u,c),f(u,h),f(u,d),t[20](u),f(i,b),f(i,g),f(g,m),f(m,T),f(m,k),f(m,L),f(L,D),f(D,B),f(B,Y),f(B,y),f(D,M),f(D,E),f(E,z),f(E,te),f(L,I),f(L,S),f(S,X),f(S,$),f(S,W),f(W,se),f(se,ke),f(se,Pe),f(W,Ve),pe&&pe.m(W,null),f(g,be),f(g,Ce),f(Ce,ge),f(g,ze),f(g,he),f(he,U),f(U,K);for(let ve=0;ve<re.length;ve+=1)re[ve]&&re[ve].m(K,null);t[34](K),t[35](o),de=!0,qe||(it=[J(d,"click",t[19]),J(B,"click",t[21]),J(E,"click",t[22]),J(X,"click",t[15]()),J(se,"click",function(){Je(t[0].importShapes())&&t[0].importShapes().apply(this,arguments)}),J(ge,"input",t[24])],qe=!0)},p(le,ne){t=le;const ve={};!n&&ne[0]&2&&(n=!0,ve.open=t[1],F(()=>n=!1)),e.$set(ve),t[12]?ce?(ce.p(t,ne),ne[0]&4096&&G(ce,1)):(ce=or(t),ce.c(),G(ce,1),ce.m(l,a)):ce&&(lt(),H(ce,1,1,()=>{ce=null}),ot()),(!de||ne[0]&64&&N!==(N="turtle-button "+(t[6]==="turtle"?"selected-button":"unselected-button")+" svelte-1o39pry"))&&s(B,"class",N),(!de||ne[0]&64&&V!==(V="link-button "+(t[6]==="link"?"selected-button":"unselected-button")+" svelte-1o39pry"))&&s(E,"class",V),(!de||ne[0]&2048&&Te!==(Te="import-shapes-button "+(t[11]?"clicked":"")+" svelte-1o39pry"))&&s(se,"class",Te),t[11]?pe?(pe.p(t,ne),ne[0]&2048&&G(pe,1)):(pe=ir(t),pe.c(),G(pe,1),pe.m(W,null)):pe&&(lt(),H(pe,1,1,()=>{pe=null}),ot()),(!de||ne[0]&32&&ge.value!==t[5])&&(ge.value=t[5]),ne[0]&897&&(_e=t[7],re=wr(re,ne,Se,1,t,_e,Q,K,Sr,ar,null,lr)),(!de||ne[0]&1024)&&oe(o,"display",t[10]?"block":"none",1)},i(le){if(!de){G(e.$$.fragment,le),G(ce),G(pe);for(let ne=0;ne<_e.length;ne+=1)G(re[ne]);de=!0}},o(le){H(e.$$.fragment,le),H(ce),H(pe),de=!1},d(le){ae(e,le),le&&A(r),le&&A(l),ce&&ce.d(),t[20](null),pe&&pe.d();for(let ne=0;ne<re.length;ne+=1)re[ne].d();t[34](null),t[35](null),qe=!1,ye(it)}}}function Mo(t,e,n){let r;const l=U=>U?()=>{try{r(U)}catch(K){console.error(K)}}:()=>{r()};function a(U){c.createSVGShape(U.name,ms.toSVG(U))}let o,i,u,c,h,d,b=[],g=null,m=[],T=!0,k=!1,L=!1,D,B;const Y=Ge([]),q=Ge([]),y=Ge(null),N=Ge([]),M=Ge(!0),E=Ge(!1),z=Ge(!1);mr(()=>{const U={onUpdateShapes:Q=>{Y.set(Q)},onUpdateFilteredShapes:Q=>{q.set(Q)},onUpdateSelectedItemId:Q=>{y.set(Q)},onUpdateDialogOpen:Q=>{M.set(Q)},onUpdateImportButtonSelected:Q=>{E.set(Q)},onUpdateLibraryOpen:Q=>{z.set(Q)},onUpdateRecentlyImportedShapes:Q=>{N.set(Q)}};n(0,c=new El(document.getElementById("Container"),U));let K=!1,re=[0,0];n(13,D=()=>{c.closeLibrary()}),n(14,B=Q=>{c.addNewShapes(Q)}),i.addEventListener("mousedown",Q=>{K=!0,re=[o.offsetLeft-Q.clientX,o.offsetTop-Q.clientY]},!0),document.addEventListener("mouseup",()=>{K=!1},!0),document.addEventListener("mousemove",Q=>{Q.preventDefault(),K&&(n(2,o.style.left=Q.clientX+re[0]+"px",o),n(2,o.style.top=Q.clientY+re[1]+"px",o))},!0)});function ee(U,K){if(K){let re=U.offsetTop-u.offsetTop;(re<u.scrollTop||re>u.scrollTop+u.offsetHeight)&&n(4,u.scrollTop=re,u)}}Y.subscribe(U=>{}),q.subscribe(U=>{n(7,b=U)}),y.subscribe(U=>{n(8,g=U)}),M.subscribe(U=>{n(10,T=U)}),E.subscribe(U=>{n(11,k=U)}),z.subscribe(U=>{n(12,L=U)}),N.subscribe(U=>{n(9,m=U)});function te(U){r=U,n(1,r)}const V=()=>c.toggleDialog();function I(U){O[U?"unshift":"push"](()=>{i=U,n(3,i)})}const S=()=>{n(6,d="turtle"),c.filterShapes("turtle")},X=()=>{n(6,d="link"),c.filterShapes("link")},$=()=>console.log("model"),W=U=>c.handleSearch(U.target),se=(U,K)=>{K.stopPropagation(),c.duplicateShape(U.id)},ke=(U,K)=>{K.key==="Enter"&&(K.stopPropagation(),c.duplicateShape(U.id))},me=(U,K)=>{K.stopPropagation(),c.deleteShape(U.id)},Pe=(U,K)=>{K.key==="Enter"&&(K.stopPropagation(),c.deleteShape(U.id))},Te=(U,K,re)=>n(7,K[re].hover=!0,b),Ve=(U,K,re)=>n(7,K[re].hover=!1,b),be=(U,K,re)=>n(7,K[re].hover=!0,b),Ce=(U,K,re)=>n(7,K[re].hover=!1,b),ge=U=>c.setSelectedItemId(U.id);function ze(U){O[U?"unshift":"push"](()=>{u=U,n(4,u)})}function he(U){O[U?"unshift":"push"](()=>{o=U,n(2,o)})}return t.$$.update=()=>{t.$$.dirty[0]&1&&c&&(n(5,h=c.searchTerm),n(6,d=c.currentType),n(7,b=c.filteredShapes),c.shapes,n(8,g=c.selectedItemId),n(9,m=c.recentlyImportedShapeIds),n(10,T=c.dialogOpen),n(11,k=c.importButtonSelected),n(12,L=c.libraryOpen))},[c,r,o,i,u,h,d,b,g,m,T,k,L,D,B,l,a,ee,te,V,I,S,X,$,W,se,ke,me,Pe,Te,Ve,be,Ce,ge,ze,he]}class Bo extends Fe{constructor(e){super(),Ue(this,e,Mo,No,Ie,{},null,[-1,-1])}}new Bo({target:document.getElementById("app")});
